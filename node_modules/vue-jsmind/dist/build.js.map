{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4fc1592970019b72096a","webpack:///build.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///src/components/JsMind/JsMind.vue","webpack:///./src/components/JsMind/index.js","webpack:///./src/components/JsMind/JsMind.vue","webpack:///./src/components/JsMind/JsMind.vue?0c1d","webpack:///./src/components/JsMind/JsMind.vue?e998","webpack:///./node_modules/vue-style-loader/lib/addStylesClient.js","webpack:///./node_modules/vue-style-loader/lib/listToStyles.js","webpack:///./node_modules/vue-loader/lib/component-normalizer.js","webpack:///./src/components/JsMind/jsmind.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/components/JsMind/jsmind.css?1cea","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./src/components/JsMind/jsmind.css","webpack:///./src/components/JsMind/jsmind.draggable.js","webpack:///./src/components/JsMind/jsmind.screenshot.js","webpack:///./src/components/JsMind/JsMind.vue?2d74"],"names":["root","factory","exports","module","define","amd","self","this","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","cssWithMappingToString","item","useSourceMap","content","cssMapping","btoa","sourceMapping","toComment","concat","sources","map","source","sourceRoot","join","sourceMap","unescape","encodeURIComponent","JSON","stringify","list","toString","mediaQuery","alreadyImportedModules","length","id","push","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__jsmind_js__","__WEBPACK_IMPORTED_MODULE_1__jsmind_css__","__WEBPACK_IMPORTED_MODULE_2__jsmind_draggable_js__","__WEBPACK_IMPORTED_MODULE_3__jsmind_screenshot_js__","props","values","type","required","options","height","mounted","init","data","jm","refresh","value","default_options","updated","watch","methods","jsMind","install","Vue","component","window","injectStyle","ssrContext","normalizeComponent","__vue_styles__","Component","locals","addStylesToDom","styles","domStyle","stylesInDom","refs","j","parts","addStyle","createStyleElement","styleElement","document","createElement","head","appendChild","obj","update","remove","querySelector","ssrIdKey","isProduction","noop","parentNode","removeChild","isOldIE","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","bind","applyToTag","newObj","css","media","index","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","firstChild","hasDocument","DEBUG","Error","listToStyles","getElementsByTagName","navigator","test","userAgent","toLowerCase","parentId","_isProduction","_options","newList","mayRemove","textStore","replacement","filter","Boolean","newStyles","part","rawScriptExports","compiledTemplate","functionalTemplate","injectStyles","scopeId","moduleIdentifier","esModule","scriptExports","default","render","staticRenderFns","_compiled","functional","_scopeId","hook","context","$vnode","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","existing","beforeCreate","_injectStyles","h","global","__WEBPACK_AMD_DEFINE_RESULT__","_typeof","Symbol","iterator","constructor","$w","_noop","logger","console","log","debug","error","warn","info","__name__","$d","$g","getElementById","$c","tag","$t","t","hasChildNodes","nodeValue","$h","HTMLElement","innerHTML","$i","el","nodeType","style","ownerDocument","String","startsWith","slice","DEFAULT_OPTIONS","container","editable","theme","mode","support_html","view","engine","hmargin","vmargin","line_width","line_color","layout","hspace","vspace","pspace","default_event_handle","enable_mousedown_handle","enable_click_handle","enable_dblclick_handle","shortcut","enable","handles","mapping","addchild","addbrother","editnode","delnode","toggle","left","up","right","down","current","version","opts","util","json","merge","inited","mind","event_handles","direction","center","event_type","show","resize","edit","select","key","meta","ctrl","alt","shift","node","sId","iIndex","sTopic","oData","bIsRoot","oParent","eDirection","bExpanded","topic","isroot","expanded","children","_data","compare","node1","node2","i1","i2","inherited","pnode","pid","get_location","vd","x","abs_x","y","abs_y","get_size","w","width","author","selected","nodes","get_node","nodeid","set_root","_put_node","add_node","parent_node","idx","is_node","the_parent_node","nodeindex","isNaN","children_len","r","_reindex","insert_node_before","node_before","the_node_before","node_index","get_node_before","the_node","insert_node_after","node_after","the_node_after","get_node_after","move_node","beforeid","parentid","_move_node","_flow_node_direction","len","_move_node_internal","sibling","si","splice","remove_node","ci","k","sort","format","node_tree","example","get_mind","df","_parse","get_data","_buildnode","node_root","_extract_data","_extract_subnode","node_json","node_parent","node_data","node_array","_array","narray","reverse","root_id","_extract_root","root_json","extract_count","node_direction","sub_extract_count","_array_node","freemind","xml","xml_doc","_parse_xml","xml_root","_find_root","_load_node","xmllines","_buildmap","DOMParser","parseFromString","ActiveXObject","async","loadXML","tagName","ns","parent_id","xml_node","node_id","getAttribute","node_topic","topic_children","topic_child","textContent","_load_attributes","node_expanded","node_position","child","attr","attr_data","pos","ajax","_xhr","xhr","XMLHttpRequest","e","_eurl","url","request","param","method","callback","fail_callback","a","tmp_param","onreadystatechange","readyState","status","string2json","responseText","open","setRequestHeader","send","post","dom","add_event","addEventListener","attachEvent","file","read","file_data","fn_callback","reader","FileReader","onload","result","readAsText","save","blob","Blob","BlobBuilder","MozBlobBuilder","WebKitBlobBuilder","MSBlobBuilder","bb","append","getBlob","msSaveBlob","URL","webkitURL","bloburl","createObjectURL","anchor","visibility","href","download","body","evt","createEvent","initEvent","dispatchEvent","location","json2string","json_str","parse","b","uuid","newid","Date","getTime","Math","random","substr","text","is_empty","replace","opts_layout","opts_view","data_provider","layout_provider","view_provider","shortcut_provider","_event_bind","init_plugins","enable_edit","disable_edit","enable_event_handle","event_handle","disable_event_handle","get_editable","set_theme","theme_old","reset_theme","reset_custom_style","mousedown_handle","click_handle","dblclick_handle","element","target","event","srcElement","get_binded_nodeid","select_node","select_clear","is_expander","toggle_node","begin_edit","edit_node_begin","end_edit","edit_node_end","save_location","relayout","restore_location","expand_node","collapse_node","expand_all","collapse_all","expand_to_depth","depth","_reset","reset","_show","load","invoke_event_handle","get_meta","data_format","get_root","reset_node_custom_style","afterid","update_node","is_visible","get_selected_node","is_node_visible","find_node_before","prev","ni","find_node_after","getthis","set_node_color","bgcolor","fgcolor","set_node_font_style","size","weight","set_node_background_image","image","rotation","set_node_background_rotation","add_event_listener","setTimeout","_invoke_event_handle","mind_data","isside","bounds","cache_valid","layout_direction","layout_offset","_layout_direction_root","layout_data","children_count","side_index","_layout_direction_side","subnode","offset_x","offset_y","outer_height","left_nodes","right_nodes","unshift","outer_height_left","_layout_offset_subnodes","outer_height_right","max","total_height","nodes_count","node_outer_height","base_y","pd","set_visible","middle_height","_layout_offset_subnodes_height","get_node_offset","offset_cache","_offset_","offset_p","get_node_point","view_data","get_node_point_in","get_node_point_out","pout_cache","_pout_","get_expander_point","ex_p","ceil","get_min_size","pout","part_layout","target_depth","curr_nodes","curr_depth","root_layout_data","visible","is_expand","graph_canvas","e_canvas","canvas_ctx","getContext","set_size","clear","clearRect","draw_line","pin","offset","ctx","strokeStyle","lineWidth","lineCap","_bezier_to","copy_to","dest_canvas_ctx","drawImage","x1","y1","x2","y2","beginPath","moveTo","bezierCurveTo","stroke","_line_to","lineTo","graph_svg","e_svg","lines","createElementNS","line","img","Image","src","XMLSerializer","serializeToString","path","e_panel","e_nodes","selected_node","editing_node","graph","e_editor","className","actualZoom","zoomStep","minZoom","maxZoom","v","keyCode","stopPropagation","event_name","parentElement","clear_lines","clear_nodes","theme_name","init_nodes","expand_size","min_size","min_width","min_height","client_w","clientWidth","client_h","clientHeight","init_nodes_size","doc_frag","createDocumentFragment","create_node_element","d_e","expander","_reset_node_custom_style","clear_node_custom_style","get_editing_node","is_editing","ncs","getComputedStyle","parseInt","getPropertyValue","zIndex","focus","get_view_offset","show_nodes","show_lines","zoomIn","setZoom","zoomOut","zoom","transform","_center_root","outer_w","outer_h","_offset","scrollLeft","scrollTop","keep_center","_saved_location","top","node_element","p_expander","expander_text","display","backgroundColor","color","fontSize","fontWeight","fontStyle","backgroundImage","scaledImageData","toDataURL","backgroundSize","_mapping","handler","handle_addchild","handle_addbrother","handle_editnode","handle_delnode","handle_toggle","handle_up","handle_down","handle_left","handle_right","handle","enable_shortcut","disable_shortcut","kc","metaKey","ctrlKey","altKey","shiftKey","_jm","preventDefault","up_node","np","down_node","_handle_direction","floor","childrencount","plugin","plugins","register_plugin","sender","_init_plugins","fn_init","g","Function","eval","api","insert","singleton","exported","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","base","count","references","updater","insertStyleElement","attributes","nonce","keys","forEach","getTarget","removeStyleElement","removeAttribute","memo","all","atob","styleTarget","HTMLIFrameElement","contentDocument","lastIdentifiers","newLastIdentifiers","_i","_identifier","_index","draggable","jdom","clear_selection","getSelection","removeAllRanges","selection","empty","lookup_delay","lookup_interval","shadow","shadow_w","shadow_h","active_node","target_node","target_direct","hlookup_delay","hlookup_timer","capture","moved","_create_canvas","_create_shadow","cursor","opacity","reset_shadow","show_shadow","hide_shadow","_magnet_shadow","_clear_lines","_canvas_lineto","sp","_lookup_close_node","nl","root_location","root_size","root_x","sw","sh","sx","offsetLeft","sy","offsetTop","direct","min_distance","Number","MAX_VALUE","distance","closest_node","closest_p","shadow_p","abs","result_node","lookup_close_node","jd","dragstart","drag","dragend","jview","clientX","touches","clientY","client_hw","client_hh","clearTimeout","clearInterval","setInterval","px","py","src_node","sibling_nodes","sc","delta_y","dy","jm_event_handle","draggable_plugin","screenshot","cstyle","property_name","jcanvas","rect","arcTo","text_multiline","lineheight","text_len","chars","split","test_line","textAlign","textBaseline","measureText","fillText","text_ellipsis","center_y","fittingString","max_width","ellipsis_width","substring","translate","closePath","clip","rotate","PI","restore","canvas_elem","_inited","shoot","_draw","clean","_watermark","shootDownload","_download","shootAsDataURL","_draw_lines","_draw_nodes","fillStyle","font","check_nodes_ready","allOk","ready","_draw_node","round_radius","padding_left","padding_right","padding_top","padding_bottom","text_overflow","rb","tb","fill","backgroundUrl","line_height","_draw_expander","style_left","style_top","is_plus","arc","msToBlob","screenshot_plugin","jss","_vm","_h","$createElement","_c","_self","attrs","_v","_m","staticStyle","staticClass","esExports"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,gBAAZC,UAA0C,gBAAXC,QACxCA,OAAOD,QAAUD,IACQ,kBAAXG,SAAyBA,OAAOC,IAC9CD,OAAO,gBAAkBH,GACC,gBAAZC,SACdA,QAAQ,cAAgBD,IAExBD,EAAK,cAAgBC,KACJ,mBAATK,MAAuBA,KAAOC,KAAM,WAC9C,M,aCNE,QAASC,GAAoBC,GAG5B,GAAGC,EAAiBD,GACnB,MAAOC,GAAiBD,GAAUP,OAGnC,IAAIC,GAASO,EAAiBD,IAC7BE,EAAGF,EACHG,GAAG,EACHV,WAUD,OANAW,GAAQJ,GAAUK,KAAKX,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOS,GAAI,EAGJT,EAAOD,QAvBf,GAAIQ,KA4DJ,OAhCAF,GAAoBO,EAAIF,EAGxBL,EAAoBQ,EAAIN,EAGxBF,EAAoBS,EAAI,SAASf,EAASgB,EAAMC,GAC3CX,EAAoBY,EAAElB,EAASgB,IAClCG,OAAOC,eAAepB,EAASgB,GAC9BK,cAAc,EACdC,YAAY,EACZC,IAAKN,KAMRX,EAAoBkB,EAAI,SAASvB,GAChC,GAAIgB,GAAShB,GAAUA,EAAOwB,WAC7B,WAAwB,MAAOxB,GAAgB,SAC/C,WAA8B,MAAOA,GAEtC,OADAK,GAAoBS,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRX,EAAoBY,EAAI,SAASQ,EAAQC,GAAY,MAAOR,QAAOS,UAAUC,eAAejB,KAAKc,EAAQC,IAGzGrB,EAAoBwB,EAAI,SAGjBxB,EAAoBA,EAAoByB,EAAI,KCgB/C,SAAU9B,EAAQD,GC5BxB,QAASgC,GAAuBC,EAAMC,GACrC,GAAIC,GAAUF,EAAK,IAAM,GACrBG,EAAaH,EAAK,EACtB,KAAKG,EACJ,MAAOD,EAGR,IAAID,GAAgC,kBAATG,MAAqB,CAC/C,GAAIC,GAAgBC,EAAUH,EAK9B,QAAQD,GAASK,OAJAJ,EAAWK,QAAQC,IAAI,SAAUC,GACjD,MAAO,iBAAmBP,EAAWQ,WAAaD,EAAS,SAGxBH,QAAQF,IAAgBO,KAAK,MAGlE,OAAQV,GAASU,KAAK,MAIvB,QAASN,GAAUO,GAKlB,MAAO,mEAHMT,KAAKU,SAASC,mBAAmBC,KAAKC,UAAUJ,MAGtC,MArExB7C,EAAOD,QAAU,SAASkC,GACzB,GAAIiB,KAwCJ,OArCAA,GAAKC,SAAW,WACf,MAAO/C,MAAKqC,IAAI,SAAUT,GACzB,GAAIE,GAAUH,EAAuBC,EAAMC,EAC3C,OAAGD,GAAK,GACA,UAAYA,EAAK,GAAK,IAAME,EAAU,IAEtCA,IAENU,KAAK,KAITM,EAAK1C,EAAI,SAASE,EAAS0C,GACJ,gBAAZ1C,KACTA,IAAY,KAAMA,EAAS,KAE5B,KAAI,GADA2C,MACI7C,EAAI,EAAGA,EAAIJ,KAAKkD,OAAQ9C,IAAK,CACpC,GAAI+C,GAAKnD,KAAKI,GAAG,EACA,iBAAP+C,KACTF,EAAuBE,IAAM,GAE/B,IAAI/C,EAAI,EAAGA,EAAIE,EAAQ4C,OAAQ9C,IAAK,CACnC,GAAIwB,GAAOtB,EAAQF,EAKG,iBAAZwB,GAAK,IAAoBqB,EAAuBrB,EAAK,MAC3DoB,IAAepB,EAAK,GACtBA,EAAK,GAAKoB,EACDA,IACTpB,EAAK,GAAK,IAAMA,EAAK,GAAK,UAAYoB,EAAa,KAEpDF,EAAKM,KAAKxB,MAINkB,IDiHF,SAAUlD,EAAQyD,EAAqBpD,GAE7C,YACqB,IAAIqD,GAA2CrD,EAAoB,GAE/DsD,GADmDtD,EAAoBkB,EAAEmC,GAC7BrD,EAAoB,KAEhEuD,GADoDvD,EAAoBkB,EAAEoC,GACrBtD,EAAoB,KAEzEwD,GAD6DxD,EAAoBkB,EAAEqC,GAC7BvD,EAAoB,IACZA,GAAoBkB,EAAEsC,EE3J7G,MACE9C,KAAM,SACN+C,OACEC,QACEC,KAAM9C,OACN+C,UAAU,GAEZC,SACEF,KAAM9C,QAERiD,QACEH,KAAN,OACMC,UAAN,IAGEG,QAfF,WAgBIhE,KAAKiE,QAEPC,KAlBF,WAmBI,OACEC,MACAC,QAAN,EACMC,SAEAC,iBACN,6BACA,YACA,gBACA,YACA,gBACA,MACA,gBACA,YACA,WACA,aACA,mBAEA,QACA,UACA,UACA,WAEA,UACA,UACA,SACA,QADA,WAEA,qCAGA,SAEA,YACA,cACA,aACA,WACA,UACA,QACA,MACA,SACA,QACA,gCAMEC,QAlEF,WAmEIvE,KAAKiE,QAEPO,OACEV,QADJ,WACA,UACA,2BACA,gBAIEW,SACER,KADJ,WAEA,iBACQjE,KAAKqE,MAAb,mBAEQrE,KAAKqE,MAAb,WAEM,IAAN,mDACMrE,MAAKmE,GAAX,qCFoLM,SAAUvE,EAAQyD,EAAqBpD,GAE7C,YGxRA,4DACAyE,KAAOC,QAAU,SAAAC,GACbA,EAAIC,UAAUH,IAAO/D,KAAM+D,MAGT,mBAAXI,SAA0BA,OAAOF,KACxCE,OAAOF,IAAIC,UAAUH,IAAO/D,KAAM+D,KAGvBA,YAAf,GH+RM,SAAU9E,EAAQyD,EAAqBpD,GAE7C,YI1SA,SAAS8E,GAAaC,GACpB,EAAQ,GADV,mBAGIC,EAAqB,EAAQ,GAS7BC,EAAiBH,EAKjBI,EAAYF,EACd,IACA,KATgC,EAWhCC,EAPoB,kBAEU,KAUjB,KAAAC,EAAiB,SJmT1B,SAAUvF,EAAQD,EAASM,GK1UjC,GAAI6B,GAAU,EAAQ,EACA,iBAAZA,KAAsBA,IAAYlC,EAAOQ,EAAI0B,EAAS,MAC7DA,EAAQsD,SAAQxF,EAAOD,QAAUmC,EAAQsD,OAE/B,GAAQ,GAAkE,WAAYtD,GAAS,OLmVtG,SAAUlC,EAAQD,EAASM,GM1VjCN,EAAUC,EAAOD,QAAU,EAAQ,IAAoD,GAKvFA,EAAQyD,MAAMxD,EAAOQ,EAAI,kDAAmD,MNmWtE,SAAUR,EAAQD,EAASM,GOnRjC,QAASoF,GAAgBC,GACvB,IAAK,GAAIlF,GAAI,EAAGA,EAAIkF,EAAOpC,OAAQ9C,IAAK,CACtC,GAAIwB,GAAO0D,EAAOlF,GACdmF,EAAWC,EAAY5D,EAAKuB,GAChC,IAAIoC,EAAU,CACZA,EAASE,MACT,KAAK,GAAIC,GAAI,EAAGA,EAAIH,EAASI,MAAMzC,OAAQwC,IACzCH,EAASI,MAAMD,GAAG9D,EAAK+D,MAAMD,GAE/B,MAAOA,EAAI9D,EAAK+D,MAAMzC,OAAQwC,IAC5BH,EAASI,MAAMvC,KAAKwC,EAAShE,EAAK+D,MAAMD,IAEtCH,GAASI,MAAMzC,OAAStB,EAAK+D,MAAMzC,SACrCqC,EAASI,MAAMzC,OAAStB,EAAK+D,MAAMzC,YAEhC,CAEL,IAAK,GADDyC,MACKD,EAAI,EAAGA,EAAI9D,EAAK+D,MAAMzC,OAAQwC,IACrCC,EAAMvC,KAAKwC,EAAShE,EAAK+D,MAAMD,IAEjCF,GAAY5D,EAAKuB,KAAQA,GAAIvB,EAAKuB,GAAIsC,KAAM,EAAGE,MAAOA,KAK5D,QAASE,KACP,GAAIC,GAAeC,SAASC,cAAc,QAG1C,OAFAF,GAAalC,KAAO,WACpBqC,EAAKC,YAAYJ,GACVA,EAGT,QAASF,GAAUO,GACjB,GAAIC,GAAQC,EACRP,EAAeC,SAASO,cAAc,SAAWC,EAAW,MAAQJ,EAAIhD,GAAK,KAEjF,IAAI2C,EAAc,CAChB,GAAIU,EAGF,MAAOC,EAOPX,GAAaY,WAAWC,YAAYb,GAIxC,GAAIc,EAAS,CAEX,GAAIC,GAAaC,GACjBhB,GAAeiB,IAAqBA,EAAmBlB,KACvDO,EAASY,EAAoBC,KAAK,KAAMnB,EAAce,GAAY,GAClER,EAASW,EAAoBC,KAAK,KAAMnB,EAAce,GAAY,OAGlEf,GAAeD,IACfO,EAASc,EAAWD,KAAK,KAAMnB,GAC/BO,EAAS,WACPP,EAAaY,WAAWC,YAAYb,GAMxC,OAFAM,GAAOD,GAEA,SAAsBgB,GAC3B,GAAIA,EAAQ,CACV,GAAIA,EAAOC,MAAQjB,EAAIiB,KACnBD,EAAOE,QAAUlB,EAAIkB,OACrBF,EAAO1E,YAAc0D,EAAI1D,UAC3B,MAEF2D,GAAOD,EAAMgB,OAEbd,MAcN,QAASW,GAAqBlB,EAAcwB,EAAOjB,EAAQF,GACzD,GAAIiB,GAAMf,EAAS,GAAKF,EAAIiB,GAE5B,IAAItB,EAAayB,WACfzB,EAAayB,WAAWC,QAAUC,EAAYH,EAAOF,OAChD,CACL,GAAIM,GAAU3B,SAAS4B,eAAeP,GAClCQ,EAAa9B,EAAa8B,UAC1BA,GAAWN,IAAQxB,EAAaa,YAAYiB,EAAWN,IACvDM,EAAW1E,OACb4C,EAAa+B,aAAaH,EAASE,EAAWN,IAE9CxB,EAAaI,YAAYwB,IAK/B,QAASR,GAAYpB,EAAcK,GACjC,GAAIiB,GAAMjB,EAAIiB,IACVC,EAAQlB,EAAIkB,MACZ5E,EAAY0D,EAAI1D,SAiBpB,IAfI4E,GACFvB,EAAagC,aAAa,QAAST,GAEjCvD,EAAQiE,OACVjC,EAAagC,aAAavB,EAAUJ,EAAIhD,IAGtCV,IAGF2E,GAAO,mBAAqB3E,EAAUL,QAAQ,GAAK,MAEnDgF,GAAO,uDAAyDpF,KAAKU,SAASC,mBAAmBC,KAAKC,UAAUJ,MAAgB,OAG9HqD,EAAayB,WACfzB,EAAayB,WAAWC,QAAUJ,MAC7B,CACL,KAAOtB,EAAakC,YAClBlC,EAAaa,YAAYb,EAAakC,WAExClC,GAAaI,YAAYH,SAAS4B,eAAeP,KArNrD,GAAIa,GAAkC,mBAAblC,SAEzB,IAAqB,mBAAVmC,QAAyBA,QAC7BD,EACH,KAAM,IAAIE,OACV,0JAKJ,IAAIC,GAAe,EAAQ,GAevB5C,KAQAS,EAAOgC,IAAgBlC,SAASE,MAAQF,SAASsC,qBAAqB,QAAQ,IAC9EtB,EAAmB,KACnBD,EAAmB,EACnBN,GAAe,EACfC,EAAO,aACP3C,EAAU,KACVyC,EAAW,kBAIXK,EAA+B,mBAAd0B,YAA6B,eAAeC,KAAKD,UAAUE,UAAUC,cAE1F7I,GAAOD,QAAU,SAAU+I,EAAU5F,EAAM6F,EAAeC,GACxDpC,EAAemC,EAEf7E,EAAU8E,KAEV,IAAItD,GAAS8C,EAAaM,EAAU5F,EAGpC,OAFAuC,GAAeC,GAER,SAAiBuD,GAEtB,IAAK,GADDC,MACK1I,EAAI,EAAGA,EAAIkF,EAAOpC,OAAQ9C,IAAK,CACtC,GAAIwB,GAAO0D,EAAOlF,GACdmF,EAAWC,EAAY5D,EAAKuB,GAChCoC,GAASE,OACTqD,EAAU1F,KAAKmC,GAEbsD,GACFvD,EAAS8C,EAAaM,EAAUG,GAChCxD,EAAeC,IAEfA,IAEF,KAAK,GAAIlF,GAAI,EAAGA,EAAI0I,EAAU5F,OAAQ9C,IAAK,CACzC,GAAImF,GAAWuD,EAAU1I,EACzB,IAAsB,IAAlBmF,EAASE,KAAY,CACvB,IAAK,GAAIC,GAAI,EAAGA,EAAIH,EAASI,MAAMzC,OAAQwC,IACzCH,EAASI,MAAMD,WAEVF,GAAYD,EAASpC,OAwFpC,IAAIsE,GAAc,WAChB,GAAIsB,KAEJ,OAAO,UAAUzB,EAAO0B,GAEtB,MADAD,GAAUzB,GAAS0B,EACZD,EAAUE,OAAOC,SAAS1G,KAAK,WPgapC,SAAU5C,EAAQD,GQxkBxBC,EAAOD,QAAU,SAAuB+I,EAAU5F,GAGhD,IAAK,GAFDwC,MACA6D,KACK/I,EAAI,EAAGA,EAAI0C,EAAKI,OAAQ9C,IAAK,CACpC,GAAIwB,GAAOkB,EAAK1C,GACZ+C,EAAKvB,EAAK,GACVwF,EAAMxF,EAAK,GACXyF,EAAQzF,EAAK,GACba,EAAYb,EAAK,GACjBwH,GACFjG,GAAIuF,EAAW,IAAMtI,EACrBgH,IAAKA,EACLC,MAAOA,EACP5E,UAAWA,EAER0G,GAAUhG,GAGbgG,EAAUhG,GAAIwC,MAAMvC,KAAKgG,GAFzB9D,EAAOlC,KAAK+F,EAAUhG,IAAQA,GAAIA,EAAIwC,OAAQyD,KAKlD,MAAO9D,KRolBH,SAAU1F,EAAQD,GSvmBxBC,EAAOD,QAAU,SACf0J,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,GAAIC,GACAC,EAAgBP,EAAmBA,MAGnCzF,QAAcyF,GAAiBQ,OACtB,YAATjG,GAA8B,aAATA,IACvB+F,EAAWN,EACXO,EAAgBP,EAAiBQ,QAInC,IAAI/F,GAAmC,kBAAlB8F,GACjBA,EAAc9F,QACd8F,CAGAN,KACFxF,EAAQgG,OAASR,EAAiBQ,OAClChG,EAAQiG,gBAAkBT,EAAiBS,gBAC3CjG,EAAQkG,WAAY,GAIlBT,IACFzF,EAAQmG,YAAa,GAInBR,IACF3F,EAAQoG,SAAWT,EAGrB,IAAIU,EA4BJ,IA3BIT,GACFS,EAAO,SAAUC,GAEfA,EACEA,GACCpK,KAAKqK,QAAUrK,KAAKqK,OAAOrF,YAC3BhF,KAAKsK,QAAUtK,KAAKsK,OAAOD,QAAUrK,KAAKsK,OAAOD,OAAOrF,WAEtDoF,GAA0C,mBAAxBG,uBACrBH,EAAUG,qBAGRf,GACFA,EAAajJ,KAAKP,KAAMoK,GAGtBA,GAAWA,EAAQI,uBACrBJ,EAAQI,sBAAsBC,IAAIf,IAKtC5F,EAAQ4G,aAAeP,GACdX,IACTW,EAAOX,GAGLW,EAAM,CACR,GAAIF,GAAanG,EAAQmG,WACrBU,EAAWV,EACXnG,EAAQgG,OACRhG,EAAQ8G,YAEPX,IAQHnG,EAAQ+G,cAAgBV,EAExBrG,EAAQgG,OAAS,SAAmCgB,EAAGV,GAErD,MADAD,GAAK5J,KAAK6J,GACHO,EAASG,EAAGV,KAVrBtG,EAAQ8G,aAAeD,KAChBxI,OAAOwI,EAAUR,IACnBA,GAaT,OACER,SAAUA,EACVhK,QAASiK,EACT9F,QAASA,KTsnBP,SAAUlE,EAAQD,EAASM,IAEL,SAAS8K,GAAS,GAAIC,GAAkCC,EAA4B,kBAAXC,SAAoD,gBAApBA,QAAOC,SAAwB,SAAUhF,GAAO,aAAcA,IAAS,SAAUA,GAAO,MAAOA,IAAyB,kBAAX+E,SAAyB/E,EAAIiF,cAAgBF,QAAU/E,IAAQ+E,OAAO3J,UAAY,eAAkB4E,KUptBpV,SAAWkF,GACT,YAGA,IAOIC,GAAQ,aACRC,EAA6B,mBAAZC,UACjBC,IAAKH,EAAOI,MAAOJ,EAAOK,MAAOL,EAAOM,KAAMN,EAAOO,KAAMP,GAC3DE,OAGJ,SAAsB,KAAX5L,IAA2BA,EAAOD,cACd,KAAhB0L,EAAA,OAEP,WADAE,GAAOE,IAAIK,iCAMnB,IAAIC,GAAKV,EAAGtF,SACRiG,EAAK,SAAU7I,GAAM,MAAO4I,GAAGE,eAAe9I,IAC9C+I,EAAK,SAAUC,GAAO,MAAOJ,GAAG/F,cAAcmG,IAC9CC,EAAK,SAAUjL,EAAGkL,GAASlL,EAAEmL,gBAAmBnL,EAAE6G,WAAWuE,UAAYF,EAAYlL,EAAE+E,YAAY6F,EAAGpE,eAAe0E,KAErHG,EAAK,SAAUrL,EAAGkL,GACdA,YAAaI,cACbtL,EAAEuL,UAAY,GACdvL,EAAE+E,YAAYmG,IAEdlL,EAAEuL,UAAYL,GAIlBM,EAAK,SAAUC,GAAM,QAASA,GAAqB,gBAAd,KAAOA,EAAP,cAAOA,KAAqC,IAAhBA,EAAGC,UAAwC,WAApB,EAAOD,EAAGE,QAAoD,WAA5B,EAAOF,EAAGG,eAC9F,mBAA/BC,QAAOzL,UAAU0L,aAA4BD,OAAOzL,UAAU0L,WAAa,SAAUxL,GAAK,MAAOzB,MAAKkN,MAAM,EAAGzL,EAAEyB,UAAYzB,GAExI,IAAI0L,IACAC,UAAW,GACXC,UAAU,EACVC,MAAO,KACPC,KAAM,OACNC,cAAc,EAEdC,MACIC,OAAQ,SACRC,QAAS,IACTC,QAAS,GACTC,WAAY,EACZC,WAAY,QAEhBC,QACIC,OAAQ,GACRC,OAAQ,GACRC,OAAQ,IAEZC,sBACIC,yBAAyB,EACzBC,qBAAqB,EACrBC,wBAAwB,GAE5BC,UACIC,QAAQ,EACRC,WAEAC,SACIC,SAAU,GACVC,WAAY,GACZC,SAAU,IACVC,QAAS,GACTC,OAAQ,GACRC,KAAM,GACNC,GAAI,GACJC,MAAO,GACPC,KAAM,MAMdhL,EAAK,QAALA,GAAeL,GACfK,EAAGiL,QAAUpP,KAEbA,KAAKqP,QAlFS,OAmFd,IAAIC,KAIJ,IAHAnL,EAAGoL,KAAKC,KAAKC,MAAMH,EAAMnC,GACzBhJ,EAAGoL,KAAKC,KAAKC,MAAMH,EAAMxL,IAEpBwL,EAAKlC,UAEN,WADA7B,GAAOI,MAAM,qDAGjB3L,MAAK8D,QAAUwL,EACftP,KAAK0P,QAAS,EACd1P,KAAK2P,KAAO,KACZ3P,KAAK4P,iBACL5P,KAAKiE,OAITE,GAAG0L,WAAcb,MAAO,EAAGc,OAAQ,EAAGZ,MAAO,GAC7C/K,EAAG4L,YAAeC,KAAM,EAAGC,OAAQ,EAAGC,KAAM,EAAGC,OAAQ,GACvDhM,EAAGiM,KAAQC,KAAM,KAASC,KAAM,KAASC,IAAK,KAASC,MAAO,MAE9DrM,EAAGsM,KAAO,SAAUC,EAAKC,EAAQC,EAAQC,EAAOC,EAASC,EAASC,EAAYC,GAC1E,MAAKP,GACgB,gBAAVC,OAAsBpF,GAAOI,MAAM,2BACrB,KAAdsF,IAA6BA,GAAY,GACpDjR,KAAKmD,GAAKuN,EACV1Q,KAAKsH,MAAQqJ,EACb3Q,KAAKkR,MAAQN,EACb5Q,KAAKkE,KAAO2M,MACZ7Q,KAAKmR,OAASL,EACd9Q,KAAKsK,OAASyG,EACd/Q,KAAK6P,UAAYmB,EACjBhR,KAAKoR,WAAaH,EAClBjR,KAAKqR,iBACLrR,KAAKsR,eAZO/F,GAAOI,MAAM,mBAe7BxH,EAAGsM,KAAKc,QAAU,SAAUC,EAAOC,GAE/B,GACIC,GAAKF,EAAMlK,MACXqK,EAAKF,EAAMnK,KAaf,OAZIoK,IAAM,GAAKC,GAAM,EACbD,EAAKC,GACK,GAAPD,IAAmB,GAAPC,EACf,GACU,GAAPD,EACH,GACU,GAAPC,GACF,EAED,GAMZxN,EAAGsM,KAAKmB,UAAY,SAAUC,EAAOpB,GACjC,GAAMoB,GAAWpB,EAAM,CACnB,GAAIoB,EAAM1O,KAAOsN,EAAKtN,GAClB,OAAO,CAEX,IAAI0O,EAAMV,OACN,OAAO,CAIX,KAFA,GAAIW,GAAMD,EAAM1O,GACZ1B,EAAIgP,GACAhP,EAAE0P,QAEN,GADA1P,EAAIA,EAAE6I,OACF7I,EAAE0B,KAAO2O,EACT,OAAO,EAInB,OAAO,GAGX3N,EAAGsM,KAAKlP,WACJwQ,aAAc,WACV,GAAIC,GAAKhS,KAAKsR,MAAM7D,IACpB,QACIwE,EAAGD,EAAGE,MACNC,EAAGH,EAAGI,QAGdC,SAAU,WACN,GAAIL,GAAKhS,KAAKsR,MAAM7D,IACpB,QACI6E,EAAGN,EAAGO,MACNzH,EAAGkH,EAAGjO,UAMlBI,EAAGwL,KAAO,WACN3P,KAAKW,KAAO,KACZX,KAAKwS,OAAS,KACdxS,KAAKqP,QAAU,KACfrP,KAAKP,KAAO,KACZO,KAAKyS,SAAW,KAChBzS,KAAK0S,UAGTvO,EAAGwL,KAAKpO,WACJoR,SAAU,SAAUC,GAChB,MAAIA,KAAU5S,MAAK0S,MACR1S,KAAK0S,MAAME,IAElBrH,EAAOK,KAAK,eAAiBgH,EAAS,sBAC/B,OAIfC,SAAU,SAAUD,EAAQ1B,EAAOhN,GACd,MAAblE,KAAKP,MACLO,KAAKP,KAAO,GAAI0E,GAAGsM,KAAKmC,EAAQ,EAAG1B,EAAOhN,GAAM,GAChDlE,KAAK8S,UAAU9S,KAAKP,OAEpB8L,EAAOI,MAAM,+BAIrBoH,SAAU,SAAUC,EAAaJ,EAAQ1B,EAAOhN,EAAM+O,EAAKpD,EAAWuB,GAClE,IAAKjN,EAAGoL,KAAK2D,QAAQF,GAAc,CAC/B,GAAIG,GAAkBnT,KAAK2S,SAASK,EACpC,OAAKG,GAIMnT,KAAK+S,SAASI,EAAiBP,EAAQ1B,EAAOhN,EAAM+O,EAAKpD,EAAWuB,IAH3E7F,EAAOI,MAAM,sBAAwBqH,EAAc,uBAC5C,MAKf,GAAII,GAAYH,IAAQ,EACpBxC,EAAO,IACX,IAAIuC,EAAY7B,OAAQ,CACpB,GAAIzQ,GAAIyD,EAAG0L,UAAUX,KACrB,IAAImE,MAAMxD,GAAY,CAIlB,IAAK,GAHDwB,GAAW2B,EAAY3B,SACvBiC,EAAejC,EAASnO,OACxBqQ,EAAI,EACCnT,EAAI,EAAGA,EAAIkT,EAAclT,IAAWiR,EAASjR,GAAGyP,YAAc1L,EAAG0L,UAAUb,KAAQuE,IAAcA,GAC1G7S,GAAK4S,EAAe,GAAKC,EAAI,EAAKpP,EAAG0L,UAAUb,KAAO7K,EAAG0L,UAAUX,UAEnExO,GAAKmP,GAAa1L,EAAG0L,UAAUb,KAAQ7K,EAAG0L,UAAUX,MAAQ/K,EAAG0L,UAAUb,IAE7EyB,GAAO,GAAItM,GAAGsM,KAAKmC,EAAQQ,EAAWlC,EAAOhN,GAAM,EAAO8O,EAAatS,EAAG0Q,OAE1EX,GAAO,GAAItM,GAAGsM,KAAKmC,EAAQQ,EAAWlC,EAAOhN,GAAM,EAAO8O,EAAaA,EAAYnD,UAAWuB,EASlG,OAPIpR,MAAK8S,UAAUrC,IACfuC,EAAY3B,SAASjO,KAAKqN,GAC1BzQ,KAAKwT,SAASR,KAEdzH,EAAOI,MAAM,qBAAwB8E,EAAKtN,GAAK,6BAC/CsN,EAAO,MAEJA,GAGXgD,mBAAoB,SAAUC,EAAad,EAAQ1B,EAAOhN,GACtD,IAAKC,EAAGoL,KAAK2D,QAAQQ,GAAc,CAC/B,GAAIC,GAAkB3T,KAAK2S,SAASe,EACpC,OAAKC,GAIM3T,KAAKyT,mBAAmBE,EAAiBf,EAAQ1B,EAAOhN,IAH/DqH,EAAOI,MAAM,sBAAwB+H,EAAc,uBAC5C,MAKf,GAAIE,GAAaF,EAAYpM,MAAQ,EACrC,OAAOtH,MAAK+S,SAASW,EAAYpJ,OAAQsI,EAAQ1B,EAAOhN,EAAM0P,IAGlEC,gBAAiB,SAAUpD,GACvB,IAAKtM,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAK6T,gBAAgBC,IAH5BvI,EAAOI,MAAM,eAAiB8E,EAAO,uBAC9B,MAKf,GAAIA,EAAKU,OAAU,MAAO,KAC1B,IAAI8B,GAAMxC,EAAKnJ,MAAQ,CACvB,OAAI2L,IAAO,EACAxC,EAAKnG,OAAO+G,SAAS4B,GAErB,MAIfc,kBAAmB,SAAUC,EAAYpB,EAAQ1B,EAAOhN,GACpD,IAAKC,EAAGoL,KAAK2D,QAAQc,GAAa,CAC9B,GAAIC,GAAiBjU,KAAK2S,SAASe,YACnC,OAAKO,GAIMjU,KAAK+T,kBAAkBE,EAAgBrB,EAAQ1B,EAAOhN,IAH7DqH,EAAOI,MAAM,qBAAuBqI,EAAa,uBAC1C,MAKf,GAAIJ,GAAaI,EAAW1M,MAAQ,EACpC,OAAOtH,MAAK+S,SAASiB,EAAW1J,OAAQsI,EAAQ1B,EAAOhN,EAAM0P,IAGjEM,eAAgB,SAAUzD,GACtB,IAAKtM,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAKkU,eAAeJ,IAH3BvI,EAAOI,MAAM,eAAiB8E,EAAO,uBAC9B,MAKf,GAAIA,EAAKU,OAAU,MAAO,KAC1B,IAAI8B,GAAMxC,EAAKnJ,KAEf,OADemJ,GAAKnG,OAAO+G,SACdnO,QAAU+P,EACZxC,EAAKnG,OAAO+G,SAAS4B,GAErB,MAIfkB,UAAW,SAAU1D,EAAM2D,EAAUC,EAAUxE,GAC3C,IAAK1L,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAKmU,UAAUL,EAAUM,EAAUC,EAAUxE,IAHpDtE,EAAOI,MAAM,eAAiB8E,EAAO,uBAC9B,MAQf,MAHK4D,KACDA,EAAW5D,EAAKnG,OAAOnH,IAEpBnD,KAAKsU,WAAW7D,EAAM2D,EAAUC,EAAUxE,IAGrD0E,qBAAsB,SAAU9D,EAAMZ,OACT,KAAdA,EACPA,EAAYY,EAAKZ,UAEjBY,EAAKZ,UAAYA,CAGrB,KADA,GAAI2E,GAAM/D,EAAKY,SAASnO,OACjBsR,KACHxU,KAAKuU,qBAAqB9D,EAAKY,SAASmD,GAAM3E,IAItD4E,oBAAqB,SAAUhE,EAAM2D,GACjC,GAAM3D,GAAU2D,EACZ,GAAgB,UAAZA,EACA3D,EAAKnJ,OAAS,EACdtH,KAAKwT,SAAS/C,EAAKnG,YAChB,IAAgB,WAAZ8J,EACP3D,EAAKnJ,MAAQ,EACbtH,KAAKwT,SAAS/C,EAAKnG,YAChB,CACH,GAAIoJ,GAAiBU,EAAYpU,KAAK2S,SAASyB,GAAY,IACxC,OAAfV,GAA6C,MAAtBA,EAAYpJ,QAAkBoJ,EAAYpJ,OAAOnH,IAAMsN,EAAKnG,OAAOnH,KAC1FsN,EAAKnJ,MAAQoM,EAAYpM,MAAQ,GACjCtH,KAAKwT,SAAS/C,EAAKnG,SAI/B,MAAOmG,IAGX6D,WAAY,SAAU7D,EAAM2D,EAAUC,EAAUxE,GAC5C,GAAMY,GAAU4D,EAAU,CACtB,GAAI5D,EAAKnG,OAAOnH,IAAMkR,EAAU,CAI5B,IAFA,GAAIK,GAAUjE,EAAKnG,OAAO+G,SACtBsD,EAAKD,EAAQxR,OACVyR,KACH,GAAID,EAAQC,GAAIxR,IAAMsN,EAAKtN,GAAI,CAC3BuR,EAAQE,OAAOD,EAAI,EACnB,OAGRlE,EAAKnG,OAAStK,KAAK2S,SAAS0B,GAC5B5D,EAAKnG,OAAO+G,SAASjO,KAAKqN,GAG1BA,EAAKnG,OAAO6G,OACRtB,GAAa1L,EAAG0L,UAAUb,KAC1ByB,EAAKZ,UAAYA,EAEjBY,EAAKZ,UAAY1L,EAAG0L,UAAUX,MAGlCuB,EAAKZ,UAAYY,EAAKnG,OAAOuF,UAEjC7P,KAAKyU,oBAAoBhE,EAAM2D,GAC/BpU,KAAKuU,qBAAqB9D,GAE9B,MAAOA,IAGXoE,YAAa,SAAUpE,GACnB,IAAKtM,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAK6U,YAAYf,IAHxBvI,EAAOI,MAAM,eAAiB8E,EAAO,wBAC9B,GAKf,IAAKA,EAED,MADAlF,GAAOI,MAAM,oCACN,CAEX,IAAI8E,EAAKU,OAEL,MADA5F,GAAOI,MAAM,mCACN,CAEU,OAAjB3L,KAAKyS,UAAoBzS,KAAKyS,SAAStP,IAAMsN,EAAKtN,KAClDnD,KAAKyS,SAAW,KAKpB,KAFA,GAAIpB,GAAWZ,EAAKY,SAChByD,EAAKzD,EAASnO,OACX4R,KACH9U,KAAK6U,YAAYxD,EAASyD,GAG9BzD,GAASnO,OAAS,CAIlB,KAFA,GAAIwR,GAAUjE,EAAKnG,OAAO+G,SACtBsD,EAAKD,EAAQxR,OACVyR,KACH,GAAID,EAAQC,GAAIxR,IAAMsN,EAAKtN,GAAI,CAC3BuR,EAAQE,OAAOD,EAAI,EACnB,aAID3U,MAAK0S,MAAMjC,EAAKtN,GAEvB,KAAK,GAAI4R,KAAKtE,SACHA,GAAKsE,EAKhB,OAFAtE,GAAO,MAEA,GAGXqC,UAAW,SAAUrC,GACjB,MAAIA,GAAKtN,KAAMnD,MAAK0S,OAChBnH,EAAOK,KAAK,eAAkB6E,EAAKtN,GAAK,8BACjC,IAEPnD,KAAK0S,MAAMjC,EAAKtN,IAAMsN,GACf,IAIf+C,SAAU,SAAU/C,GAChB,GAAIA,YAAgBtM,GAAGsM,KAAM,CACzBA,EAAKY,SAAS2D,KAAK7Q,EAAGsM,KAAKc,QAC3B,KAAK,GAAInR,GAAI,EAAGA,EAAIqQ,EAAKY,SAASnO,OAAQ9C,IACtCqQ,EAAKY,SAASjR,GAAGkH,MAAQlH,EAAI,KAM7C+D,EAAG8Q,QACCC,WACIC,SACI,MACI,KA/cD,SAgdC,OA5cC,mBA6cD,QA/cE,SAidN,OAAU,YACV,MAAU,GAAM,OAAQ,MAAS,mBAErCC,SAAU,SAAU9S,GAChB,GAAI+S,GAAKlR,EAAG8Q,OAAOC,UACfvF,EAAO,GAAIxL,GAAGwL,IAKlB,OAJAA,GAAKhP,KAAO2B,EAAO+N,KAAK1P,KACxBgP,EAAK6C,OAASlQ,EAAO+N,KAAKmC,OAC1B7C,EAAKN,QAAU/M,EAAO+N,KAAKhB,QAC3BgG,EAAGC,OAAO3F,EAAMrN,EAAO4B,MAChByL,GAEX4F,SAAU,SAAU5F,GAChB,GAAI0F,GAAKlR,EAAG8Q,OAAOC,UACf1F,IAQJ,OAPAA,GAAKa,MACD1P,KAAMgP,EAAKhP,KACX6R,OAAQ7C,EAAK6C,OACbnD,QAASM,EAAKN,SAElBG,EAAKyF,OAAS,YACdzF,EAAKtL,KAAOmR,EAAGG,WAAW7F,EAAKlQ,MACxB+P,GAGX8F,OAAQ,SAAU3F,EAAM8F,GACpB,GAAIJ,GAAKlR,EAAG8Q,OAAOC,UACfhR,EAAOmR,EAAGK,cAAcD,EAE5B,IADA9F,EAAKkD,SAAS4C,EAAUtS,GAAIsS,EAAUvE,MAAOhN,GACzC,YAAcuR,GAEd,IAAK,GADDpE,GAAWoE,EAAUpE,SAChBjR,EAAI,EAAGA,EAAIiR,EAASnO,OAAQ9C,IACjCiV,EAAGM,iBAAiBhG,EAAMA,EAAKlQ,KAAM4R,EAASjR,KAK1DsV,cAAe,SAAUE,GACrB,GAAI1R,KACJ,KAAK,GAAI6Q,KAAKa,GACD,MAALb,GAAkB,SAALA,GAAqB,YAALA,GAAwB,aAALA,GAAyB,YAALA,IAGxE7Q,EAAK6Q,GAAKa,EAAUb,GAExB,OAAO7Q,IAGXyR,iBAAkB,SAAUhG,EAAMkG,EAAaD,GAC3C,GAAIP,GAAKlR,EAAG8Q,OAAOC,UACfhR,EAAOmR,EAAGK,cAAcE,GACxBlV,EAAI,IACJmV,GAAY1E,SACZzQ,EAA2B,QAAvBkV,EAAU/F,UAAsB1L,EAAG0L,UAAUb,KAAO7K,EAAG0L,UAAUX,MAEzE,IAAIuB,GAAOd,EAAKoD,SAAS8C,EAAaD,EAAUzS,GAAIyS,EAAU1E,MAAOhN,EAAM,KAAMxD,EAAGkV,EAAUxE,SAC9F,IAAI,YAAcwE,GAEd,IAAK,GADDvE,GAAWuE,EAAUvE,SAChBjR,EAAI,EAAGA,EAAIiR,EAASnO,OAAQ9C,IACjCiV,EAAGM,iBAAiBhG,EAAMc,EAAMY,EAASjR,KAKrDoV,WAAY,SAAU/E,GAClB,GAAI4E,GAAKlR,EAAG8Q,OAAOC,SACnB,IAAMzE,YAAgBtM,GAAGsM,KAAzB,CACA,GAAI5P,IACAsC,GAAIsN,EAAKtN,GACT+N,MAAOT,EAAKS,MACZE,SAAUX,EAAKW,SAKnB,IAHMX,EAAKnG,QAAUmG,EAAKnG,OAAO6G,SAC7BtQ,EAAEgP,UAAYY,EAAKZ,WAAa1L,EAAG0L,UAAUb,KAAO,OAAS,SAEhD,MAAbyB,EAAKvM,KAAc,CACnB,GAAI4R,GAAYrF,EAAKvM,IACrB,KAAK,GAAI6Q,KAAKe,GACVjV,EAAEkU,GAAKe,EAAUf,GAGzB,GAAI1D,GAAWZ,EAAKY,QACpB,IAAIA,EAASnO,OAAS,EAAG,CACrBrC,EAAEwQ,WACF,KAAK,GAAIjR,GAAI,EAAGA,EAAIiR,EAASnO,OAAQ9C,IACjCS,EAAEwQ,SAASjO,KAAKiS,EAAGG,WAAWnE,EAASjR,KAG/C,MAAOS,MAIfkV,YACIZ,SACI,MACI,KAljBD,SAmjBC,OA/iBC,mBAgjBD,QAljBE,SAojBN,OAAU,aACV,OACM,GAAM,OAAQ,MAAS,iBAAkB,QAAU,KAI7DC,SAAU,SAAU9S,GAChB,GAAI+S,GAAKlR,EAAG8Q,OAAOc,WACfpG,EAAO,GAAIxL,GAAGwL,IAKlB,OAJAA,GAAKhP,KAAO2B,EAAO+N,KAAK1P,KACxBgP,EAAK6C,OAASlQ,EAAO+N,KAAKmC,OAC1B7C,EAAKN,QAAU/M,EAAO+N,KAAKhB,QAC3BgG,EAAGC,OAAO3F,EAAMrN,EAAO4B,MAChByL,GAGX4F,SAAU,SAAU5F,GAChB,GAAI0F,GAAKlR,EAAG8Q,OAAOc,WACfvG,IASJ,OARAA,GAAKa,MACD1P,KAAMgP,EAAKhP,KACX6R,OAAQ7C,EAAK6C,OACbnD,QAASM,EAAKN,SAElBG,EAAKyF,OAAS,aACdzF,EAAKtL,QACLmR,EAAGW,OAAOrG,EAAMH,EAAKtL,MACdsL,GAGX8F,OAAQ,SAAU3F,EAAMoG,GACpB,GAAIV,GAAKlR,EAAG8Q,OAAOc,WACfE,EAASF,EAAW7I,MAAM,EAE9B+I,GAAOC,SACP,IAAIC,GAAUd,EAAGe,cAAczG,EAAMsG,EAC/BE,GACFd,EAAGM,iBAAiBhG,EAAMwG,EAASF,GAEnC1K,EAAOI,MAAM,+BAIrByK,cAAe,SAAUzG,EAAMoG,GAG3B,IAFA,GAAIV,GAAKlR,EAAG8Q,OAAOc,WACf3V,EAAI2V,EAAW7S,OACZ9C,KACH,GAAI,UAAY2V,GAAW3V,IAAM2V,EAAW3V,GAAG+Q,OAAQ,CACnD,GAAIkF,GAAYN,EAAW3V,GACvB8D,EAAOmR,EAAGK,cAAcW,EAG5B,OAFA1G,GAAKkD,SAASwD,EAAUlT,GAAIkT,EAAUnF,MAAOhN,GAC7C6R,EAAWnB,OAAOxU,EAAG,GACdiW,EAAUlT,GAGzB,MAAO,OAGXwS,iBAAkB,SAAUhG,EAAM0E,EAAU0B,GAMxC,IALA,GAAIV,GAAKlR,EAAG8Q,OAAOc,WACf3V,EAAI2V,EAAW7S,OACf0S,EAAY,KACZ1R,EAAO,KACPoS,EAAgB,EACblW,KAEH,GADAwV,EAAYG,EAAW3V,GACnBwV,EAAUvB,UAAYA,EAAU,CAChCnQ,EAAOmR,EAAGK,cAAcE,EACxB,IAAIlV,GAAI,KACJ6V,EAAiBX,EAAU/F,SACzB0G,KACF7V,EAAsB,QAAlB6V,EAA2BpS,EAAG0L,UAAUb,KAAO7K,EAAG0L,UAAUX,OAEpES,EAAKoD,SAASsB,EAAUuB,EAAUzS,GAAIyS,EAAU1E,MAAOhN,EAAM,KAAMxD,EAAGkV,EAAUxE,UAChF2E,EAAWnB,OAAOxU,EAAG,GACrBkW,GACA,IAAIE,GAAoBnB,EAAGM,iBAAiBhG,EAAMiG,EAAUzS,GAAI4S,EAC5DS,GAAoB,IAEpBpW,EAAI2V,EAAW7S,OACfoT,GAAiBE,GAI7B,MAAOF,IAGXZ,cAAe,SAAUE,GACrB,GAAI1R,KACJ,KAAK,GAAI6Q,KAAKa,GACD,MAALb,GAAkB,SAALA,GAAqB,YAALA,GAAwB,UAALA,GAAsB,aAALA,GAAyB,YAALA,IAGzF7Q,EAAK6Q,GAAKa,EAAUb,GAExB,OAAO7Q,IAGX8R,OAAQ,SAAUrG,EAAMoG,GACX5R,EAAG8Q,OAAOc,WAChBU,YAAY9G,EAAKlQ,KAAMsW,IAG9BU,YAAa,SAAUhG,EAAMsF,GACzB,GAAIV,GAAKlR,EAAG8Q,OAAOc,UACnB,IAAMtF,YAAgBtM,GAAGsM,KAAzB,CACA,GAAI5P,IACAsC,GAAIsN,EAAKtN,GACT+N,MAAOT,EAAKS,MACZE,SAAUX,EAAKW,SAWnB,IATMX,EAAKnG,SACPzJ,EAAEwT,SAAW5D,EAAKnG,OAAOnH,IAEzBsN,EAAKU,SACLtQ,EAAEsQ,QAAS,GAETV,EAAKnG,QAAUmG,EAAKnG,OAAO6G,SAC7BtQ,EAAEgP,UAAYY,EAAKZ,WAAa1L,EAAG0L,UAAUb,KAAO,OAAS,SAEhD,MAAbyB,EAAKvM,KAAc,CACnB,GAAI4R,GAAYrF,EAAKvM,IACrB,KAAK,GAAI6Q,KAAKe,GACVjV,EAAEkU,GAAKe,EAAUf,GAGzBgB,EAAW3S,KAAKvC,EAEhB,KAAK,GADDiU,GAAKrE,EAAKY,SAASnO,OACd9C,EAAI,EAAGA,EAAI0U,EAAI1U,IACpBiV,EAAGoB,YAAYhG,EAAKY,SAASjR,GAAI2V,MAK7CW,UACIvB,SACI,MACI,KA/rBD,SAgsBC,OA5rBC,mBA6rBD,QA/rBE,SAisBN,OAAU,WACV,KAAQ,wEAEZC,SAAU,SAAU9S,GAChB,GAAI+S,GAAKlR,EAAG8Q,OAAOyB,SACf/G,EAAO,GAAIxL,GAAGwL,IAClBA,GAAKhP,KAAO2B,EAAO+N,KAAK1P,KACxBgP,EAAK6C,OAASlQ,EAAO+N,KAAKmC,OAC1B7C,EAAKN,QAAU/M,EAAO+N,KAAKhB,OAC3B,IAAIsH,GAAMrU,EAAO4B,KACb0S,EAAUvB,EAAGwB,WAAWF,GACxBG,EAAWzB,EAAG0B,WAAWH,EAE7B,OADAvB,GAAG2B,WAAWrH,EAAM,KAAMmH,GACnBnH,GAGX4F,SAAU,SAAU5F,GAChB,GAAI0F,GAAKlR,EAAG8Q,OAAOyB,SACflH,IACJA,GAAKa,MACD1P,KAAMgP,EAAKhP,KACX6R,OAAQ7C,EAAK6C,OACbnD,QAASM,EAAKN,SAElBG,EAAKyF,OAAS,UACd,IAAIgC,KAKJ,OAJAA,GAAS7T,KAAK,yBACdiS,EAAG6B,UAAUvH,EAAKlQ,KAAMwX,GACxBA,EAAS7T,KAAK,UACdoM,EAAKtL,KAAO+S,EAASzU,KAAK,KACnBgN,GAGXqH,WAAY,SAAUF,GAClB,GAAIC,GAAU,IACd,IAAI9R,OAAOqS,UAAW,CAElBP,GADa,GAAIO,YACAC,gBAAgBT,EAAK,gBAEtCC,GAAU,GAAIS,eAAc,oBAC5BT,EAAQU,OAAQ,EAChBV,EAAQW,QAAQZ,EAEpB,OAAOC,IAGXG,WAAY,SAAUH,GAKlB,IAAK,GAJDlE,GAAQkE,EAAQhP,WAChB6I,EAAO,KAEPtP,EAAI,KACCf,EAAI,EAAGA,EAAIsS,EAAMxP,OAAQ9C,IAE9B,GADAe,EAAIuR,EAAMtS,GACQ,GAAde,EAAE0L,UAA8B,OAAb1L,EAAEqW,QAAkB,CACvC/G,EAAOtP,CACP,OAGR,GAAMsP,EAAM,CACR,GAAIgH,GAAKhH,EAAK7I,UACd6I,GAAO,IACP,KAAK,GAAIrQ,GAAI,EAAGA,EAAIqX,EAAGvU,OAAQ9C,IAE3B,GADAe,EAAIsW,EAAGrX,GACW,GAAde,EAAE0L,UAA8B,QAAb1L,EAAEqW,QAAmB,CACxC/G,EAAOtP,CACP,QAIZ,MAAOsP,IAGXuG,WAAY,SAAUrH,EAAM+H,EAAWC,GACnC,GAAItC,GAAKlR,EAAG8Q,OAAOyB,SACfkB,EAAUD,EAASE,aAAa,MAChCC,EAAaH,EAASE,aAAa,OAEvC,IAAkB,MAAdC,EAGA,IAAK,GAFDC,GAAiBJ,EAAS/P,WAC1BoQ,EAAc,KACT5X,EAAI,EAAGA,EAAI2X,EAAe7U,OAAQ9C,IAGvC,GAFA4X,EAAcD,EAAe3X,GAED,GAAxB4X,EAAYnL,UAAyC,gBAAxBmL,EAAYR,QAA2B,CACpEM,EAAaE,EAAYC,WACzB,OAIZ,GAAInC,GAAYT,EAAG6C,iBAAiBP,GAChCQ,IAAiB,YAAcrC,KAAoC,QAAtBA,EAAU1E,eACpD0E,GAAU1E,QAEjB,IAAIgH,GAAgBT,EAASE,aAAa,YACtCtB,EAAiB,IACf6B,KACF7B,EAAkC,QAAjB6B,EAA0BjU,EAAG0L,UAAUb,KAAO7K,EAAG0L,UAAUX,OAG1EwI,EACF/H,EAAKoD,SAAS2E,EAAWE,EAASE,EAAYhC,EAAW,KAAMS,EAAgB4B,GAE/ExI,EAAKkD,SAAS+E,EAASE,EAAYhC,EAIvC,KAAK,GAFDzE,GAAWsG,EAAS/P,WACpByQ,EAAQ,KACHjY,EAAI,EAAGA,EAAIiR,EAASnO,OAAQ9C,IACjCiY,EAAQhH,EAASjR,GACK,GAAlBiY,EAAMxL,UAAkC,QAAjBwL,EAAMb,SAC7BnC,EAAG2B,WAAWrH,EAAMiI,EAASS,IAKzCH,iBAAkB,SAAUP,GAIxB,IAAK,GAHDtG,GAAWsG,EAAS/P,WACpB0Q,EAAO,KACPC,KACKnY,EAAI,EAAGA,EAAIiR,EAASnO,OAAQ9C,IACjCkY,EAAOjH,EAASjR,GACK,GAAjBkY,EAAKzL,UAAkC,cAAjByL,EAAKd,UAC3Be,EAAUD,EAAKT,aAAa,SAAWS,EAAKT,aAAa,SAGjE,OAAOU,IAGXrB,UAAW,SAAUzG,EAAMwG,GACvB,GAAI5B,GAAKlR,EAAG8Q,OAAOyB,SACf8B,EAAM,IACJ/H,GAAKnG,QAAUmG,EAAKnG,OAAO6G,SAC7BqH,EAAM/H,EAAKZ,YAAc1L,EAAG0L,UAAUb,KAAO,OAAS,SAE1DiI,EAAS7T,KAAK,SACd6T,EAAS7T,KAAK,OAAUqN,EAAKtN,GAAK,KAC5BqV,GACFvB,EAAS7T,KAAK,aAAgBoV,EAAM,KAExCvB,EAAS7T,KAAK,SAAYqN,EAAKS,MAAQ,MAGvC+F,EAAS7T,KAAK,qCAA0CqN,EAAKW,SAAW,MAGxE,IAAI0E,GAAYrF,EAAKvM,IACrB,IAAiB,MAAb4R,EACA,IAAK,GAAIf,KAAKe,GACVmB,EAAS7T,KAAK,oBAAuB2R,EAAI,YAAgBe,EAAUf,GAAK,MAMhF,KAAK,GADD1D,GAAWZ,EAAKY,SACXjR,EAAI,EAAGA,EAAIiR,EAASnO,OAAQ9C,IACjCiV,EAAG6B,UAAU7F,EAASjR,GAAI6W,EAG9BA,GAAS7T,KAAK,cAO1Be,EAAGoL,MACC2D,QAAS,SAAUzC,GACf,QAASA,GAAQA,YAAgBtM,GAAGsM,MAExCgI,MACIC,KAAM,WACF,GAAIC,GAAM,IACV,IAAI7T,OAAO8T,eACPD,EAAM,GAAIC,oBAEV,KACID,EAAM,GAAItB,eAAc,qBAC1B,MAAOwB,IAEb,MAAOF,IAEXG,MAAO,SAAUC,GACb,MAAOpW,oBAAmBoW,IAE9BC,QAAS,SAAUD,EAAKE,EAAOC,EAAQC,EAAUC,GAC7C,GAAIC,GAAIlV,EAAGoL,KAAKkJ,KACZhX,EAAI,KACJ6X,IACJ,KAAK,GAAIvE,KAAKkE,GACVK,EAAUlW,KAAKiW,EAAEP,MAAM/D,GAAK,IAAMsE,EAAEP,MAAMG,EAAMlE,IAEhDuE,GAAUpW,OAAS,IACnBzB,EAAI6X,EAAU9W,KAAK,KAEvB,IAAImW,GAAMU,EAAEX,MACPC,KACLA,EAAIY,mBAAqB,WACrB,GAAsB,GAAlBZ,EAAIa,WACJ,GAAkB,KAAdb,EAAIc,QAA+B,GAAdd,EAAIc,QACzB,GAAwB,kBAAbN,GAAyB,CAChC,GAAIjV,GAAOC,EAAGoL,KAAKC,KAAKkK,YAAYf,EAAIgB,aAEpCR,GADQ,MAARjV,EACSA,EAEAyU,EAAIgB,mBAIQ,kBAAlBP,GACPA,EAAcT,GAEdpN,EAAOI,MAAM,sBAAuBgN,IAKpDO,EAASA,GAAU,MACnBP,EAAIiB,KAAKV,EAAQH,GAAK,GACtBJ,EAAIkB,iBAAiB,oBAAqB,KAC5B,QAAVX,GACAP,EAAIkB,iBAAiB,eAAgB,mDACrClB,EAAImB,KAAKrY,IAETkX,EAAImB,SAGZ5Y,IAAK,SAAU6X,EAAKI,GAChB,MAAOhV,GAAGoL,KAAKkJ,KAAKO,QAAQD,KAAS,MAAOI,IAEhDY,KAAM,SAAUhB,EAAKE,EAAOE,GACxB,MAAOhV,GAAGoL,KAAKkJ,KAAKO,QAAQD,EAAKE,EAAO,OAAQE,KAIxDa,KAEIC,UAAW,SAAU5N,EAAGwM,EAAG/N,GACjBuB,EAAE6N,iBACJ7N,EAAE6N,iBAAiBrB,EAAG/N,GAAG,GAEzBuB,EAAE8N,YAAY,KAAOtB,EAAG/N,KAKpCsP,MACIC,KAAM,SAAUC,EAAWC,GACvB,GAAIC,GAAS,GAAIC,WACjBD,GAAOE,OAAS,WACe,kBAAhBH,IACPA,EAAYva,KAAK2a,OAAQL,EAAU3Z,OAG3C6Z,EAAOI,WAAWN,IAGtBO,KAAM,SAAUP,EAAW1W,EAAMjD,GAC7B,GAAIma,EACJ,IAAuB,kBAAZzP,GAAG0P,KACVD,EAAO,GAAIC,OAAMT,IAAc1W,KAAMA,QAClC,CACH,GAAIoX,GAAc3P,EAAG2P,aAAe3P,EAAG4P,gBAAkB5P,EAAG6P,mBAAqB7P,EAAG8P,cAChFC,EAAK,GAAIJ,EACbI,GAAGC,OAAOf,GACVQ,EAAOM,EAAGE,QAAQ1X,GAEtB,GAAI0E,UAAUiT,WACVjT,UAAUiT,WAAWT,EAAMna,OACxB,CACH,GAAI6a,GAAMnQ,EAAGmQ,KAAOnQ,EAAGoQ,UACnBC,EAAUF,EAAIG,gBAAgBb,GAC9Bc,EAAS1P,EAAG,IAChB,IAAI,YAAc0P,GAAQ,CACtBA,EAAO9O,MAAM+O,WAAa,SAC1BD,EAAOE,KAAOJ,EACdE,EAAOG,SAAWpb,EAClBoL,EAAGiQ,KAAK9V,YAAY0V,EACpB,IAAIK,GAAMlQ,EAAGmQ,YAAY,cACzBD,GAAIE,UAAU,SAAS,GAAM,GAC7BP,EAAOQ,cAAcH,GACrBlQ,EAAGiQ,KAAKrV,YAAYiV,OAEpBS,UAASP,KAAOJ,KAMhClM,MACI8M,YAAa,SAAU9M,GACnB,GAAM5M,KACF,IAEI,MADeA,MAAKC,UAAU2M,GAEhC,MAAOqJ,GAGL,MAFAtN,GAAOK,KAAKiN,GACZtN,EAAOK,KAAK,6BACL,OAInB8N,YAAa,SAAU6C,GACnB,GAAM3Z,KACF,IAEI,MADWA,MAAK4Z,MAAMD,GAExB,MAAO1D,GAGL,MAFAtN,GAAOK,KAAKiN,GACZtN,EAAOK,KAAK,yBACL,OAInB6D,MAAO,SAAUgN,EAAGpD,GAChB,IAAK,GAAIxY,KAAKwY,GACNxY,IAAK4b,GACe,WAAhB,EAAOA,EAAE5b,KAC6C,mBAAtDC,OAAOS,UAAUwB,SAASxC,KAAKkc,EAAE5b,IAAI4H,eACpCgU,EAAE5b,GAAGqC,OAGNuZ,EAAE5b,GAAKwY,EAAExY,GAFTsD,EAAGoL,KAAKC,KAAKC,MAAMgN,EAAE5b,GAAIwY,EAAExY,IAK/B4b,EAAE5b,GAAKwY,EAAExY,EAGjB,OAAO4b,KAIfC,MACIC,MAAO,WACH,QAAQ,GAAIC,OAAOC,UAAU9Z,SAAS,IAAM+Z,KAAKC,SAASha,SAAS,IAAIia,OAAO,IAAIA,OAAO,EAAG,MAIpGC,MACIC,SAAU,SAAUxb,GAChB,OAAKA,GACiC,GAA/BA,EAAEyb,QAAQ,MAAO,IAAIja,UAKxCiB,EAAG5C,WACC0C,KAAM,WACF,IAAIjE,KAAK0P,OAAT,CACA1P,KAAK0P,QAAS,CAEd,IAAIJ,GAAOtP,KAAK8D,QAEZsZ,GACA7P,KAAM+B,EAAK/B,KACXS,OAAQsB,EAAKvB,OAAOC,OACpBC,OAAQqB,EAAKvB,OAAOE,OACpBC,OAAQoB,EAAKvB,OAAOG,QAEpBmP,GACAjQ,UAAWkC,EAAKlC,UAChBI,aAAc8B,EAAK9B,aACnBE,OAAQ4B,EAAK7B,KAAKC,OAClBC,QAAS2B,EAAK7B,KAAKE,QACnBC,QAAS0B,EAAK7B,KAAKG,QACnBC,WAAYyB,EAAK7B,KAAKI,WACtBC,WAAYwB,EAAK7B,KAAKK,WAG1B9N,MAAKkE,KAAO,GAAIC,GAAGmZ,cAActd,MACjCA,KAAK+N,OAAS,GAAI5J,GAAGoZ,gBAAgBvd,KAAMod,GAC3Cpd,KAAKyN,KAAO,GAAItJ,GAAGqZ,cAAcxd,KAAMqd,GACvCrd,KAAKuO,SAAW,GAAIpK,GAAGsZ,kBAAkBzd,KAAMsP,EAAKf,UAEpDvO,KAAKkE,KAAKD,OACVjE,KAAK+N,OAAO9J,OACZjE,KAAKyN,KAAKxJ,OACVjE,KAAKuO,SAAStK,OAEdjE,KAAK0d,cAELvZ,EAAGwZ,aAAa3d,QAGpB4d,YAAa,WACT5d,KAAK8D,QAAQuJ,UAAW,GAG5BwQ,aAAc,WACV7d,KAAK8D,QAAQuJ,UAAW,GAK5ByQ,oBAAqB,SAAUC,GAC3B/d,KAAK8D,QAAQqK,qBAAqB,UAAY4P,EAAe,YAAa,GAK9EC,qBAAsB,SAAUD,GAC5B/d,KAAK8D,QAAQqK,qBAAqB,UAAY4P,EAAe,YAAa,GAG9EE,aAAc,WACV,MAAOje,MAAK8D,QAAQuJ,UAGxB6Q,UAAW,SAAU5Q,GACjB,GAAI6Q,GAAYne,KAAK8D,QAAQwJ,KAC7BtN,MAAK8D,QAAQwJ,MAAWA,GAAiB,KACrC6Q,GAAane,KAAK8D,QAAQwJ,QAC1BtN,KAAKyN,KAAK2Q,cACVpe,KAAKyN,KAAK4Q,uBAGlBX,YAAa,WACT1d,KAAKyN,KAAKwM,UAAUja,KAAM,YAAaA,KAAKse,kBAC5Cte,KAAKyN,KAAKwM,UAAUja,KAAM,QAASA,KAAKue,cACxCve,KAAKyN,KAAKwM,UAAUja,KAAM,WAAYA,KAAKwe,kBAG/CF,iBAAkB,SAAUzF,GACxB,GAAK7Y,KAAK8D,QAAQqK,qBAAb,wBAAL,CAGA,GAAIsQ,GAAU5F,EAAE6F,QAAUC,MAAMC,WAC5BhM,EAAS5S,KAAKyN,KAAKoR,kBAAkBJ,EACnC7L,GACmC,UAAjC6L,EAAQjH,QAAQ/O,eAChBzI,KAAK8e,YAAYlM,GAGrB5S,KAAK+e,iBAIbR,aAAc,SAAU1F,GACpB,GAAK7Y,KAAK8D,QAAQqK,qBAAb,oBAAL,CAGA,GAAIsQ,GAAU5F,EAAE6F,QAAUC,MAAMC,UAEhC,IADiB5e,KAAKyN,KAAKuR,YAAYP,GACvB,CACZ,GAAI7L,GAAS5S,KAAKyN,KAAKoR,kBAAkBJ,EACnC7L,IACF5S,KAAKif,YAAYrM,MAK7B4L,gBAAiB,SAAU3F,GACvB,GAAK7Y,KAAK8D,QAAQqK,qBAAb,wBAGDnO,KAAKie,eAAgB,CACrB,GAAIQ,GAAU5F,EAAE6F,QAAUC,MAAMC,WAC5BhM,EAAS5S,KAAKyN,KAAKoR,kBAAkBJ,EACnC7L,IACF5S,KAAKkf,WAAWtM,KAK5BsM,WAAY,SAAUzO,GAClB,IAAKtM,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAKkf,WAAWpL,IAHvBvI,EAAOI,MAAM,eAAiB8E,EAAO,wBAC9B,GAKf,IAAIzQ,KAAKie,eAIL,WADA1S,GAAOI,MAAM,uCAFb3L,MAAKyN,KAAK0R,gBAAgB1O,IAOlC2O,SAAU,WACNpf,KAAKyN,KAAK4R,iBAGdJ,YAAa,SAAUxO,GACnB,IAAKtM,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAKif,YAAYnL,OAHxBvI,GAAOI,MAAM,eAAiB8E,EAAO,uBAMzCA,EAAKU,SACTnR,KAAKyN,KAAK6R,cAAc7O,GACxBzQ,KAAK+N,OAAOkR,YAAYxO,GACxBzQ,KAAKyN,KAAK8R,WACVvf,KAAKyN,KAAK+R,iBAAiB/O,KAG/BgP,YAAa,SAAUhP,GACnB,IAAKtM,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAKyf,YAAY3L,OAHxBvI,GAAOI,MAAM,eAAiB8E,EAAO,uBAMzCA,EAAKU,SACTnR,KAAKyN,KAAK6R,cAAc7O,GACxBzQ,KAAK+N,OAAO0R,YAAYhP,GACxBzQ,KAAKyN,KAAK8R,WACVvf,KAAKyN,KAAK+R,iBAAiB/O,KAG/BiP,cAAe,SAAUjP,GACrB,IAAKtM,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAK0f,cAAc5L,OAH1BvI,GAAOI,MAAM,eAAiB8E,EAAO,uBAMzCA,EAAKU,SACTnR,KAAKyN,KAAK6R,cAAc7O,GACxBzQ,KAAK+N,OAAO2R,cAAcjP,GAC1BzQ,KAAKyN,KAAK8R,WACVvf,KAAKyN,KAAK+R,iBAAiB/O,KAG/BkP,WAAY,WACR3f,KAAK+N,OAAO4R,aACZ3f,KAAKyN,KAAK8R,YAGdK,aAAc,WACV5f,KAAK+N,OAAO6R,eACZ5f,KAAKyN,KAAK8R,YAGdM,gBAAiB,SAAUC,GACvB9f,KAAK+N,OAAO8R,gBAAgBC,GAC5B9f,KAAKyN,KAAK8R,YAGdQ,OAAQ,WACJ/f,KAAKyN,KAAKuS,QACVhgB,KAAK+N,OAAOiS,QACZhgB,KAAKkE,KAAK8b,SAGdC,MAAO,SAAUtQ,GACb,GAAInP,GAAImP,GAAQxL,EAAG8Q,OAAOc,WAAWZ,OAGrC,IADAnV,KAAK2P,KAAO3P,KAAKkE,KAAKgc,KAAK1f,IACtBR,KAAK2P,KAEN,WADApE,GAAOI,MAAM,kBAGbJ,GAAOG,MAAM,gBAGjB1L,KAAKyN,KAAKyS,OACV3U,EAAOG,MAAM,gBAEb1L,KAAK+N,OAAOA,SACZxC,EAAOG,MAAM,oBAEb1L,KAAKyN,KAAKuC,MAAK,GACfzE,EAAOG,MAAM,gBAEb1L,KAAKmgB,oBAAoBhc,EAAG4L,WAAWC,MAAQ9L,MAAOyL,MAG1DK,KAAM,SAAUL,GACZ3P,KAAK+f,SACL/f,KAAKigB,MAAMtQ,IAGfyQ,SAAU,WACN,OACIzf,KAAMX,KAAK2P,KAAKhP,KAChB6R,OAAQxS,KAAK2P,KAAK6C,OAClBnD,QAASrP,KAAK2P,KAAKN,UAI3BkG,SAAU,SAAU8K,GAChB,GAAIhL,GAAKgL,GAAe,WACxB,OAAOrgB,MAAKkE,KAAKqR,SAASF,IAG9BiL,SAAU,WACN,MAAOtgB,MAAK2P,KAAKlQ,MAGrBkT,SAAU,SAAUC,GAChB,MAAO5S,MAAK2P,KAAKgD,SAASC,IAG9BG,SAAU,SAAUC,EAAaJ,EAAQ1B,EAAOhN,GAC5C,GAAIlE,KAAKie,eAAgB,CACrB,GAAIxN,GAAOzQ,KAAK2P,KAAKoD,SAASC,EAAaJ,EAAQ1B,EAAOhN,EAS1D,OARMuM,KACFzQ,KAAKyN,KAAKsF,SAAStC,GACnBzQ,KAAK+N,OAAOA,SACZ/N,KAAKyN,KAAKuC,MAAK,GACfhQ,KAAKyN,KAAK8S,wBAAwB9P,GAClCzQ,KAAKyf,YAAYzM,GACjBhT,KAAKmgB,oBAAoBhc,EAAG4L,WAAWG,MAAQ+L,IAAK,WAAY/X,MAAO8O,EAAY7P,GAAIyP,EAAQ1B,EAAOhN,GAAOuM,KAAMmC,KAEhHnC,EAGP,MADAlF,GAAOI,MAAM,uCACN,MAIf8H,mBAAoB,SAAUC,EAAad,EAAQ1B,EAAOhN,GACtD,GAAIlE,KAAKie,eAAgB,CACrB,GAAI7J,GAAWjQ,EAAGoL,KAAK2D,QAAQQ,GAAeA,EAAYvQ,GAAKuQ,EAC3DjD,EAAOzQ,KAAK2P,KAAK8D,mBAAmBC,EAAad,EAAQ1B,EAAOhN,EAOpE,OANMuM,KACFzQ,KAAKyN,KAAKsF,SAAStC,GACnBzQ,KAAK+N,OAAOA,SACZ/N,KAAKyN,KAAKuC,MAAK,GACfhQ,KAAKmgB,oBAAoBhc,EAAG4L,WAAWG,MAAQ+L,IAAK,qBAAsB/X,MAAOkQ,EAAUxB,EAAQ1B,EAAOhN,GAAOuM,KAAMmC,KAEpHnC,EAGP,MADAlF,GAAOI,MAAM,uCACN,MAIfoI,kBAAmB,SAAUC,EAAYpB,EAAQ1B,EAAOhN,GACpD,GAAIlE,KAAKie,eAAgB,CACrB,GAAIuC,GAAUrc,EAAGoL,KAAK2D,QAAQc,GAAcA,EAAW7Q,GAAK6Q,EACxDvD,EAAOzQ,KAAK2P,KAAKoE,kBAAkBC,EAAYpB,EAAQ1B,EAAOhN,EAOlE,OANMuM,KACFzQ,KAAKyN,KAAKsF,SAAStC,GACnBzQ,KAAK+N,OAAOA,SACZ/N,KAAKyN,KAAKuC,MAAK,GACfhQ,KAAKmgB,oBAAoBhc,EAAG4L,WAAWG,MAAQ+L,IAAK,oBAAqB/X,MAAOsc,EAAS5N,EAAQ1B,EAAOhN,GAAOuM,KAAMmC,KAElHnC,EAGP,MADAlF,GAAOI,MAAM,uCACN,MAIfkJ,YAAa,SAAUpE,GACnB,IAAKtM,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAK6U,YAAYf,IAHxBvI,EAAOI,MAAM,eAAiB8E,EAAO,wBAC9B,GAKf,GAAIzQ,KAAKie,eAAgB,CACrB,GAAIxN,EAAKU,OAEL,MADA5F,GAAOI,MAAM,mCACN,CAEX,IAAIiH,GAASnC,EAAKtN,GACdkR,EAAW5D,EAAKnG,OAAOnH,GACvB6P,EAAchT,KAAK2S,SAAS0B,EAQhC,OAPArU,MAAKyN,KAAK6R,cAActM,GACxBhT,KAAKyN,KAAKoH,YAAYpE,GACtBzQ,KAAK2P,KAAKkF,YAAYpE,GACtBzQ,KAAK+N,OAAOA,SACZ/N,KAAKyN,KAAKuC,MAAK,GACfhQ,KAAKyN,KAAK+R,iBAAiBxM,GAC3BhT,KAAKmgB,oBAAoBhc,EAAG4L,WAAWG,MAAQ+L,IAAK,cAAe/X,MAAO0O,GAASnC,KAAM4D,KAClF,EAGP,MADA9I,GAAOI,MAAM,wCACN,GAIf8U,YAAa,SAAU7N,EAAQ1B,GAC3B,IAAIlR,KAAKie,eAoBL,WADA1S,GAAOI,MAAM,sCAlBb,IAAIxH,EAAGoL,KAAK0N,KAAKC,SAAShM,GAEtB,WADA3F,GAAOK,KAAK,+BAGhB,IAAI6E,GAAOzQ,KAAK2S,SAASC,EACzB,IAAMnC,EAAM,CACR,GAAIA,EAAKS,QAAUA,EAGf,MAFA3F,GAAOM,KAAK,uBACZ7L,MAAKyN,KAAKgT,YAAYhQ,EAG1BA,GAAKS,MAAQA,EACblR,KAAKyN,KAAKgT,YAAYhQ,GACtBzQ,KAAK+N,OAAOA,SACZ/N,KAAKyN,KAAKuC,MAAK,GACfhQ,KAAKmgB,oBAAoBhc,EAAG4L,WAAWG,MAAQ+L,IAAK,cAAe/X,MAAO0O,EAAQ1B,GAAQT,KAAMmC,MAQ5GuB,UAAW,SAAUvB,EAAQwB,EAAUC,EAAUxE,GAC7C,IAAI7P,KAAKie,eAUL,WADA1S,GAAOI,MAAM,sCARb,IAAI8E,GAAOzQ,KAAK2P,KAAKwE,UAAUvB,EAAQwB,EAAUC,EAAUxE,EACrDY,KACFzQ,KAAKyN,KAAKgT,YAAYhQ,GACtBzQ,KAAK+N,OAAOA,SACZ/N,KAAKyN,KAAKuC,MAAK,GACfhQ,KAAKmgB,oBAAoBhc,EAAG4L,WAAWG,MAAQ+L,IAAK,YAAa/X,MAAO0O,EAAQwB,EAAUC,EAAUxE,GAAYY,KAAMmC,MAQlIkM,YAAa,SAAUrO,GACnB,IAAKtM,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAK8e,YAAYhL,OAHxBvI,GAAOI,MAAM,eAAiB8E,EAAO,uBAMxCzQ,KAAK+N,OAAO2S,WAAWjQ,KAG5BzQ,KAAK2P,KAAK8C,SAAWhC,EACrBzQ,KAAKyN,KAAKqR,YAAYrO,KAG1BkQ,kBAAmB,WACf,MAAM3gB,MAAK2P,KACA3P,KAAK2P,KAAK8C,SAEV,MAIfsM,aAAc,WACJ/e,KAAK2P,OACP3P,KAAK2P,KAAK8C,SAAW,KACrBzS,KAAKyN,KAAKsR,iBAIlB6B,gBAAiB,SAAUnQ,GACvB,MAAOzQ,MAAK+N,OAAO2S,WAAWjQ,IAGlCoQ,iBAAkB,SAAUpQ,GACxB,IAAKtM,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAK6gB,iBAAiB/M,OAH7BvI,GAAOI,MAAM,eAAiB8E,EAAO,uBAM7C,GAAIA,EAAKU,OAAU,MAAO,KAC1B,IAAIhQ,GAAI,IACR,IAAIsP,EAAKnG,OAAO6G,OAIZ,IAAK,GAHD1Q,GAAIgQ,EAAKnG,OAAO+G,SAChByP,EAAO,KACPC,EAAK,KACA3gB,EAAI,EAAGA,EAAIK,EAAEyC,OAAQ9C,IAC1B2gB,EAAKtgB,EAAEL,GACHqQ,EAAKZ,YAAckR,EAAGlR,YAClBY,EAAKtN,KAAO4d,EAAG5d,KACfhC,EAAI2f,GAERA,EAAOC,OAIf5f,GAAInB,KAAK2P,KAAKkE,gBAAgBpD,EAElC,OAAOtP,IAGX6f,gBAAiB,SAAUvQ,GACvB,IAAKtM,EAAGoL,KAAK2D,QAAQzC,GAAO,CACxB,GAAIqD,GAAW9T,KAAK2S,SAASlC,EAC7B,OAAKqD,GAIM9T,KAAKghB,gBAAgBlN,OAH5BvI,GAAOI,MAAM,eAAiB8E,EAAO,uBAM7C,GAAIA,EAAKU,OAAU,MAAO,KAC1B,IAAIhQ,GAAI,IACR,IAAIsP,EAAKnG,OAAO6G,QAIZ,IAAK,GAHD1Q,GAAIgQ,EAAKnG,OAAO+G,SAChB4P,GAAU,EACVF,EAAK,KACA3gB,EAAI,EAAGA,EAAIK,EAAEyC,OAAQ9C,IAE1B,GADA2gB,EAAKtgB,EAAEL,GACHqQ,EAAKZ,YAAckR,EAAGlR,UAAW,CACjC,GAAIoR,EAAS,CACT9f,EAAI4f,CACJ,OAEAtQ,EAAKtN,KAAO4d,EAAG5d,KACf8d,GAAU,QAKtB9f,GAAInB,KAAK2P,KAAKuE,eAAezD,EAEjC,OAAOtP,IAGX+f,eAAgB,SAAUtO,EAAQuO,EAASC,GACvC,IAAIphB,KAAKie,eAaL,MADA1S,GAAOI,MAAM,uCACN,IAZP,IAAI8E,GAAOzQ,KAAK2P,KAAKgD,SAASC,EACxBnC,KACI0Q,IACF1Q,EAAKvM,KAAK,oBAAsBid,GAE9BC,IACF3Q,EAAKvM,KAAK,oBAAsBkd,GAEpCphB,KAAKyN,KAAK8S,wBAAwB9P,KAQ9C4Q,oBAAqB,SAAUzO,EAAQ0O,EAAMC,EAAQzU,GACjD,IAAI9M,KAAKie,eAmBL,MADA1S,GAAOI,MAAM,uCACN,IAlBP,IAAI8E,GAAOzQ,KAAK2P,KAAKgD,SAASC,EACxBnC,KACI6Q,IACF7Q,EAAKvM,KAAK,aAAeod,GAEvBC,IACF9Q,EAAKvM,KAAK,eAAiBqd,GAEzBzU,IACF2D,EAAKvM,KAAK,cAAgB4I,GAE9B9M,KAAKyN,KAAK8S,wBAAwB9P,GAClCzQ,KAAKyN,KAAKgT,YAAYhQ,GACtBzQ,KAAK+N,OAAOA,SACZ/N,KAAKyN,KAAKuC,MAAK,KAQ3BwR,0BAA2B,SAAU5O,EAAQ6O,EAAOlP,EAAOxO,EAAQ2d,GAC/D,IAAI1hB,KAAKie,eAsBL,MADA1S,GAAOI,MAAM,uCACN,IArBP,IAAI8E,GAAOzQ,KAAK2P,KAAKgD,SAASC,EACxBnC,KACIgR,IACFhR,EAAKvM,KAAK,oBAAsBud,GAE9BlP,IACF9B,EAAKvM,KAAL,MAAqBqO,GAEnBxO,IACF0M,EAAKvM,KAAL,OAAsBH,GAEpB2d,IACFjR,EAAKvM,KAAK,uBAAyBwd,GAEvC1hB,KAAKyN,KAAK8S,wBAAwB9P,GAClCzQ,KAAKyN,KAAKgT,YAAYhQ,GACtBzQ,KAAK+N,OAAOA,SACZ/N,KAAKyN,KAAKuC,MAAK,KAQ3B2R,6BAA8B,SAAU/O,EAAQ8O,GAC5C,IAAI1hB,KAAKie,eAeL,MADA1S,GAAOI,MAAM,uCACN,IAdP,IAAI8E,GAAOzQ,KAAK2P,KAAKgD,SAASC,EAC9B,IAAMnC,EAAM,CACR,IAAKA,EAAKvM,KAAK,oBAEX,MADAqH,GAAOI,MAAM,sEACN,IAEX8E,GAAKvM,KAAK,uBAAyBwd,EACnC1hB,KAAKyN,KAAK8S,wBAAwB9P,GAClCzQ,KAAKyN,KAAKgT,YAAYhQ,GACtBzQ,KAAK+N,OAAOA,SACZ/N,KAAKyN,KAAKuC,MAAK,KAQ3BC,OAAQ,WACJjQ,KAAKyN,KAAKwC,UAId2R,mBAAoB,SAAUzI,GACF,kBAAbA,IACPnZ,KAAK4P,cAAcxM,KAAK+V,IAIhCgH,oBAAqB,SAAUvc,EAAMM,GACjC,GAAIwB,GAAI1F,IACRqL,GAAGwW,WAAW,WACVnc,EAAEoc,qBAAqBle,EAAMM,IAC9B,IAGP4d,qBAAsB,SAAUle,EAAMM,GAElC,IAAK,GADD7D,GAAIL,KAAK4P,cAAc1M,OAClB9C,EAAI,EAAGA,EAAIC,EAAGD,IACnBJ,KAAK4P,cAAcxP,GAAGwD,EAAMM,KAQxCC,EAAGmZ,cAAgB,SAAUnZ,GACzBnE,KAAKmE,GAAKA,GAGdA,EAAGmZ,cAAc/b,WACb0C,KAAM,WACFsH,EAAOG,MAAM,cAGjBsU,MAAO,WACHzU,EAAOG,MAAM,eAGjBwU,KAAM,SAAU6B,GACZ,GAAI1M,GAAK,KACL1F,EAAO,IAoBX,OAjBQ0F,GAFiB,gBAArB,KAAO0M,EAAP,cAAOA,IACDA,EAAU9M,OACP8M,EAAU9M,OAEV,YAGJ,WAGC,cAANI,EACA1F,EAAOxL,EAAG8Q,OAAOc,WAAWX,SAAS2M,GACxB,aAAN1M,EACP1F,EAAOxL,EAAG8Q,OAAOC,UAAUE,SAAS2M,GACvB,YAAN1M,EACP1F,EAAOxL,EAAG8Q,OAAOyB,SAAStB,SAAS2M,GAEnCxW,EAAOK,KAAK,sBAET+D,GAGX4F,SAAU,SAAU8K,GAChB,GAAInc,GAAO,IAUX,OATmB,cAAfmc,EACAnc,EAAOC,EAAG8Q,OAAOc,WAAWR,SAASvV,KAAKmE,GAAGwL,MACvB,aAAf0Q,EACPnc,EAAOC,EAAG8Q,OAAOC,UAAUK,SAASvV,KAAKmE,GAAGwL,MACtB,YAAf0Q,EACPnc,EAAOC,EAAG8Q,OAAOyB,SAASnB,SAASvV,KAAKmE,GAAGwL,MAE3CpE,EAAOI,MAAM,eAAiB0U,EAAc,WAEzCnc,IAMfC,EAAGoZ,gBAAkB,SAAUpZ,EAAIL,GAC/B9D,KAAKsP,KAAOxL,EACZ9D,KAAKmE,GAAKA,EACVnE,KAAKgiB,OAA4B,QAAlBhiB,KAAKsP,KAAK/B,KACzBvN,KAAKiiB,OAAS,KAEdjiB,KAAKkiB,aAAc,GAGvB/d,EAAGoZ,gBAAgBhc,WACf0C,KAAM,WACFsH,EAAOG,MAAM,gBAEjBsU,MAAO,WACHzU,EAAOG,MAAM,gBACb1L,KAAKiiB,QAAW9gB,EAAG,EAAGO,EAAG,EAAG4Q,EAAG,EAAGuG,EAAG,IAEzC9K,OAAQ,WACJxC,EAAOG,MAAM,iBACb1L,KAAKmiB,mBACLniB,KAAKoiB,iBAGTD,iBAAkB,WACdniB,KAAKqiB,0BAGTA,uBAAwB,WACpB,GAAI5R,GAAOzQ,KAAKmE,GAAGwL,KAAKlQ,KAEpB6iB,EAAc,IACd,WAAY7R,GAAKa,MACjBgR,EAAc7R,EAAKa,MAAMvD,QAEzBuU,KACA7R,EAAKa,MAAMvD,OAASuU,EAExB,IAAIjR,GAAWZ,EAAKY,SAChBkR,EAAiBlR,EAASnO,MAG9B,IAFAof,EAAYzS,UAAY1L,EAAG0L,UAAUC,OACrCwS,EAAYE,WAAa,EACrBxiB,KAAKgiB,OAEL,IADA,GAAI5hB,GAAImiB,EACDniB,KACHJ,KAAKyiB,uBAAuBpR,EAASjR,GAAI+D,EAAG0L,UAAUX,MAAO9O,OAKjE,KAFA,GAAIA,GAAImiB,EACJG,EAAU,KACPtiB,KACHsiB,EAAUrR,EAASjR,GACfsiB,EAAQ7S,WAAa1L,EAAG0L,UAAUb,KAClChP,KAAKyiB,uBAAuBC,EAASve,EAAG0L,UAAUb,KAAM5O,GAExDJ,KAAKyiB,uBAAuBC,EAASve,EAAG0L,UAAUX,MAAO9O,IAiBzEqiB,uBAAwB,SAAUhS,EAAMZ,EAAW2S,GAC/C,GAAIF,GAAc,IACd,WAAY7R,GAAKa,MACjBgR,EAAc7R,EAAKa,MAAMvD,QAEzBuU,KACA7R,EAAKa,MAAMvD,OAASuU,EAExB,IAAIjR,GAAWZ,EAAKY,SAChBkR,EAAiBlR,EAASnO,MAE9Bof,GAAYzS,UAAYA,EACxByS,EAAYE,WAAaA,CAEzB,KADA,GAAIpiB,GAAImiB,EACDniB,KACHJ,KAAKyiB,uBAAuBpR,EAASjR,GAAIyP,EAAWzP,IAI5DgiB,cAAe,WACX,GAAI3R,GAAOzQ,KAAKmE,GAAGwL,KAAKlQ,KACpB6iB,EAAc7R,EAAKa,MAAMvD,MAC7BuU,GAAYK,SAAW,EACvBL,EAAYM,SAAW,EACvBN,EAAYO,aAAe,CAM3B,KALA,GAAIxR,GAAWZ,EAAKY,SAChBjR,EAAIiR,EAASnO,OACb4f,KACAC,KACAL,EAAU,KACPtiB,KACHsiB,EAAUrR,EAASjR,GACfsiB,EAAQpR,MAAMvD,OAAO8B,WAAa1L,EAAG0L,UAAUX,MAC/C6T,EAAYC,QAAQN,GAEpBI,EAAWE,QAAQN,EAG3BJ,GAAYQ,WAAaA,EACzBR,EAAYS,YAAcA,EAC1BT,EAAYW,kBAAoBjjB,KAAKkjB,wBAAwBJ,GAC7DR,EAAYa,mBAAqBnjB,KAAKkjB,wBAAwBH,GAC9D/iB,KAAKiiB,OAAOpJ,EAAIpI,EAAKa,MAAM7D,KAAK8E,MAAQ,EACxCvS,KAAKiiB,OAAO3P,EAAI,EAAItS,KAAKiiB,OAAOpJ,EAEhC7Y,KAAKiiB,OAAO9gB,EAAI,EAChBnB,KAAKiiB,OAAOvgB,EAAIob,KAAKsG,IAAId,EAAYW,kBAAmBX,EAAYa,qBAIxED,wBAAyB,SAAUxQ,GAS/B,IARA,GAAI2Q,GAAe,EACfC,EAAc5Q,EAAMxP,OACpB9C,EAAIkjB,EACJ7S,EAAO,KACP8S,EAAoB,EACpBjB,EAAc,KACdkB,EAAS,EACTC,EAAK,KACFrjB,KACHqQ,EAAOiC,EAAMtS,GACbkiB,EAAc7R,EAAKa,MAAMvD,OACf,MAAN0V,IACAA,EAAKhT,EAAKnG,OAAOgH,OAGrBiS,EAAoBvjB,KAAKkjB,wBAAwBzS,EAAKY,UACjDZ,EAAKW,WACNmS,EAAoB,EACpBvjB,KAAK0jB,YAAYjT,EAAKY,UAAU,IAEpCkS,EAAoBzG,KAAKsG,IAAI3S,EAAKa,MAAM7D,KAAK1J,OAAQwf,GAErDjB,EAAYO,aAAeU,EAC3BjB,EAAYM,SAAWY,EAASD,EAAoB,EACpDjB,EAAYK,SAAW3iB,KAAKsP,KAAKtB,OAASsU,EAAYzS,UAAY4T,EAAGhW,KAAK8E,OAASkR,EAAG1V,OAAO8B,UAAYyS,EAAYzS,WAAa,EAC7HY,EAAKnG,OAAO6G,SACbmR,EAAYK,UAAY3iB,KAAKsP,KAAKpB,OAASoU,EAAYzS,WAG3D2T,EAASA,EAASD,EAAoBvjB,KAAKsP,KAAKrB,OAChDoV,GAAgBE,CAEhBD,GAAc,IACdD,GAAgBrjB,KAAKsP,KAAKrB,QAAUqV,EAAc,IAEtDljB,EAAIkjB,CAEJ,KADA,GAAIK,GAAgBN,EAAe,EAC5BjjB,KACHqQ,EAAOiC,EAAMtS,GACbqQ,EAAKa,MAAMvD,OAAO6U,UAAYe,CAElC,OAAON,IAIXO,+BAAgC,SAAUlR,GAStC,IARA,GAAI2Q,GAAe,EACfC,EAAc5Q,EAAMxP,OACpB9C,EAAIkjB,EACJ7S,EAAO,KACP8S,EAAoB,EACpBjB,EAAc,KACdkB,EAAS,EACTC,EAAK,KACFrjB,KACHqQ,EAAOiC,EAAMtS,GACbkiB,EAAc7R,EAAKa,MAAMvD,OACf,MAAN0V,IACAA,EAAKhT,EAAKnG,OAAOgH,OAGrBiS,EAAoBvjB,KAAK4jB,+BAA+BnT,EAAKY,UACxDZ,EAAKW,WACNmS,EAAoB,GAExBA,EAAoBzG,KAAKsG,IAAI3S,EAAKa,MAAM7D,KAAK1J,OAAQwf,GAErDjB,EAAYO,aAAeU,EAC3BjB,EAAYM,SAAWY,EAASD,EAAoB,EACpDC,EAASA,EAASD,EAAoBvjB,KAAKsP,KAAKrB,OAChDoV,GAAgBE,CAEhBD,GAAc,IACdD,GAAgBrjB,KAAKsP,KAAKrB,QAAUqV,EAAc,IAEtDljB,EAAIkjB,CAEJ,KADA,GAAIK,GAAgBN,EAAe,EAC5BjjB,KACHqQ,EAAOiC,EAAMtS,GACbqQ,EAAKa,MAAMvD,OAAO6U,UAAYe,CAIlC,OAAON,IAGXQ,gBAAiB,SAAUpT,GACvB,GAAI6R,GAAc7R,EAAKa,MAAMvD,OACzB+V,EAAe,IAOnB,IANK,YAAcxB,IAAgBtiB,KAAKkiB,YACpC4B,EAAexB,EAAYyB,UAE3BD,GAAiB7R,GAAI,EAAGE,GAAI,GAC5BmQ,EAAYyB,SAAWD,IAEJ,GAAnBA,EAAa7R,IAA8B,GAAnB6R,EAAa3R,EAAS,CAC9C,GAAIF,GAAIqQ,EAAYK,SAChBxQ,EAAImQ,EAAYM,QACpB,KAAKnS,EAAKU,OAAQ,CACd,GAAI6S,GAAWhkB,KAAK6jB,gBAAgBpT,EAAKnG,OACzC2H,IAAK+R,EAAS/R,EACdE,GAAK6R,EAAS7R,EAElB2R,EAAa7R,EAAIA,EACjB6R,EAAa3R,EAAIA,EAErB,MAAO2R,IAGXG,eAAgB,SAAUxT,GACtB,GAAIyT,GAAYzT,EAAKa,MAAM7D,KACvBuW,EAAWhkB,KAAK6jB,gBAAgBpT,GAEhChP,IAIJ,OAHAA,GAAEwQ,EAAI+R,EAAS/R,EAAIiS,EAAU3R,OAAS9B,EAAKa,MAAMvD,OAAO8B,UAAY,GAAK,EACzEpO,EAAE0Q,EAAI6R,EAAS7R,EAAI+R,EAAUngB,OAAS,EAE/BtC,GAGX0iB,kBAAmB,SAAU1T,GAEzB,MADQzQ,MAAK6jB,gBAAgBpT,IAIjC2T,mBAAoB,SAAU3T,GAC1B,GAAI6R,GAAc7R,EAAKa,MAAMvD,OACzBsW,EAAa,IAOjB,IANK,UAAY/B,IAAgBtiB,KAAKkiB,YAClCmC,EAAa/B,EAAYgC,QAEzBD,GAAepS,GAAI,EAAGE,GAAI,GAC1BmQ,EAAYgC,OAASD,IAEJ,GAAjBA,EAAWpS,IAA4B,GAAjBoS,EAAWlS,EACjC,GAAI1B,EAAKU,OACLkT,EAAWpS,EAAI,EACfoS,EAAWlS,EAAI,MACZ,CACH,GAAI+R,GAAYzT,EAAKa,MAAM7D,KACvBuW,EAAWhkB,KAAK6jB,gBAAgBpT,EACpC4T,GAAWpS,EAAI+R,EAAS/R,GAAKiS,EAAU3R,MAAQvS,KAAKsP,KAAKpB,QAAUuC,EAAKa,MAAMvD,OAAO8B,UACrFwU,EAAWlS,EAAI6R,EAAS7R,EAKhC,MAAOkS,IAGXE,mBAAoB,SAAU9T,GAC1B,GAAIhP,GAAIzB,KAAKokB,mBAAmB3T,GAC5B+T,IAOJ,OANI/T,GAAKa,MAAMvD,OAAO8B,WAAa1L,EAAG0L,UAAUX,MAC5CsV,EAAKvS,EAAIxQ,EAAEwQ,EAAIjS,KAAKsP,KAAKpB,OAEzBsW,EAAKvS,EAAIxQ,EAAEwQ,EAEfuS,EAAKrS,EAAI1Q,EAAE0Q,EAAI2K,KAAK2H,KAAKzkB,KAAKsP,KAAKpB,OAAS,GACrCsW,GAGXE,aAAc,WACV,GAAIhS,GAAQ1S,KAAKmE,GAAGwL,KAAK+C,MACrBjC,EAAO,KACPkU,EAAO,IACX,KAAK,GAAI/R,KAAUF,GACfjC,EAAOiC,EAAME,GACb+R,EAAO3kB,KAAKokB,mBAAmB3T,GAC3BkU,EAAK1S,EAAIjS,KAAKiiB,OAAOpJ,IAAK7Y,KAAKiiB,OAAOpJ,EAAI8L,EAAK1S,GAC/C0S,EAAK1S,EAAIjS,KAAKiiB,OAAO3P,IAAKtS,KAAKiiB,OAAO3P,EAAIqS,EAAK1S,EAEvD,QACIK,EAAGtS,KAAKiiB,OAAOpJ,EAAI7Y,KAAKiiB,OAAO3P,EAC/BxH,EAAG9K,KAAKiiB,OAAOvgB,EAAI1B,KAAKiiB,OAAO9gB,IAIvC8d,YAAa,SAAUxO,GACfA,EAAKU,SAGLV,EAAKW,SACLpR,KAAK0f,cAAcjP,GAEnBzQ,KAAKyf,YAAYhP,KAIzBgP,YAAa,SAAUhP,GACnBA,EAAKW,UAAW,EAChBpR,KAAK4kB,YAAYnU,GACjBzQ,KAAK0jB,YAAYjT,EAAKY,UAAU,IAGpCqO,cAAe,SAAUjP,GACrBA,EAAKW,UAAW,EAChBpR,KAAK4kB,YAAYnU,GACjBzQ,KAAK0jB,YAAYjT,EAAKY,UAAU,IAGpCsO,WAAY,WACR,GAEIlP,GAFAiC,EAAQ1S,KAAKmE,GAAGwL,KAAK+C,MACrBjS,EAAI,CAER,KAAK,GAAImS,KAAUF,GACfjC,EAAOiC,EAAME,GACRnC,EAAKW,WACNX,EAAKW,UAAW,EAChB3Q,IAGR,IAAIA,EAAI,EAAG,CACP,GAAIhB,GAAOO,KAAKmE,GAAGwL,KAAKlQ,IACxBO,MAAK4kB,YAAYnlB,GACjBO,KAAK0jB,YAAYjkB,EAAK4R,UAAU,KAIxCuO,aAAc,WACV,GAEInP,GAFAiC,EAAQ1S,KAAKmE,GAAGwL,KAAK+C,MACrBjS,EAAI,CAER,KAAK,GAAImS,KAAUF,GACfjC,EAAOiC,EAAME,GACTnC,EAAKW,WAAaX,EAAKU,SACvBV,EAAKW,UAAW,EAChB3Q,IAGR,IAAIA,EAAI,EAAG,CACP,GAAIhB,GAAOO,KAAKmE,GAAGwL,KAAKlQ,IACxBO,MAAK4kB,YAAYnlB,GACjBO,KAAK0jB,YAAYjkB,EAAK4R,UAAU,KAIxCwO,gBAAiB,SAAUgF,EAAcC,EAAYC,GACjD,KAAIF,EAAe,GAKnB,IAJA,GAAInS,GAAQoS,GAAc9kB,KAAKmE,GAAGwL,KAAKlQ,KAAK4R,SACxCyO,EAAQiF,GAAc,EACtB3kB,EAAIsS,EAAMxP,OACVuN,EAAO,KACJrQ,KACHqQ,EAAOiC,EAAMtS,GACT0f,EAAQ+E,IACHpU,EAAKW,UACNpR,KAAKyf,YAAYhP,GAErBzQ,KAAK6f,gBAAgBgF,EAAcpU,EAAKY,SAAUyO,EAAQ,IAE1DA,GAAS+E,GACLpU,EAAKW,UACLpR,KAAK0f,cAAcjP,IAMnCmU,YAAa,SAAUnU,GACnB,GAAIhR,GAAOO,KAAKmE,GAAGwL,KAAKlQ,IACxB,IAAMA,EAAM,CACR,GAAIulB,GAAmBvlB,EAAK6R,MAAMvD,MAC9B0C,GAAKU,QACL6T,EAAiB7B,mBAAqBnjB,KAAK4jB,+BAA+BoB,EAAiBjC,aAC3FiC,EAAiB/B,kBAAoBjjB,KAAK4jB,+BAA+BoB,EAAiBlC,aAEtFrS,EAAKa,MAAMvD,OAAO8B,WAAa1L,EAAG0L,UAAUX,MAC5C8V,EAAiB7B,mBAAqBnjB,KAAK4jB,+BAA+BoB,EAAiBjC,aAE3FiC,EAAiB/B,kBAAoBjjB,KAAK4jB,+BAA+BoB,EAAiBlC,YAGlG9iB,KAAKiiB,OAAOvgB,EAAIob,KAAKsG,IAAI4B,EAAiB/B,kBAAmB+B,EAAiB7B,oBAC9EnjB,KAAKkiB,aAAc,MAEnB3W,GAAOK,KAAK,4BAIpB8X,YAAa,SAAUhR,EAAOuS,GAI1B,IAHA,GAAI7kB,GAAIsS,EAAMxP,OACVuN,EAAO,KAEJrQ,KACHqQ,EAAOiC,EAAMtS,GACCqQ,EAAKa,MAAMvD,OACrB0C,EAAKW,SACLpR,KAAK0jB,YAAYjT,EAAKY,SAAU4T,GAEhCjlB,KAAK0jB,YAAYjT,EAAKY,UAAU,GAE/BZ,EAAKU,SACNV,EAAKa,MAAMvD,OAAOkX,QAAUA,IAKxCC,UAAW,SAAUzU,GACjB,MAAOA,GAAKW,UAGhBsP,WAAY,SAAUjQ,GAClB,GAAI6R,GAAc7R,EAAKa,MAAMvD,MAC7B,SAAK,WAAauU,KAAiBA,EAAY2C,WAQvD9gB,EAAGghB,aAAe,SAAU1X,GACxBzN,KAAKsP,KAAO7B,EAAK6B,KACjBtP,KAAKolB,SAAWlZ,EAAG,UACnBlM,KAAKqlB,WAAarlB,KAAKolB,SAASE,WAAW,MAC3CtlB,KAAKshB,MAAShP,EAAG,EAAGxH,EAAG,IAG3B3G,EAAGghB,aAAa5jB,WACZkd,QAAS,WACL,MAAOze,MAAKolB,UAGhBG,SAAU,SAAUjT,EAAGxH,GACnB9K,KAAKshB,KAAKhP,EAAIA,EACdtS,KAAKshB,KAAKxW,EAAIA,EACd9K,KAAKolB,SAAS7S,MAAQD,EACtBtS,KAAKolB,SAASrhB,OAAS+G,GAG3B0a,MAAO,WACHxlB,KAAKqlB,WAAWI,UAAU,EAAG,EAAGzlB,KAAKshB,KAAKhP,EAAGtS,KAAKshB,KAAKxW,IAG3D4a,UAAW,SAAUf,EAAMgB,EAAKC,GAC5B,GAAIC,GAAM7lB,KAAKqlB,UACfQ,GAAIC,YAAc9lB,KAAKsP,KAAKxB,WAC5B+X,EAAIE,UAAY/lB,KAAKsP,KAAKzB,WAC1BgY,EAAIG,QAAU,QAEdhmB,KAAKimB,WAAWJ,EACZF,EAAI1T,EAAI2T,EAAO3T,EACf0T,EAAIxT,EAAIyT,EAAOzT,EACfwS,EAAK1S,EAAI2T,EAAO3T,EAChB0S,EAAKxS,EAAIyT,EAAOzT,IAGxB+T,QAAS,SAAUC,EAAiBhN,GAChCgN,EAAgBC,UAAUpmB,KAAKolB,SAAU,EAAG,KAC1CjM,GAAYA,KAGlB8M,WAAY,SAAUJ,EAAKQ,EAAIC,EAAIC,EAAIC,GACnCX,EAAIY,YACJZ,EAAIa,OAAOL,EAAIC,GACfT,EAAIc,cAAcN,EAAiB,GAAXE,EAAKF,GAAU,EAAGC,EAAID,EAAIG,EAAID,EAAIC,GAC1DX,EAAIe,UAGRC,SAAU,SAAUhB,EAAKQ,EAAIC,EAAIC,EAAIC,GACjCX,EAAIY,YACJZ,EAAIa,OAAOL,EAAIC,GACfT,EAAIiB,OAAOP,EAAIC,GACfX,EAAIe,WAIZziB,EAAG4iB,UAAY,SAAUtZ,GACrBzN,KAAKyN,KAAOA,EACZzN,KAAKsP,KAAO7B,EAAK6B,KACjBtP,KAAKgnB,MAAQ7iB,EAAG4iB,UAAUtmB,EAAE,OAC5BT,KAAKshB,MAAShP,EAAG,EAAGxH,EAAG,GACvB9K,KAAKinB,UAGT9iB,EAAG4iB,UAAUtmB,EAAI,SAAU0L,GACvB,MAAOJ,GAAGmb,gBAAgB,6BAA8B/a,IAG5DhI,EAAG4iB,UAAUxlB,WACTkd,QAAS,WACL,MAAOze,MAAKgnB,OAGhBzB,SAAU,SAAUjT,EAAGxH,GACnB9K,KAAKshB,KAAKhP,EAAIA,EACdtS,KAAKshB,KAAKxW,EAAIA,EACd9K,KAAKgnB,MAAMlf,aAAa,QAASwK,GACjCtS,KAAKgnB,MAAMlf,aAAa,SAAUgD,IAGtC0a,MAAO,WAEH,IADA,GAAIhR,GAAMxU,KAAKinB,MAAM/jB,OACdsR,KACHxU,KAAKgnB,MAAMrgB,YAAY3G,KAAKinB,MAAMzS,GAEtCxU,MAAKinB,MAAM/jB,OAAS,GAGxBwiB,UAAW,SAAUf,EAAMgB,EAAKC,GAC5B,GAAIuB,GAAOhjB,EAAG4iB,UAAUtmB,EAAE,OAC1B0mB,GAAKrf,aAAa,SAAU9H,KAAKsP,KAAKxB,YACtCqZ,EAAKrf,aAAa,eAAgB9H,KAAKsP,KAAKzB,YAC5CsZ,EAAKrf,aAAa,OAAQ,eAC1B9H,KAAKinB,MAAM7jB,KAAK+jB,GAChBnnB,KAAKgnB,MAAM9gB,YAAYihB,GACvBnnB,KAAKimB,WAAWkB,EAAMxB,EAAI1T,EAAI2T,EAAO3T,EAAG0T,EAAIxT,EAAIyT,EAAOzT,EAAGwS,EAAK1S,EAAI2T,EAAO3T,EAAG0S,EAAKxS,EAAIyT,EAAOzT,IAGjG+T,QAAS,SAAUC,EAAiBhN,GAChC,GAAIiO,GAAM,GAAIC,MACdD,GAAI1M,OAAS,WACTyL,EAAgBC,UAAUgB,EAAK,EAAG,KAChCjO,GAAYA,KAElBiO,EAAIE,IAAM,6BAA+BtlB,MAAK,GAAIulB,gBAAgBC,kBAAkBxnB,KAAKgnB,SAG7Ff,WAAY,SAAUwB,EAAMpB,EAAIC,EAAIC,EAAIC,GACpCiB,EAAK3f,aAAa,IAAK,IAAMue,EAAK,IAAMC,EAAK,OAASD,EAAiB,GAAXE,EAAKF,GAAU,GAAK,IAAMC,EAAK,KAAOD,EAAK,IAAMG,EAAK,KAAOD,EAAK,IAAMC,IAGxIK,SAAU,SAAUY,EAAMpB,EAAIC,EAAIC,EAAIC,GAClCiB,EAAK3f,aAAa,IAAK,KAAOue,EAAK,IAAMC,EAAK,MAAQC,EAAK,IAAMC,KAKzEriB,EAAGqZ,cAAgB,SAAUrZ,EAAIL,GAC7B9D,KAAKsP,KAAOxL,EACZ9D,KAAKmE,GAAKA,EACVnE,KAAK+N,OAAS5J,EAAG4J,OAEjB/N,KAAKoN,UAAY,KACjBpN,KAAK0nB,QAAU,KACf1nB,KAAK2nB,QAAU,KAEf3nB,KAAKshB,MAAShP,EAAG,EAAGxH,EAAG,GAEvB9K,KAAK4nB,cAAgB,KACrB5nB,KAAK6nB,aAAe,KAEpB7nB,KAAK8nB,MAAQ,MAGjB3jB,EAAGqZ,cAAcjc,WACb0C,KAAM,WAIF,GAHAsH,EAAOG,MAAM,aAEb1L,KAAKoN,UAAYT,EAAG3M,KAAKsP,KAAKlC,WAAapN,KAAKsP,KAAKlC,UAAYpB,EAAGhM,KAAKsP,KAAKlC,YACzEpN,KAAKoN,UAEN,WADA7B,GAAOI,MAAM,qDAGjB3L,MAAK0nB,QAAUxb,EAAG,OAClBlM,KAAK2nB,QAAUzb,EAAG,WAClBlM,KAAK+nB,SAAW7b,EAAG,SAEnBlM,KAAK8nB,MAA2C,QAAnC9nB,KAAKsP,KAAK5B,OAAOjF,cAA0B,GAAItE,GAAG4iB,UAAU/mB,MAAQ,GAAImE,GAAGghB,aAAanlB,MAErGA,KAAK0nB,QAAQM,UAAY,eACzBhoB,KAAK0nB,QAAQxhB,YAAYlG,KAAK8nB,MAAMrJ,WACpCze,KAAK0nB,QAAQxhB,YAAYlG,KAAK2nB,SAE9B3nB,KAAK+nB,SAASC,UAAY,gBAC1BhoB,KAAK+nB,SAASnkB,KAAO,OAErB5D,KAAKioB,WAAa,EAClBjoB,KAAKkoB,SAAW,GAChBloB,KAAKmoB,QAAU,GACfnoB,KAAKooB,QAAU,CAEf,IAAIC,GAAIroB,IACRmE,GAAGoL,KAAKyK,IAAIC,UAAUja,KAAK+nB,SAAU,UAAW,SAAUlP,GACtD,GAAIoD,GAAMpD,GAAK8F,KACI,KAAf1C,EAAIqM,UAAiBD,EAAEhJ,gBAAiBpD,EAAIsM,qBAEpDpkB,EAAGoL,KAAKyK,IAAIC,UAAUja,KAAK+nB,SAAU,OAAQ,SAAUlP,GACnDwP,EAAEhJ,kBAGNrf,KAAKoN,UAAUlH,YAAYlG,KAAK0nB,UAGpCzN,UAAW,SAAU9T,EAAKqiB,EAAYzK,GAClC5Z,EAAGoL,KAAKyK,IAAIC,UAAUja,KAAK2nB,QAASa,EAAY,SAAU3P,GACtD,GAAIoD,GAAMpD,GAAK8F,KACfZ,GAAaxd,KAAK4F,EAAK8V,MAI/B4C,kBAAmB,SAAUJ,GACzB,GAAe,MAAXA,EACA,MAAO,KAEX,IAAIjH,GAAUiH,EAAQjH,QAAQ/O,aAC9B,OAAe,WAAX+O,GAAmC,QAAXA,GAAgC,QAAXA,EACtC,KAEI,UAAXA,GAAkC,cAAXA,EAChBiH,EAAQ5G,aAAa,UAErB7X,KAAK6e,kBAAkBJ,EAAQgK,gBAI9CzJ,YAAa,SAAUP,GACnB,MAAyC,cAAjCA,EAAQjH,QAAQ/O,eAG5BuX,MAAO,WACHzU,EAAOG,MAAM,cACb1L,KAAK4nB,cAAgB,KACrB5nB,KAAK0oB,cACL1oB,KAAK2oB,cACL3oB,KAAKoe,eAGTA,YAAa,WACT,GAAIwK,GAAa5oB,KAAKmE,GAAGL,QAAQwJ,KAE7BtN,MAAK2nB,QAAQK,UADXY,EACuB,SAAWA,EAEX,IAIjCvK,mBAAoB,WAChB,GAAI3L,GAAQ1S,KAAKmE,GAAGwL,KAAK+C,KACzB,KAAK,GAAIE,KAAUF,GACf1S,KAAKugB,wBAAwB7N,EAAME,KAI3CsN,KAAM,WACF3U,EAAOG,MAAM,aACb1L,KAAK6oB,cAGTC,YAAa,WACT,GAAIC,GAAW/oB,KAAK+N,OAAO2W,eACvBsE,EAAYD,EAASzW,EAAwB,EAApBtS,KAAKsP,KAAK3B,QACnCsb,EAAaF,EAASje,EAAwB,EAApB9K,KAAKsP,KAAK1B,QACpCsb,EAAWlpB,KAAK0nB,QAAQyB,YACxBC,EAAWppB,KAAK0nB,QAAQ2B,YACxBH,GAAWF,IAAaE,EAAWF,GACnCI,EAAWH,IAAcG,EAAWH,GACxCjpB,KAAKshB,KAAKhP,EAAI4W,EACdlpB,KAAKshB,KAAKxW,EAAIse,GAGlBE,gBAAiB,SAAU7Y,GACvB,GAAIyT,GAAYzT,EAAKa,MAAM7D,IAC3ByW,GAAU3R,MAAQ2R,EAAUzF,QAAQ0K,YACpCjF,EAAUngB,OAASmgB,EAAUzF,QAAQ4K,cAGzCR,WAAY,WACR,GAAInW,GAAQ1S,KAAKmE,GAAGwL,KAAK+C,MACrB6W,EAAWxd,EAAGyd,wBAClB,KAAK,GAAI5W,KAAUF,GACf1S,KAAKypB,oBAAoB/W,EAAME,GAAS2W,EAE5CvpB,MAAK2nB,QAAQzhB,YAAYqjB,EACzB,KAAK,GAAI3W,KAAUF,GACf1S,KAAKspB,gBAAgB5W,EAAME,KAInCG,SAAU,SAAUtC,GAChBzQ,KAAKypB,oBAAoBhZ,EAAMzQ,KAAK2nB,SACpC3nB,KAAKspB,gBAAgB7Y,IAGzBgZ,oBAAqB,SAAUhZ,EAAMuC,GACjC,GAAIkR,GAAY,IACZ,SAAUzT,GAAKa,MACf4S,EAAYzT,EAAKa,MAAM7D,MAEvByW,KACAzT,EAAKa,MAAM7D,KAAOyW,EAGtB,IAAIxjB,GAAIwL,EAAG,SACX,IAAIuE,EAAKU,OACLzQ,EAAEsnB,UAAY,WACX,CACH,GAAI0B,GAAMxd,EAAG,aACbE,GAAGsd,EAAK,KACRA,EAAI5hB,aAAa,SAAU2I,EAAKtN,IAChCumB,EAAI5c,MAAM+O,WAAa,SACvB7I,EAAY9M,YAAYwjB,GACxBxF,EAAUyF,SAAWD,EAEnBjZ,EAAKS,QACHlR,KAAKsP,KAAK9B,aACVhB,EAAG9L,EAAG+P,EAAKS,OAEX9E,EAAG1L,EAAG+P,EAAKS,QAGnBxQ,EAAEoH,aAAa,SAAU2I,EAAKtN,IAC9BzC,EAAEoM,MAAM+O,WAAa,SACrB7b,KAAK4pB,yBAAyBlpB,EAAG+P,EAAKvM,MAEtC8O,EAAY9M,YAAYxF,GACxBwjB,EAAUzF,QAAU/d,GAGxBmU,YAAa,SAAUpE,GACO,MAAtBzQ,KAAK4nB,eAAyB5nB,KAAK4nB,cAAczkB,IAAMsN,EAAKtN,KAC5DnD,KAAK4nB,cAAgB,MAEA,MAArB5nB,KAAK6nB,cAAwB7nB,KAAK6nB,aAAa1kB,IAAMsN,EAAKtN,KAC1DsN,EAAKa,MAAM7D,KAAKgR,QAAQ9X,YAAY3G,KAAK+nB,UACzC/nB,KAAK6nB,aAAe,KAIxB,KAFA,GAAIxW,GAAWZ,EAAKY,SAChBjR,EAAIiR,EAASnO,OACV9C,KACHJ,KAAK6U,YAAYxD,EAASjR,GAE9B,IAAIqQ,EAAKa,MAAM7D,KAAM,CACjB,GAAIgR,GAAUhO,EAAKa,MAAM7D,KAAKgR,QAC1BkL,EAAWlZ,EAAKa,MAAM7D,KAAKkc,QAC/B3pB,MAAK2nB,QAAQhhB,YAAY8X,GACzBze,KAAK2nB,QAAQhhB,YAAYgjB,GACzBlZ,EAAKa,MAAM7D,KAAKgR,QAAU,KAC1BhO,EAAKa,MAAM7D,KAAKkc,SAAW,OAInClJ,YAAa,SAAUhQ,GACnB,GAAIyT,GAAYzT,EAAKa,MAAM7D,KACvBgR,EAAUyF,EAAUzF,OAClBhO,GAAKS,QACHlR,KAAKsP,KAAK9B,aACVhB,EAAGiS,EAAShO,EAAKS,OAEjB9E,EAAGqS,EAAShO,EAAKS,QAGzBgT,EAAU3R,MAAQkM,EAAQ0K,YAC1BjF,EAAUngB,OAAS0a,EAAQ4K,cAG/BvK,YAAa,SAAUrO,GACbzQ,KAAK4nB,gBACP5nB,KAAK4nB,cAActW,MAAM7D,KAAKgR,QAAQuJ,UAClChoB,KAAK4nB,cAActW,MAAM7D,KAAKgR,QAAQuJ,UAAU7K,QAAQ,iBAAkB,IAC9End,KAAKugB,wBAAwBvgB,KAAK4nB,gBAEhCnX,IACFzQ,KAAK4nB,cAAgBnX,EACrBA,EAAKa,MAAM7D,KAAKgR,QAAQuJ,WAAa,YACrChoB,KAAK6pB,wBAAwBpZ,KAIrCsO,aAAc,WACV/e,KAAK8e,YAAY,OAGrBgL,iBAAkB,WACd,MAAO9pB,MAAK6nB,cAGhBkC,WAAY,WACR,QAAU/pB,KAAK6nB,cAGnB1I,gBAAiB,SAAU1O,GACvB,IAAKA,EAAKS,MAEN,WADA3F,GAAOK,KAAK,yBAGS,OAArB5L,KAAK6nB,cACL7nB,KAAKqf,gBAETrf,KAAK6nB,aAAepX,CACpB,IAAIyT,GAAYzT,EAAKa,MAAM7D,KACvBgR,EAAUyF,EAAUzF,QACpBvN,EAAQT,EAAKS,MACb8Y,EAAMC,iBAAiBxL,EAC3Bze,MAAK+nB,SAAS1jB,MAAQ6M,EACtBlR,KAAK+nB,SAASjb,MAAMyF,MAASkM,EAAQ0K,YAAce,SAASF,EAAIG,iBAAiB,iBAAmBD,SAASF,EAAIG,iBAAiB,kBAAqB,KACvJ1L,EAAQ/R,UAAY,GACpB+R,EAAQvY,YAAYlG,KAAK+nB,UACzBtJ,EAAQ3R,MAAMsd,OAAS,EACvBpqB,KAAK+nB,SAASsC,QACdrqB,KAAK+nB,SAAS5X,UAGlBkP,cAAe,WACX,GAAyB,MAArBrf,KAAK6nB,aAAsB,CAC3B,GAAIpX,GAAOzQ,KAAK6nB,YAChB7nB,MAAK6nB,aAAe,IACpB,IAAI3D,GAAYzT,EAAKa,MAAM7D,KACvBgR,EAAUyF,EAAUzF,QACpBvN,EAAQlR,KAAK+nB,SAAS1jB,KAC1Boa,GAAQ3R,MAAMsd,OAAS,OACvB3L,EAAQ9X,YAAY3G,KAAK+nB,UACrB5jB,EAAGoL,KAAK0N,KAAKC,SAAShM,IAAUT,EAAKS,QAAUA,EAC3ClR,KAAKsP,KAAK9B,aACVhB,EAAGiS,EAAShO,EAAKS,OAEjB9E,EAAGqS,EAAShO,EAAKS,OAGrBlR,KAAKmE,GAAGsc,YAAYhQ,EAAKtN,GAAI+N,KAKzCoZ,gBAAiB,WACb,GAAIrI,GAASjiB,KAAK+N,OAAOkU,MAGzB,QAAShQ,GAFCjS,KAAKshB,KAAKhP,EAAI2P,EAAOpJ,EAAIoJ,EAAO3P,GAAK,EAE/BH,EADPnS,KAAKshB,KAAKxW,EAAI,IAI3BmF,OAAQ,WACJjQ,KAAK8nB,MAAMvC,SAAS,EAAG,GACvBvlB,KAAK2nB,QAAQ7a,MAAMyF,MAAQ,MAC3BvS,KAAK2nB,QAAQ7a,MAAM/I,OAAS,MAE5B/D,KAAK8oB,cACL9oB,KAAKigB,SAGTA,MAAO,WACHjgB,KAAK8nB,MAAMvC,SAASvlB,KAAKshB,KAAKhP,EAAGtS,KAAKshB,KAAKxW,GAC3C9K,KAAK2nB,QAAQ7a,MAAMyF,MAAQvS,KAAKshB,KAAKhP,EAAI,KACzCtS,KAAK2nB,QAAQ7a,MAAM/I,OAAS/D,KAAKshB,KAAKxW,EAAI,KAC1C9K,KAAKuqB,aACLvqB,KAAKwqB,aAELxqB,KAAKmE,GAAGgc,oBAAoBhc,EAAG4L,WAAWE,QAAU/L,WAGxDumB,OAAQ,WACJ,MAAOzqB,MAAK0qB,QAAQ1qB,KAAKioB,WAAajoB,KAAKkoB,WAG/CyC,QAAS,WACL,MAAO3qB,MAAK0qB,QAAQ1qB,KAAKioB,WAAajoB,KAAKkoB,WAG/CwC,QAAS,SAAUE,GACf,GAAKA,EAAO5qB,KAAKmoB,SAAayC,EAAO5qB,KAAKooB,QACtC,OAAO,CAEXpoB,MAAKioB,WAAa2C,CAClB,KAAK,GAAIxqB,GAAI,EAAGA,EAAIJ,KAAK0nB,QAAQrW,SAASnO,OAAQ9C,IAC9CJ,KAAK0nB,QAAQrW,SAASjR,GAAG0M,MAAM+d,UAAY,SAAWD,EAAO,GAGjE,OADA5qB,MAAKgQ,MAAK,IACH,GAIX8a,aAAc,WAEV,GAAIC,GAAU/qB,KAAK0nB,QAAQyB,YACvB6B,EAAUhrB,KAAK0nB,QAAQ2B,YAC3B,IAAIrpB,KAAKshB,KAAKhP,EAAIyY,EAAS,CACvB,GAAIE,GAAUjrB,KAAKsqB,iBACnBtqB,MAAK0nB,QAAQwD,WAAaD,EAAQhZ,EAAI8Y,EAAU,EAEhD/qB,KAAKshB,KAAKxW,EAAIkgB,IACdhrB,KAAK0nB,QAAQyD,WAAanrB,KAAKshB,KAAKxW,EAAIkgB,GAAW,IAI3Dhb,KAAM,SAAUob,GACZ7f,EAAOG,MAAM,aACb1L,KAAK8oB,cACL9oB,KAAKigB,QACCmL,GACFprB,KAAK8qB,gBAIbvL,SAAU,WACNvf,KAAK8oB,cACL9oB,KAAKigB,SAGTX,cAAe,SAAU7O,GACrB,GAAIuB,GAAKvB,EAAKa,MAAM7D,IACpBuE,GAAGqZ,iBACCpZ,EAAGiY,SAASlY,EAAGyM,QAAQ3R,MAAMkC,MAAQhP,KAAK0nB,QAAQwD,WAClD/Y,EAAG+X,SAASlY,EAAGyM,QAAQ3R,MAAMwe,KAAOtrB,KAAK0nB,QAAQyD,YAIzD3L,iBAAkB,SAAU/O,GACxB,GAAIuB,GAAKvB,EAAKa,MAAM7D,IACpBzN,MAAK0nB,QAAQwD,WAAahB,SAASlY,EAAGyM,QAAQ3R,MAAMkC,MAAQgD,EAAGqZ,gBAAgBpZ,EAC/EjS,KAAK0nB,QAAQyD,UAAYjB,SAASlY,EAAGyM,QAAQ3R,MAAMwe,KAAOtZ,EAAGqZ,gBAAgBlZ,GAGjFwW,YAAa,WACT,GAAIhZ,GAAO3P,KAAKmE,GAAGwL,IACnB,IAAY,MAARA,EAAJ,CAGA,GAAI+C,GAAQ/C,EAAK+C,MACbjC,EAAO,IACX,KAAK,GAAImC,KAAUF,GACfjC,EAAOiC,EAAME,GACbnC,EAAKa,MAAM7D,KAAKgR,QAAU,KAC1BhO,EAAKa,MAAM7D,KAAKkc,SAAW,IAE/B3pB,MAAK2nB,QAAQjb,UAAY,KAG7B6d,WAAY,WACR,GAAI7X,GAAQ1S,KAAKmE,GAAGwL,KAAK+C,MACrBjC,EAAO,KACP8a,EAAe,KACf5B,EAAW,KACXloB,EAAI,KACJ+pB,EAAa,KACbC,EAAgB,IAChBvH,EAAY,KACZ+G,EAAUjrB,KAAKsqB,iBACnB,KAAK,GAAI1X,KAAUF,GACfjC,EAAOiC,EAAME,GACbsR,EAAYzT,EAAKa,MAAM7D,KACvB8d,EAAerH,EAAUzF,QACzBkL,EAAWzF,EAAUyF,SAChB3pB,KAAK+N,OAAO2S,WAAWjQ,IAK5BzQ,KAAKugB,wBAAwB9P,GAC7BhP,EAAIzB,KAAK+N,OAAOkW,eAAexT,GAC/ByT,EAAUhS,MAAQ+Y,EAAQhZ,EAAIxQ,EAAEwQ,EAChCiS,EAAU9R,MAAQ6Y,EAAQ9Y,EAAI1Q,EAAE0Q,EAChCoZ,EAAaze,MAAMkC,KAAQic,EAAQhZ,EAAIxQ,EAAEwQ,EAAK,KAC9CsZ,EAAaze,MAAMwe,IAAOL,EAAQ9Y,EAAI1Q,EAAE0Q,EAAK,KAC7CoZ,EAAaze,MAAM4e,QAAU,GAC7BH,EAAaze,MAAM+O,WAAa,WAC3BpL,EAAKU,QAAUV,EAAKY,SAASnO,OAAS,IACvCuoB,EAAgBhb,EAAKW,SAAW,IAAM,IACtCoa,EAAaxrB,KAAK+N,OAAOwW,mBAAmB9T,GAC5CkZ,EAAS7c,MAAMkC,KAAQic,EAAQhZ,EAAIuZ,EAAWvZ,EAAK,KACnD0X,EAAS7c,MAAMwe,IAAOL,EAAQ9Y,EAAIqZ,EAAWrZ,EAAK,KAClDwX,EAAS7c,MAAM4e,QAAU,GACzB/B,EAAS7c,MAAM+O,WAAa,UAC5BzP,EAAGud,EAAU8B,IAGZhb,EAAKU,QAAkC,GAAxBV,EAAKY,SAASnO,SAC9BymB,EAAS7c,MAAM4e,QAAU,OACzB/B,EAAS7c,MAAM+O,WAAa,YAxB5B0P,EAAaze,MAAM4e,QAAU,OAC7B/B,EAAS7c,MAAM4e,QAAU,SA4BrCnL,wBAAyB,SAAU9P,GAC/BzQ,KAAK4pB,yBAAyBnZ,EAAKa,MAAM7D,KAAKgR,QAAShO,EAAKvM,OAGhE0lB,yBAA0B,SAAU2B,EAAczV,GAsB9C,GArBI,oBAAsBA,KACtByV,EAAaze,MAAM6e,gBAAkB7V,EAAU,qBAE/C,oBAAsBA,KACtByV,EAAaze,MAAM8e,MAAQ9V,EAAU,qBAErC,SAAWA,KACXyV,EAAaze,MAAMyF,MAAQuD,EAAA,MAAqB,MAEhD,UAAYA,KACZyV,EAAaze,MAAM/I,OAAS+R,EAAA,OAAsB,MAElD,aAAeA,KACfyV,EAAaze,MAAM+e,SAAW/V,EAAU,aAAe,MAEvD,eAAiBA,KACjByV,EAAaze,MAAMgf,WAAahW,EAAU,gBAE1C,cAAgBA,KAChByV,EAAaze,MAAMif,UAAYjW,EAAU,eAEzC,oBAAsBA,GAAW,CACjC,GAAIkW,GAAkBlW,EAAU,mBAChC,IAAIkW,EAAgB/e,WAAW,SAAW6I,EAAA,OAAsBA,EAAA,OAAqB,CACjF,GAAIsR,GAAM,GAAIC,MAEdD,GAAI1M,OAAS,WACT,GAAIja,GAAIyL,EAAG,SACXzL,GAAE8R,MAAQgZ,EAAapC,YACvB1oB,EAAEsD,OAASwnB,EAAalC,YACxB,IAAIjC,GAAMpnB,IACV,IAAIS,EAAE6kB,WAAY,CACJ7kB,EAAE6kB,WAAW,MACnBc,UAAUgB,EAAK,EAAG,EAAGmE,EAAapC,YAAaoC,EAAalC,aAChE,IAAI4C,GAAkBxrB,EAAEyrB,WACxBX,GAAaze,MAAMkf,gBAAkB,OAASC,EAAkB,MAGxE7E,EAAIE,IAAM0E,MAGVT,GAAaze,MAAMkf,gBAAkB,OAASA,EAAkB,GAEpET,GAAaze,MAAMqf,eAAiB,MAEhC,uBAAyBrW,KACzByV,EAAaze,MAAM+d,UAAY,UAAY/U,EAAU,uBAAyB,UAK1F+T,wBAAyB,SAAUpZ,GAC/B,GAAI8a,GAAe9a,EAAKa,MAAM7D,KAAKgR,OACnC8M,GAAaze,MAAM6e,gBAAkB,GACrCJ,EAAaze,MAAM8e,MAAQ,IAG/BlD,YAAa,WACT1oB,KAAK8nB,MAAMtC,SAGfgF,WAAY,WACRxqB,KAAK0oB,aACL,IAAIhW,GAAQ1S,KAAKmE,GAAGwL,KAAK+C,MACrBjC,EAAO,KACPkV,EAAM,KACNhB,EAAO,KACPsG,EAAUjrB,KAAKsqB,iBACnB,KAAK,GAAI1X,KAAUF,GACfjC,EAAOiC,EAAME,GACPnC,EAAKU,QACN,WAAaV,GAAKa,MAAMvD,SAAY0C,EAAKa,MAAMvD,OAAOkX,UAC3DU,EAAM3lB,KAAK+N,OAAOoW,kBAAkB1T,GACpCkU,EAAO3kB,KAAK+N,OAAOqW,mBAAmB3T,EAAKnG,QAC3CtK,KAAK8nB,MAAMpC,UAAUf,EAAMgB,EAAKsF,MAM5C9mB,EAAGsZ,kBAAoB,SAAUtZ,EAAIL,GACjC9D,KAAKmE,GAAKA,EACVnE,KAAKsP,KAAOxL,EACZ9D,KAAK0O,QAAU5K,EAAQ4K,QACvB1O,KAAKyO,QAAU3K,EAAQ2K,QACvBzO,KAAKosB,aAGTjoB,EAAGsZ,kBAAkBlc,WACjB0C,KAAM,WACFE,EAAGoL,KAAKyK,IAAIC,UAAUlO,EAAI,UAAW/L,KAAKqsB,QAAQplB,KAAKjH,OAEvDA,KAAKyO,QAAL,SAA2BzO,KAAKssB,gBAChCtsB,KAAKyO,QAAL,WAA6BzO,KAAKusB,kBAClCvsB,KAAKyO,QAAL,SAA2BzO,KAAKwsB,gBAChCxsB,KAAKyO,QAAL,QAA0BzO,KAAKysB,eAC/BzsB,KAAKyO,QAAL,OAAyBzO,KAAK0sB,cAC9B1sB,KAAKyO,QAAL,GAAqBzO,KAAK2sB,UAC1B3sB,KAAKyO,QAAL,KAAuBzO,KAAK4sB,YAC5B5sB,KAAKyO,QAAL,KAAuBzO,KAAK6sB,YAC5B7sB,KAAKyO,QAAL,MAAwBzO,KAAK8sB,YAE7B,KAAK,GAAIC,KAAU/sB,MAAK0O,QACd1O,KAAK0O,QAAQqe,IAAYA,IAAU/sB,MAAKyO,UAC1CzO,KAAKosB,SAASpsB,KAAK0O,QAAQqe,IAAW/sB,KAAKyO,QAAQse,KAK/DC,gBAAiB,WACbhtB,KAAKsP,KAAKd,QAAS,GAGvBye,iBAAkB,WACdjtB,KAAKsP,KAAKd,QAAS,GAGvB6d,QAAS,SAAUxT,GACf,IAAI7Y,KAAKmE,GAAGsJ,KAAKsc,aAAjB,CACA,GAAI9N,GAAMpD,GAAK8F,KACf,KAAK3e,KAAKsP,KAAKd,OAAU,OAAO,CAChC,IAAI0e,GAAKjR,EAAIqM,SAAWrM,EAAIkR,SAAW,KAAOlR,EAAImR,SAAW,KAAOnR,EAAIoR,QAAU,KAAOpR,EAAIqR,UAAY,GACrGJ,KAAMltB,MAAKosB,UACXpsB,KAAKosB,SAASc,GAAI3sB,KAAKP,KAAMA,KAAKmE,GAAI0U,KAI9CyT,gBAAiB,SAAUiB,EAAK1U,GAC5B,GAAI+O,GAAgB2F,EAAI5M,mBACxB,IAAMiH,EAAe,CACjB,GAAIhV,GAASzO,EAAGoL,KAAKmN,KAAKC,OACf4Q,GAAIxa,SAAS6U,EAAehV,EAAQ,cAE3C2a,EAAIzO,YAAYlM,GAChB2a,EAAIrO,WAAWtM,MAI3B2Z,kBAAmB,SAAUgB,EAAK1U,GAC9B,GAAI+O,GAAgB2F,EAAI5M,mBACxB,IAAMiH,IAAkBA,EAAczW,OAAQ,CAC1C,GAAIyB,GAASzO,EAAGoL,KAAKmN,KAAKC,OACf4Q,GAAIxZ,kBAAkB6T,EAAehV,EAAQ,cAEpD2a,EAAIzO,YAAYlM,GAChB2a,EAAIrO,WAAWtM,MAI3B4Z,gBAAiB,SAAUe,EAAK1U,GAC5B,GAAI+O,GAAgB2F,EAAI5M,mBAClBiH,IACF2F,EAAIrO,WAAW0I,IAGvB6E,eAAgB,SAAUc,EAAK1U,GAC3B,GAAI+O,GAAgB2F,EAAI5M,mBAClBiH,KAAkBA,EAAczW,SAClCoc,EAAIzO,YAAY8I,EAActd,QAC9BijB,EAAI1Y,YAAY+S,KAGxB8E,cAAe,SAAUa,EAAK1U,GAC1B,GAAIoD,GAAMpD,GAAK8F,MACXiJ,EAAgB2F,EAAI5M,mBAClBiH,KACF2F,EAAItO,YAAY2I,EAAczkB,IAC9B8Y,EAAIsM,kBACJtM,EAAIuR,mBAGZb,UAAW,SAAUY,EAAK1U,GACtB,GAAIoD,GAAMpD,GAAK8F,MACXiJ,EAAgB2F,EAAI5M,mBACxB,IAAMiH,EAAe,CACjB,GAAI6F,GAAUF,EAAI1M,iBAAiB+G,EACnC,KAAK6F,EAAS,CACV,GAAIC,GAAKH,EAAI1M,iBAAiB+G,EAActd,OACtCojB,IAAMA,EAAGrc,SAASnO,OAAS,IAC7BuqB,EAAUC,EAAGrc,SAASqc,EAAGrc,SAASnO,OAAS,IAG7CuqB,GACFF,EAAIzO,YAAY2O,GAEpBxR,EAAIsM,kBACJtM,EAAIuR,mBAIZZ,YAAa,SAAUW,EAAK1U,GACxB,GAAIoD,GAAMpD,GAAK8F,MACXiJ,EAAgB2F,EAAI5M,mBACxB,IAAMiH,EAAe,CACjB,GAAI+F,GAAYJ,EAAIvM,gBAAgB4G,EACpC,KAAK+F,EAAW,CACZ,GAAID,GAAKH,EAAIvM,gBAAgB4G,EAActd,OACrCojB,IAAMA,EAAGrc,SAASnO,OAAS,IAC7ByqB,EAAYD,EAAGrc,SAAS,IAG1Bsc,GACFJ,EAAIzO,YAAY6O,GAEpB1R,EAAIsM,kBACJtM,EAAIuR,mBAIZX,YAAa,SAAUU,EAAK1U,GACxB7Y,KAAK4tB,kBAAkBL,EAAK1U,EAAG1U,EAAG0L,UAAUb,OAEhD8d,aAAc,SAAUS,EAAK1U,GACzB7Y,KAAK4tB,kBAAkBL,EAAK1U,EAAG1U,EAAG0L,UAAUX,QAEhD0e,kBAAmB,SAAUL,EAAK1U,EAAGnY,GACjC,GAAIub,GAAMpD,GAAK8F,MACXiJ,EAAgB2F,EAAI5M,oBACpBlQ,EAAO,IACX,IAAMmX,EAAe,CACjB,GAAIA,EAAczW,OAAQ,CAGtB,IAAK,GAFD1Q,GAAImnB,EAAcvW,SAClBA,KACKjR,EAAI,EAAGA,EAAIK,EAAEyC,OAAQ9C,IACtBK,EAAEL,GAAGyP,YAAcnP,GACnB2Q,EAASjO,KAAKhD,EAGtBqQ,GAAOhQ,EAAE4Q,EAASyL,KAAK+Q,OAAOxc,EAASnO,OAAS,GAAK,SAEpD,IAAI0kB,EAAc/X,YAAcnP,EAAG,CACpC,GAAI2Q,GAAWuW,EAAcvW,SACzByc,EAAgBzc,EAASnO,MACzB4qB,GAAgB,IAChBrd,EAAOY,EAASyL,KAAK+Q,OAAOC,EAAgB,GAAK,SAGrDrd,GAAOmX,EAActd,MAEnBmG,IACF8c,EAAIzO,YAAYrO,GAEpBwL,EAAIsM,kBACJtM,EAAIuR,oBAOhBrpB,EAAG4pB,OAAS,SAAUptB,EAAMsD,GACxBjE,KAAKW,KAAOA,EACZX,KAAKiE,KAAOA,GAGhBE,EAAG6pB,WAEH7pB,EAAG8pB,gBAAkB,SAAUF,GACvBA,YAAkB5pB,GAAG4pB,QACrB5pB,EAAG6pB,QAAQ5qB,KAAK2qB,IAIxB5pB,EAAGwZ,aAAe,SAAUuQ,GACxB7iB,EAAGwW,WAAW,WACV1d,EAAGgqB,cAAcD,IAClB,IAGP/pB,EAAGgqB,cAAgB,SAAUD,GAGzB,IAAK,GAFD7tB,GAAI8D,EAAG6pB,QAAQ9qB,OACfkrB,EAAU,KACLhuB,EAAI,EAAGA,EAAIC,EAAGD,IAEI,mBADvBguB,EAAUjqB,EAAG6pB,QAAQ5tB,GAAG6D,OAEpBmqB,EAAQF,IAMpB/pB,EAAG6L,KAAO,SAAUlM,EAAS6L,GACzB,GAAI4d,GAAM,GAAIppB,GAAGL,EAEjB,OADAypB,GAAIvd,KAAKL,GACF4d,OAIW,KAAX3tB,GAA6C,WAAnB,EAAOD,IACxCC,EAAOD,QAAUwE,EACjBkH,EAAA,OAAelH,OAEf,MAAAtE,aAAqB,MAAOsE,IAA5B,+BAIa,mBAAXW,QAAyBA,OAASiG,KV4xBfxK,KAAKZ,EAASM,EAAoB,MAIzD,SAAUL,EAAQD,GWhuHxB,GAAI0uB,EAGJA,GAAI,WACH,MAAOruB,QAGR,KAECquB,EAAIA,GAAKC,SAAS,mBAAoB,EAAGC,MAAM,QAC9C,MAAM1V,GAEc,gBAAX/T,UACTupB,EAAIvpB,QAONlF,EAAOD,QAAU0uB,GXuuHX,SAAUzuB,EAAQD,EAASM,GY3vHjC,GAAIuuB,GAAM,EAAQ,IACF1sB,EAAU,EAAQ,GAIC,kBAFvBA,EAAUA,EAAQV,WAAaU,EAAQ+H,QAAU/H,KAG/CA,IAAYlC,EAAOQ,EAAI0B,EAAS,KAG9C,IAAIgC,KAEJA,GAAQ2qB,OAAS,OACjB3qB,EAAQ4qB,WAAY,CAEpB,IAEIC,IAFSH,EAAI1sB,EAASgC,GAEXhC,EAAQsD,OAAStD,EAAQsD,UAIxCxF,GAAOD,QAAUgvB,GZiwHX,SAAU/uB,EAAQD,EAASM,GAEjC,Ya3uHA,SAAS2uB,GAAqBC,GAG5B,IAAK,GAFDlU,IAAU,EAELva,EAAI,EAAGA,EAAIoF,EAAYtC,OAAQ9C,IACtC,GAAIoF,EAAYpF,GAAGyuB,aAAeA,EAAY,CAC5ClU,EAASva,CACT,OAIJ,MAAOua,GAGT,QAASmU,GAAahsB,EAAMgB,GAI1B,IAAK,GAHDirB,MACAC,KAEK5uB,EAAI,EAAGA,EAAI0C,EAAKI,OAAQ9C,IAAK,CACpC,GAAIwB,GAAOkB,EAAK1C,GACZ+C,EAAKW,EAAQmrB,KAAOrtB,EAAK,GAAKkC,EAAQmrB,KAAOrtB,EAAK,GAClDstB,EAAQH,EAAW5rB,IAAO,EAC1B0rB,EAAa,GAAG1sB,OAAOgB,EAAI,KAAKhB,OAAO+sB,EAC3CH,GAAW5rB,GAAM+rB,EAAQ,CACzB,IAAI5nB,GAAQsnB,EAAqBC,GAC7B1oB,GACFiB,IAAKxF,EAAK,GACVyF,MAAOzF,EAAK,GACZa,UAAWb,EAAK,KAGH,IAAX0F,GACF9B,EAAY8B,GAAO6nB,aACnB3pB,EAAY8B,GAAO8nB,QAAQjpB,IAE3BX,EAAYpC,MACVyrB,WAAYA,EACZO,QAASxpB,EAASO,EAAKrC,GACvBqrB,WAAY,IAIhBH,EAAY5rB,KAAKyrB,GAGnB,MAAOG,GAGT,QAASK,GAAmBvrB,GAC1B,GAAIgJ,GAAQ/G,SAASC,cAAc,SAC/BspB,EAAaxrB,EAAQwrB,cAEzB,QAAgC,KAArBA,EAAWC,MAAuB,CAC3C,GAAIA,GAAmD,IAEnDA,KACFD,EAAWC,MAAQA,GAQvB,GAJAzuB,OAAO0uB,KAAKF,GAAYG,QAAQ,SAAUrf,GACxCtD,EAAMhF,aAAasI,EAAKkf,EAAWlf,MAGP,kBAAnBtM,GAAQ2qB,OACjB3qB,EAAQ2qB,OAAO3hB,OACV,CACL,GAAI4R,GAASgR,EAAU5rB,EAAQ2qB,QAAU,OAEzC,KAAK/P,EACH,KAAM,IAAIvW,OAAM,0GAGlBuW,GAAOxY,YAAY4G,GAGrB,MAAOA,GAGT,QAAS6iB,GAAmB7iB,GAE1B,GAAyB,OAArBA,EAAMpG,WACR,OAAO,CAGToG,GAAMpG,WAAWC,YAAYmG,GAa/B,QAAS9F,GAAoB8F,EAAOxF,EAAOjB,EAAQF,GACjD,GAAIiB,GAAMf,EAAS,GAAKF,EAAIkB,MAAQ,UAAUlF,OAAOgE,EAAIkB,MAAO,MAAMlF,OAAOgE,EAAIiB,IAAK,KAAOjB,EAAIiB,GAIjG,IAAI0F,EAAMvF,WACRuF,EAAMvF,WAAWC,QAAUC,EAAYH,EAAOF,OACzC,CACL,GAAIM,GAAU3B,SAAS4B,eAAeP,GAClCQ,EAAakF,EAAMlF,UAEnBA,GAAWN,IACbwF,EAAMnG,YAAYiB,EAAWN,IAG3BM,EAAW1E,OACb4J,EAAMjF,aAAaH,EAASE,EAAWN,IAEvCwF,EAAM5G,YAAYwB,IAKxB,QAASR,GAAW4F,EAAOhJ,EAASqC,GAClC,GAAIiB,GAAMjB,EAAIiB,IACVC,EAAQlB,EAAIkB,MACZ5E,EAAY0D,EAAI1D,SAepB,IAbI4E,EACFyF,EAAMhF,aAAa,QAAST,GAE5ByF,EAAM8iB,gBAAgB,SAGpBntB,GAAaT,OACfoF,GAAO,uDAAuDjF,OAAOH,KAAKU,SAASC,mBAAmBC,KAAKC,UAAUJ,MAAe,QAMlIqK,EAAMvF,WACRuF,EAAMvF,WAAWC,QAAUJ,MACtB,CACL,KAAO0F,EAAM9E,YACX8E,EAAMnG,YAAYmG,EAAM9E,WAG1B8E,GAAM5G,YAAYH,SAAS4B,eAAeP,KAO9C,QAASxB,GAASO,EAAKrC,GACrB,GAAIgJ,GACA1G,EACAC,CAEJ,IAAIvC,EAAQ4qB,UAAW,CACrB,GAAI7nB,GAAaC,GACjBgG,GAAQ4hB,IAAcA,EAAYW,EAAmBvrB,IACrDsC,EAASY,EAAoBC,KAAK,KAAM6F,EAAOjG,GAAY,GAC3DR,EAASW,EAAoBC,KAAK,KAAM6F,EAAOjG,GAAY,OAE3DiG,GAAQuiB,EAAmBvrB,GAC3BsC,EAASc,EAAWD,KAAK,KAAM6F,EAAOhJ,GAEtCuC,EAAS,WACPspB,EAAmB7iB,GAKvB,OADA1G,GAAOD,GACA,SAAqBgB,GAC1B,GAAIA,EAAQ,CACV,GAAIA,EAAOC,MAAQjB,EAAIiB,KAAOD,EAAOE,QAAUlB,EAAIkB,OAASF,EAAO1E,YAAc0D,EAAI1D,UACnF,MAGF2D,GAAOD,EAAMgB,OAEbd,MA9NN,GAAIO,GAAU,WACZ,GAAIipB,EACJ,OAAO,YAUL,WAToB,KAATA,IAMTA,EAAO3mB,QAAQpE,QAAUiB,UAAYA,SAAS+pB,MAAQhrB,OAAOirB,OAGxDF,MAIPH,EAAY,WACd,GAAIG,KACJ,OAAO,UAAkBnR,GACvB,OAA4B,KAAjBmR,EAAKnR,GAAyB,CACvC,GAAIsR,GAAcjqB,SAASO,cAAcoY,EAEzC,IAAI5Z,OAAOmrB,mBAAqBD,YAAuBlrB,QAAOmrB,kBAC5D,IAGED,EAAcA,EAAYE,gBAAgBjqB,KAC1C,MAAO4S,GAEPmX,EAAc,KAIlBH,EAAKnR,GAAUsR,EAGjB,MAAOH,GAAKnR,OAIZlZ,KA2FAiC,EAAc,WAChB,GAAIsB,KACJ,OAAO,UAAiBzB,EAAO0B,GAE7B,MADAD,GAAUzB,GAAS0B,EACZD,EAAUE,OAAOC,SAAS1G,KAAK,UAwDtCksB,EAAY,KACZ5nB,EAAmB,CAmCvBlH,GAAOD,QAAU,SAAUmD,EAAMgB,GAC/BA,EAAUA,MAGLA,EAAQ4qB,WAA0C,iBAAtB5qB,GAAQ4qB,YACvC5qB,EAAQ4qB,UAAY9nB,KAGtB9D,EAAOA,KACP,IAAIqtB,GAAkBrB,EAAahsB,EAAMgB,EACzC,OAAO,UAAgB+E,GAGrB,GAFAA,EAAUA,MAEsC,mBAA5C/H,OAAOS,UAAUwB,SAASxC,KAAKsI,GAAnC,CAIA,IAAK,GAAIzI,GAAI,EAAGA,EAAI+vB,EAAgBjtB,OAAQ9C,IAAK,CAC/C,GAAIyuB,GAAasB,EAAgB/vB,GAC7BkH,EAAQsnB,EAAqBC,EACjCrpB,GAAY8B,GAAO6nB,aAKrB,IAAK,GAFDiB,GAAqBtB,EAAajmB,EAAS/E,GAEtCusB,EAAK,EAAGA,EAAKF,EAAgBjtB,OAAQmtB,IAAM,CAClD,GAAIC,GAAcH,EAAgBE,GAE9BE,EAAS3B,EAAqB0B,EAEK,KAAnC9qB,EAAY+qB,GAAQpB,aACtB3pB,EAAY+qB,GAAQnB,UAEpB5pB,EAAYoP,OAAO2b,EAAQ,IAI/BJ,EAAkBC,Mb8xHhB,SAAUxwB,EAAQD,EAASM,GcxiIjCN,EAAUC,EAAOD,QAAU,EAAQ,IAAoD,GAKvFA,EAAQyD,MAAMxD,EAAOQ,EAAI,stIAAutI,MdijI1uI,SAAUR,EAAQD,Ie9iIxB,SAAW0L,GACP,YACA,IAAIU,GAAKV,EAAGtF,SAERrB,EAAS2G,EAAA,MACb,IAAK3G,OAC0B,KAApBA,EAAO8rB,UAAlB,CAEA,GAAIC,GAAO/rB,EAAO6K,KAAKyK,IACnB0W,EAAkB,gBAAkBrlB,GAAK,WACzCA,EAAGslB,eAAeC,mBAClB,WACA7kB,EAAG8kB,UAAUC,SAGbhtB,GACA+J,WAAY,EACZkjB,aAAc,IACdC,gBAAiB,GAGrBtsB,GAAO8rB,UAAY,SAAUrsB,GACzBnE,KAAKmE,GAAKA,EACVnE,KAAKolB,SAAW,KAChBplB,KAAKqlB,WAAa,KAClBrlB,KAAKixB,OAAS,KACdjxB,KAAKkxB,SAAW,EAChBlxB,KAAKmxB,SAAW,EAChBnxB,KAAKoxB,YAAc,KACnBpxB,KAAKqxB,YAAc,KACnBrxB,KAAKsxB,cAAgB,KACrBtxB,KAAKkpB,SAAW,EAChBlpB,KAAKopB,SAAW,EAChBppB,KAAK2iB,SAAW,EAChB3iB,KAAK4iB,SAAW,EAChB5iB,KAAKuxB,cAAgB,EACrBvxB,KAAKwxB,cAAgB,EACrBxxB,KAAKyxB,SAAU,EACfzxB,KAAK0xB,OAAQ,GAGjBhtB,EAAO8rB,UAAUjvB,WACb0C,KAAM,WACFjE,KAAK2xB,iBACL3xB,KAAK4xB,iBACL5xB,KAAK0d,eAGTzN,OAAQ,WACJjQ,KAAKmE,GAAGsJ,KAAKka,QAAQzhB,YAAYlG,KAAKixB,QACtCjxB,KAAKolB,SAAS7S,MAAQvS,KAAKmE,GAAGsJ,KAAK6T,KAAKhP,EACxCtS,KAAKolB,SAASrhB,OAAS/D,KAAKmE,GAAGsJ,KAAK6T,KAAKxW,GAG7C6mB,eAAgB,WACZ,GAAIlxB,GAAIsL,EAAG/F,cAAc,SACzBhG,MAAKmE,GAAGsJ,KAAKia,QAAQxhB,YAAYzF,EACjC,IAAIolB,GAAMplB,EAAE6kB,WAAW,KACvBtlB,MAAKolB,SAAW3kB,EAChBT,KAAKqlB,WAAaQ,GAGtB+L,eAAgB,WACZ,GAAIlwB,GAAIqK,EAAG/F,cAAc,SACzBtE,GAAEoL,MAAM+O,WAAa,SACrBna,EAAEoL,MAAMsd,OAAS,IACjB1oB,EAAEoL,MAAM+kB,OAAS,OACjBnwB,EAAEoL,MAAMglB,QAAU,MAClB9xB,KAAKixB,OAASvvB,GAGlBqwB,aAAc,SAAUnlB,GACpB,GAAIlL,GAAI1B,KAAKixB,OAAOnkB,KACpB9M,MAAKixB,OAAOvkB,UAAYE,EAAGF,UAC3BhL,EAAEsN,KAAOpC,EAAGE,MAAMkC,KAClBtN,EAAE4pB,IAAM1e,EAAGE,MAAMwe,IACjB5pB,EAAE6Q,MAAQ3F,EAAGE,MAAMyF,MACnB7Q,EAAEqC,OAAS6I,EAAGE,MAAM/I,OACpBrC,EAAEsqB,gBAAkBpf,EAAGE,MAAMkf,gBAC7BtqB,EAAEyqB,eAAiBvf,EAAGE,MAAMqf,eAC5BzqB,EAAEmpB,UAAYje,EAAGE,MAAM+d,UACvB7qB,KAAKkxB,SAAWlxB,KAAKixB,OAAO9H,YAC5BnpB,KAAKmxB,SAAWnxB,KAAKixB,OAAO5H,cAIhC2I,YAAa,WACJhyB,KAAK0xB,QACN1xB,KAAKixB,OAAOnkB,MAAM+O,WAAa,YAIvCoW,YAAa,WACTjyB,KAAKixB,OAAOnkB,MAAM+O,WAAa,UAGnCqW,eAAgB,SAAUzhB,GAChBA,IACFzQ,KAAKqlB,WAAWU,UAAYjiB,EAAQ+J,WACpC7N,KAAKqlB,WAAWS,YAAc,kBAC9B9lB,KAAKqlB,WAAWW,QAAU,QAC1BhmB,KAAKmyB,eACLnyB,KAAKoyB,eAAe3hB,EAAK4hB,GAAGpgB,EAAGxB,EAAK4hB,GAAGlgB,EAAG1B,EAAKid,GAAGzb,EAAGxB,EAAKid,GAAGvb,KAIrEggB,aAAc,WACVnyB,KAAKqlB,WAAWI,UAAU,EAAG,EAAGzlB,KAAKmE,GAAGsJ,KAAK6T,KAAKhP,EAAGtS,KAAKmE,GAAGsJ,KAAK6T,KAAKxW,IAG3EsnB,eAAgB,SAAU/L,EAAIC,EAAIC,EAAIC,GAClCxmB,KAAKqlB,WAAWoB,YAChBzmB,KAAKqlB,WAAWqB,OAAOL,EAAIC,GAC3BtmB,KAAKqlB,WAAWyB,OAAOP,EAAIC,GAC3BxmB,KAAKqlB,WAAWuB,UAGpB0L,mBAAoB,WAChB,GAUI7a,GAAI8a,EAVJ9yB,EAAOO,KAAKmE,GAAGmc,WACfkS,EAAgB/yB,EAAKsS,eACrB0gB,EAAYhzB,EAAK4S,WACjBqgB,EAASF,EAAcvgB,EAAIwgB,EAAUngB,EAAI,EAEzCqgB,EAAK3yB,KAAKkxB,SACV0B,EAAK5yB,KAAKmxB,SACV0B,EAAK7yB,KAAKixB,OAAO6B,WACjBC,EAAK/yB,KAAKixB,OAAO+B,UAIjBC,EAAUJ,EAAKF,EAAK,GAAMD,EAC1BhuB,EAAOmL,UAAUX,MAAQxK,EAAOmL,UAAUb,KAC1C0D,EAAQ1S,KAAKmE,GAAGwL,KAAK+C,MACrBjC,EAAO,KACPyiB,EAAeC,OAAOC,UACtBC,EAAW,EACXC,EAAe,KACfC,EAAY,KACZC,EAAW,IACf,KAAK,GAAI5gB,KAAUF,GAAO,CACtB,GAAIgb,GAAI2E,CAER,IADA5hB,EAAOiC,EAAME,GACTnC,EAAKU,QAAUV,EAAKZ,WAAaojB,EAAQ,CACzC,GAAIxiB,EAAKtN,IAAMnD,KAAKoxB,YAAYjuB,GAC5B,QAIJ,IAFAsU,EAAKhH,EAAK4B,WACVkgB,EAAK9hB,EAAKsB,eACNkhB,GAAUvuB,EAAOmL,UAAUX,MAAO,CAClC,GAAI2jB,EAAKN,EAAGtgB,EAAIwF,EAAGnF,GAAK,EAAK,QAC7B+gB,GAAWvW,KAAK2W,IAAIZ,EAAKN,EAAGtgB,EAAIwF,EAAGnF,GAAKwK,KAAK2W,IAAIV,EAAKH,EAAK,EAAIL,EAAGpgB,EAAIsF,EAAG3M,EAAI,GAC7E4iB,GAAOzb,EAAGsgB,EAAGtgB,EAAIwF,EAAGnF,EAAIxO,EAAQ+J,WAAYsE,EAAGogB,EAAGpgB,EAAIsF,EAAG3M,EAAI,GAC7DunB,GAAOpgB,EAAG4gB,EAAK/uB,EAAQ+J,WAAYsE,EAAG4gB,EAAKH,EAAK,OAC7C,CACH,GAAIL,EAAGtgB,EAAI4gB,EAAKF,GAAM,EAAK,QAC3BU,GAAWvW,KAAK2W,IAAIZ,EAAKF,EAAKJ,EAAGtgB,GAAK6K,KAAK2W,IAAIV,EAAKH,EAAK,EAAIL,EAAGpgB,EAAIsF,EAAG3M,EAAI,GAC3E4iB,GAAOzb,EAAGsgB,EAAGtgB,EAAInO,EAAQ+J,WAAYsE,EAAGogB,EAAGpgB,EAAIsF,EAAG3M,EAAI,GACtDunB,GAAOpgB,EAAG4gB,EAAKF,EAAK7uB,EAAQ+J,WAAYsE,EAAG4gB,EAAKH,EAAK,GAErDS,EAAWH,IACXI,EAAe7iB,EACf8iB,EAAY7F,EACZ8F,EAAWnB,EACXa,EAAeG,IAI3B,GAAIK,GAAc,IASlB,OARMJ,KACFI,GACIjjB,KAAM6iB,EACNzjB,UAAWojB,EACXZ,GAAImB,EACJ9F,GAAI6F,IAGLG,GAGXC,kBAAmB,WACf,GAAI7d,GAAY9V,KAAKsyB,oBACfxc,KACF9V,KAAKkyB,eAAepc,GACpB9V,KAAKqxB,YAAcvb,EAAUrF,KAC7BzQ,KAAKsxB,cAAgBxb,EAAUjG,YAIvC6N,YAAa,WACT,GAAIkW,GAAK5zB,KACLoN,EAAYpN,KAAKmE,GAAGsJ,KAAKL,SAC7BqjB,GAAKxW,UAAU7M,EAAW,YAAa,SAAUyL,GAC7C,GAAIoD,GAAMpD,GAAK8F,KACfiV,GAAGC,UAAUtzB,KAAKqzB,EAAI3X,KAE1BwU,EAAKxW,UAAU7M,EAAW,YAAa,SAAUyL,GAC7C,GAAIoD,GAAMpD,GAAK8F,KACfiV,GAAGE,KAAKvzB,KAAKqzB,EAAI3X,KAErBwU,EAAKxW,UAAU7M,EAAW,UAAW,SAAUyL,GAC3C,GAAIoD,GAAMpD,GAAK8F,KACfiV,GAAGG,QAAQxzB,KAAKqzB,EAAI3X,KAExBwU,EAAKxW,UAAU7M,EAAW,aAAc,SAAUyL,GAC9C,GAAIoD,GAAMpD,GAAK8F,KACfiV,GAAGC,UAAUtzB,KAAKqzB,EAAI3X,KAE1BwU,EAAKxW,UAAU7M,EAAW,YAAa,SAAUyL,GAC7C,GAAIoD,GAAMpD,GAAK8F,KACfiV,GAAGE,KAAKvzB,KAAKqzB,EAAI3X,KAErBwU,EAAKxW,UAAU7M,EAAW,WAAY,SAAUyL,GAC5C,GAAIoD,GAAMpD,GAAK8F,KACfiV,GAAGG,QAAQxzB,KAAKqzB,EAAI3X,MAI5B4X,UAAW,SAAUhb,GACjB,GAAK7Y,KAAKmE,GAAG8Z,iBACTje,KAAKyxB,QAAT,CACAzxB,KAAKoxB,YAAc,IAEnB,IAAI4C,GAAQh0B,KAAKmE,GAAGsJ,KAChBb,EAAKiM,EAAE6F,QAAUC,MAAMC,UAC3B,IAAgC,UAA5BhS,EAAG4K,QAAQ/O,cAAf,CACA,GAAImK,GAASohB,EAAMnV,kBAAkBjS,EACrC,IAAMgG,EAAQ,CACV,GAAInC,GAAOzQ,KAAKmE,GAAGwO,SAASC,EAC5B,KAAKnC,EAAKU,OAAQ,CACdnR,KAAK+xB,aAAanlB,GAClB5M,KAAKoxB,YAAc3gB,EACnBzQ,KAAK2iB,UAAY9J,EAAEob,SAAWpb,EAAEqb,QAAQ,GAAGD,SAAWrnB,EAAGkmB,WACzD9yB,KAAK4iB,UAAY/J,EAAEsb,SAAWtb,EAAEqb,QAAQ,GAAGC,SAAWvnB,EAAGomB,UACzDhzB,KAAKo0B,UAAYtX,KAAK+Q,MAAMjhB,EAAGuc,YAAc,GAC7CnpB,KAAKq0B,UAAYvX,KAAK+Q,MAAMjhB,EAAGyc,aAAe,GACpB,GAAtBrpB,KAAKuxB,eACLlmB,EAAGipB,aAAat0B,KAAKuxB,eAEC,GAAtBvxB,KAAKwxB,eACLnmB,EAAGkpB,cAAcv0B,KAAKwxB,cAE1B,IAAIoC,GAAK5zB,IACTA,MAAKuxB,cAAgBlmB,EAAGwW,WAAW,WAC/B+R,EAAGrC,cAAgB,EACnBqC,EAAGpC,cAAgBnmB,EAAGmpB,YAAY,WAC9BZ,EAAGD,kBAAkBpzB,KAAKqzB,IAC3B9vB,EAAQktB,kBACZltB,EAAQitB,cACX/wB,KAAKyxB,SAAU,OAK3BqC,KAAM,SAAUjb,GACZ,GAAK7Y,KAAKmE,GAAG8Z,gBACTje,KAAKyxB,QAAS,CACd5Y,EAAE2U,iBACFxtB,KAAKgyB,cACLhyB,KAAK0xB,OAAQ,EACbhB,GACA,IAAI+D,IAAM5b,EAAEob,SAAWpb,EAAEqb,QAAQ,GAAGD,SAAWj0B,KAAK2iB,SAChD+R,GAAM7b,EAAEsb,SAAWtb,EAAEqb,QAAQ,GAAGC,SAAWn0B,KAAK4iB,QACtC5iB,MAAKo0B,UACLp0B,KAAKq0B,SACnBr0B,MAAKixB,OAAOnkB,MAAMkC,KAAOylB,EAAK,KAC9Bz0B,KAAKixB,OAAOnkB,MAAMwe,IAAMoJ,EAAK,KAC7BhE,MAIRqD,QAAS,SAAUlb,GACf,GAAK7Y,KAAKmE,GAAG8Z,eAAb,CACA,GAAIje,KAAKyxB,QAAS,CAWd,GAV0B,GAAtBzxB,KAAKuxB,gBACLlmB,EAAGipB,aAAat0B,KAAKuxB,eACrBvxB,KAAKuxB,cAAgB,EACrBvxB,KAAKmyB,gBAEiB,GAAtBnyB,KAAKwxB,gBACLnmB,EAAGkpB,cAAcv0B,KAAKwxB,eACtBxxB,KAAKwxB,cAAgB,EACrBxxB,KAAKmyB,gBAELnyB,KAAK0xB,MAAO,CACZ,GAAIiD,GAAW30B,KAAKoxB,YAChBC,EAAcrxB,KAAKqxB,YACnBC,EAAgBtxB,KAAKsxB,aACzBtxB,MAAKmU,UAAUwgB,EAAUtD,EAAaC,GAE1CtxB,KAAKiyB,cAETjyB,KAAK0xB,OAAQ,EACb1xB,KAAKyxB,SAAU,IAGnBtd,UAAW,SAAUwgB,EAAUtD,EAAaC,GACxC,GAAIH,GAAWnxB,KAAKixB,OAAO+B,SAC3B,IAAM3B,GAAiBsD,IAAajwB,EAAO+L,KAAKmB,UAAU+iB,EAAUtD,GAAc,CAQ9E,IANA,GAAIuD,GAAgBvD,EAAYhgB,SAC5BwjB,EAAKD,EAAc1xB,OACnBuN,EAAO,KACPqkB,EAAU3B,OAAOC,UACjB1f,EAAc,KACdU,EAAW,SACRygB,KAEH,GADApkB,EAAOmkB,EAAcC,GACjBpkB,EAAKZ,WAAayhB,GAAiB7gB,EAAKtN,IAAMwxB,EAASxxB,GAAI,CAC3D,GAAI4xB,GAAKtkB,EAAKsB,eAAeI,EAAIgf,CAC7B4D,GAAK,GAAKA,EAAKD,IACfA,EAAUC,EACVrhB,EAAcjD,EACd2D,EAAW,WAIjBV,IAAeU,EAAWV,EAAYvQ,IAC5CnD,KAAKmE,GAAGgQ,UAAUwgB,EAASxxB,GAAIiR,EAAUid,EAAYluB,GAAImuB,GAE7DtxB,KAAKoxB,YAAc,KACnBpxB,KAAKqxB,YAAc,KACnBrxB,KAAKsxB,cAAgB,MAGzB0D,gBAAiB,SAAUpxB,EAAMM,GACzBN,IAASc,EAAOqL,WAAWE,QAC3BjQ,KAAKiQ,UAKjB,IAAIglB,GAAmB,GAAIvwB,GAAOqpB,OAAO,YAAa,SAAU5pB,GAC5D,GAAIyvB,GAAK,GAAIlvB,GAAO8rB,UAAUrsB,EAC9ByvB,GAAG3vB,OACHE,EAAGyd,mBAAmB,SAAUhe,EAAMM,GAClC0vB,EAAGoB,gBAAgBz0B,KAAKqzB,EAAIhwB,EAAMM,MAI1CQ,GAAOupB,gBAAgBgH,KAExBnwB,Sf8kIG,SAAUlF,EAAQD,IgBn6IxB,SAAW0L,GACP,YAEA,IACI3G,GAAS2G,EAAA,MACb,IAAK3G,OAC2B,KAArBA,EAAOwwB,WAAlB,CACA,GAAInpB,GAAKV,EAAGtF,SACRmG,EAAK,SAAUC,GAAO,MAAOJ,GAAG/F,cAAcmG,IAE9C/E,EAAM,SAAU+tB,EAAQC,GACxB,MAAOD,GAAOhL,iBAAiBiL,IAE/B1U,EAAa,SAAUyU,GACvB,GAAItZ,GAAazU,EAAI+tB,EAAQ,cACzBzJ,EAAUtkB,EAAI+tB,EAAQ,UAC1B,OAAuB,WAAftZ,GAAuC,SAAZ6P,GAEnC2J,IACJA,GAAQC,KAAO,SAAUzP,EAAK5T,EAAGE,EAAGG,EAAGxH,EAAGyI,GAClCjB,EAAI,EAAIiB,IAAGA,EAAIjB,EAAI,GACnBxH,EAAI,EAAIyI,IAAGA,EAAIzI,EAAI,GACvB+a,EAAIa,OAAOzU,EAAIsB,EAAGpB,GAClB0T,EAAI0P,MAAMtjB,EAAIK,EAAGH,EAAGF,EAAIK,EAAGH,EAAIrH,EAAGyI,GAClCsS,EAAI0P,MAAMtjB,EAAIK,EAAGH,EAAIrH,EAAGmH,EAAGE,EAAIrH,EAAGyI,GAClCsS,EAAI0P,MAAMtjB,EAAGE,EAAIrH,EAAGmH,EAAGE,EAAGoB,GAC1BsS,EAAI0P,MAAMtjB,EAAGE,EAAGF,EAAIK,EAAGH,EAAGoB,IAG9B8hB,EAAQG,eAAiB,SAAU3P,EAAK5I,EAAMhL,EAAGE,EAAGG,EAAGxH,EAAG2qB,GACtD,GAAItO,GAAO,GACPuO,EAAWzY,EAAK/Z,OAChByyB,EAAQ1Y,EAAK2Y,MAAM,IACnBC,EAAY,IAChBhQ,GAAIiQ,UAAY,OAChBjQ,EAAIkQ,aAAe,KACnB,KAAK,GAAI31B,GAAI,EAAGA,EAAIs1B,EAAUt1B,IAC1By1B,EAAY1O,EAAOwO,EAAMv1B,GACrBylB,EAAImQ,YAAYH,GAAWtjB,MAAQD,GAAKlS,EAAI,GAC5CylB,EAAIoQ,SAAS9O,EAAMlV,EAAGE,GACtBgV,EAAOwO,EAAMv1B,GACb+R,GAAKsjB,GAELtO,EAAO0O,CAGfhQ,GAAIoQ,SAAS9O,EAAMlV,EAAGE,IAG1BkjB,EAAQa,cAAgB,SAAUrQ,EAAK5I,EAAMhL,EAAGE,EAAGG,EAAGxH,GAClD,GAAIqrB,GAAWhkB,EAAIrH,EAAI,EACnBmS,EAAOoY,EAAQe,cAAcvQ,EAAK5I,EAAM3K,EAC5CuT,GAAIiQ,UAAY,OAChBjQ,EAAIkQ,aAAe,SACnBlQ,EAAIoQ,SAAShZ,EAAMhL,EAAGkkB,EAAU7jB,IAGpC+iB,EAAQe,cAAgB,SAAUvQ,EAAK5I,EAAMoZ,GACzC,GAAI9jB,GAAQsT,EAAImQ,YAAY/Y,GAAM1K,MAE9B+jB,EAAiBzQ,EAAImQ,YADV,KACgCzjB,KAC/C,IAAIA,GAAS8jB,GAAa9jB,GAAS+jB,EAC/B,MAAOrZ,EAGP,KADA,GAAIzI,GAAMyI,EAAK/Z,OACRqP,GAAS8jB,EAAYC,GAAkB9hB,KAAQ,GAClDyI,EAAOA,EAAKsZ,UAAU,EAAG/hB,GACzBjC,EAAQsT,EAAImQ,YAAY/Y,GAAM1K,KAElC,OAAO0K,GAVI,KAcnBoY,EAAQ5T,MAAQ,SAAUoE,EAAK9M,EAAK9G,EAAGE,EAAGG,EAAGxH,EAAGyI,EAAGmO,EAAUvI,GACzD,GAAIiO,GAAM,GAAIC,MACdD,GAAI1M,OAAS,WACTmL,EAAIhL,OACJgL,EAAI2Q,UAAUvkB,EAAGE,GACjB0T,EAAIhL,OACJgL,EAAIY,YACJ4O,EAAQC,KAAKzP,EAAK,EAAG,EAAGvT,EAAGxH,EAAGyI,GAC9BsS,EAAI4Q,YACJ5Q,EAAI6Q,OACJ7Q,EAAI2Q,UAAUlkB,EAAI,EAAGxH,EAAI,GACzB+a,EAAI8Q,OAAOjV,EAAW5E,KAAK8Z,GAAK,KAChC/Q,EAAIO,UAAUgB,GAAM9U,EAAI,GAAIxH,EAAI,GAChC+a,EAAIgR,UACJhR,EAAIgR,YACF1d,GAAYA,KAElBiO,EAAIE,IAAMvO,GAGdrU,EAAOwwB,WAAa,SAAU/wB,GAC1BnE,KAAKmE,GAAKA,EACVnE,KAAK82B,YAAc,KACnB92B,KAAKqlB,WAAa,KAClBrlB,KAAK+2B,SAAU,GAGnBryB,EAAOwwB,WAAW3zB,WACd0C,KAAM,WACF,IAAIjE,KAAK+2B,QAAT,CACAvrB,QAAQC,IAAI,OACZ,IAAIhL,GAAIyL,EAAG,UACP2Z,EAAMplB,EAAE6kB,WAAW,KAEvBtlB,MAAK82B,YAAcr2B,EACnBT,KAAKqlB,WAAaQ,EAClB7lB,KAAKmE,GAAGsJ,KAAKia,QAAQxhB,YAAYzF,GACjCT,KAAK+2B,SAAU,EACf/2B,KAAKiQ,WAGT+mB,MAAO,SAAU7d,GACbnZ,KAAKiE,OACLjE,KAAKi3B,MAAM,aACL9d,GAAYA,IACdnZ,KAAKk3B,SACPjwB,KAAKjH,OACPA,KAAKm3B,cAGTC,cAAe,WACXp3B,KAAKg3B,MAAM,WACPh3B,KAAKq3B,aACPpwB,KAAKjH,QAGXs3B,eAAgB,SAAUne,GACtBnZ,KAAKg3B,MAAM,aACL7d,GAAYA,EAASnZ,KAAK82B,YAAY5K,cAC1CjlB,KAAKjH,QAGXiQ,OAAQ,WACAjQ,KAAK+2B,UACL/2B,KAAK82B,YAAYvkB,MAAQvS,KAAKmE,GAAGsJ,KAAK6T,KAAKhP,EAC3CtS,KAAK82B,YAAY/yB,OAAS/D,KAAKmE,GAAGsJ,KAAK6T,KAAKxW,IAIpDosB,MAAO,WACH,GAAIz2B,GAAIT,KAAK82B,WACb92B,MAAKqlB,WAAWI,UAAU,EAAG,EAAGhlB,EAAE8R,MAAO9R,EAAEsD,SAG/CkzB,MAAO,SAAU9d,GACb,GAAI0M,GAAM7lB,KAAKqlB,UACfQ,GAAIiQ,UAAY,OAChBjQ,EAAIkQ,aAAe,MACnB/1B,KAAKu3B,YAAY,WACbv3B,KAAKw3B,YAAYre,IACnBlS,KAAKjH,QAGXm3B,WAAY,WACR,GAAI12B,GAAIT,KAAK82B,YACTjR,EAAM7lB,KAAKqlB,UACfQ,GAAIiQ,UAAY,QAChBjQ,EAAIkQ,aAAe,SACnBlQ,EAAI4R,UAAY,OAChB5R,EAAI6R,KAAO,0CACX7R,EAAIoQ,SAAS,4BAA6Bx1B,EAAE8R,MAAQ,IAAK9R,EAAEsD,OAAS,KACpE8hB,EAAIiQ,UAAY,OAChBjQ,EAAIoQ,SAAS5qB,EAAGgR,SAAU,IAAK5b,EAAEsD,OAAS,MAG9CwzB,YAAa,SAAUpe,GACnBnZ,KAAKmE,GAAGsJ,KAAKqa,MAAM5B,QAAQlmB,KAAKqlB,WAAYlM,IAGhDqe,YAAa,SAAUre,GAQnB,QAASwe,KACLnsB,QAAQC,IAAI,mBAAqB,GAAImR,MACrC,IAAIgb,IAAQ,CACZ,KAAK,GAAIhlB,KAAUF,GACfjC,EAAOiC,EAAME,GACbglB,GAAgBnnB,EAAKonB,KAGpBD,GAGDvsB,EAAGwW,WAAW1I,EAAU,KAFxB9N,EAAGwW,WAAW8V,EAAmB,KAhBzC,GACIlnB,GADAiC,EAAQ1S,KAAKmE,GAAGwL,KAAK+C,KAEzB,KAAK,GAAIE,KAAUF,GACfjC,EAAOiC,EAAME,GACb5S,KAAK83B,WAAWrnB,EAiBpBknB,MAGJG,WAAY,SAAUrnB,GAClB,GAAIoV,GAAM7lB,KAAKqlB,WACXnB,EAAYzT,EAAKa,MAAM7D,KACvB8d,EAAerH,EAAUzF,QACzBuL,EAAMC,iBAAiBsB,EAC3B,KAAK7K,EAAWsJ,GAEZ,YADAvZ,EAAKonB,OAAQ,EAIjB,IAAI1W,GAAU/Z,EAAI4iB,EAAK,oBACnB+N,EAAe7N,SAAS9iB,EAAI4iB,EAAK,2BACjC4B,EAAQxkB,EAAI4iB,EAAK,SACjBgO,EAAe9N,SAAS9iB,EAAI4iB,EAAK,iBACjCiO,EAAgB/N,SAAS9iB,EAAI4iB,EAAK,kBAClCkO,EAAchO,SAAS9iB,EAAI4iB,EAAK,gBAChCmO,EAAiBjO,SAAS9iB,EAAI4iB,EAAK,mBACnCoO,EAAgBhxB,EAAI4iB,EAAK,iBACzB0N,EAAOtwB,EAAI4iB,EAAK,cAAgB,IAChC5iB,EAAI4iB,EAAK,gBAAkB,IAC3B5iB,EAAI4iB,EAAK,eAAiB,IAC1B5iB,EAAI4iB,EAAK,aAAe,IAAM5iB,EAAI4iB,EAAK,eAAiB,IACxD5iB,EAAI4iB,EAAK,eAETqO,GACApmB,EAAGiS,EAAUhS,MACbC,EAAG+R,EAAU9R,MACbE,EAAG4R,EAAU3R,MAAQ,EACrBzH,EAAGoZ,EAAUngB,OAAS,GAEtBu0B,GACArmB,EAAGomB,EAAGpmB,EAAI+lB,EACV7lB,EAAGkmB,EAAGlmB,EAAI+lB,EACV5lB,EAAG+lB,EAAG/lB,EAAI0lB,EAAeC,EACzBntB,EAAGutB,EAAGvtB,EAAIotB,EAAcC,EAW5B,IARAtS,EAAI6R,KAAOA,EACX7R,EAAI4R,UAAYtW,EAChB0E,EAAIY,YACJ4O,EAAQC,KAAKzP,EAAKwS,EAAGpmB,EAAGomB,EAAGlmB,EAAGkmB,EAAG/lB,EAAG+lB,EAAGvtB,EAAGitB,GAC1ClS,EAAI4Q,YACJ5Q,EAAI0S,OAEJ1S,EAAI4R,UAAY7L,EACZ,oBAAsBnb,GAAKvM,KAAM,CACjC,GAAIs0B,GAAgBpxB,EAAI4iB,EAAK,oBAAoB9c,MAAM,GAAI,EAC3DuD,GAAKonB,OAAQ,CACb,IAAInW,GAAW,CACX,wBAAyBjR,GAAKvM,OAC9Bwd,EAAWjR,EAAKvM,KAAK,wBAEzBmxB,EAAQ5T,MAAMoE,EAAK2S,EAAeH,EAAGpmB,EAAGomB,EAAGlmB,EAAGkmB,EAAG/lB,EAAG+lB,EAAGvtB,EAAGitB,EAAcrW,EACpE,WACIjR,EAAKonB,OAAQ,IAGzB,GAAMpnB,EAAKS,MACP,GAAsB,aAAlBknB,EACA/C,EAAQa,cAAcrQ,EAAKpV,EAAKS,MAAOonB,EAAGrmB,EAAGqmB,EAAGnmB,EAAGmmB,EAAGhmB,EAAGgmB,EAAGxtB,OACzD,CACH,GAAI2tB,GAAcvO,SAAS9iB,EAAI4iB,EAAK,eACpCqL,GAAQG,eAAe3P,EAAKpV,EAAKS,MAAOonB,EAAGrmB,EAAGqmB,EAAGnmB,EAAGmmB,EAAGhmB,EAAGgmB,EAAGxtB,EAAG2tB,GAGlEvU,EAAUyF,UACZ3pB,KAAK04B,eAAexU,EAAUyF,UAE5B,oBAAsBlZ,GAAKvM,OAC7BuM,EAAKonB,OAAQ,IAIrBa,eAAgB,SAAU/O,GACtB,GAAI9D,GAAM7lB,KAAKqlB,WACX2E,EAAMC,iBAAiBN,EAC3B,IAAKjJ,EAAWsJ,GAAhB,CAEA,GAAI2O,GAAavxB,EAAI4iB,EAAK,QACtB4O,EAAYxxB,EAAI4iB,EAAK,OAErBhb,GADO5H,EAAI4iB,EAAK,QACTE,SAASyO,IAChBrN,EAAMpB,SAAS0O,GACfC,EAAiC,MAAvBlP,EAASjd,SAEvBmZ,GAAIE,UAAY,EAEhBF,EAAIY,YACJZ,EAAIiT,IAAI9pB,EAAO,EAAGsc,EAAM,EAAG,EAAG,EAAa,EAAVxO,KAAK8Z,IAAQ,GAC9C/Q,EAAIa,OAAO1X,EAAO,GAAIsc,EAAM,GAC5BzF,EAAIiB,OAAO9X,EAAO,EAAGsc,EAAM,GACvBuN,IACAhT,EAAIa,OAAO1X,EAAO,EAAGsc,EAAM,GAC3BzF,EAAIiB,OAAO9X,EAAO,EAAGsc,EAAM,KAE/BzF,EAAI4Q,YACJ5Q,EAAIe,WAGRyQ,UAAW,WACP,GAAI52B,GAAIT,KAAK82B,YACTn2B,EAAOX,KAAKmE,GAAGwL,KAAKhP,KAAO,MAE/B,IAAI2H,UAAUiT,YAAiB9a,EAAEs4B,SAAW,CACxC,GAAIje,GAAOra,EAAEs4B,UACbzwB,WAAUiT,WAAWT,EAAMna,OACxB,CACH,GAAI+a,GAAU1b,KAAK82B,YAAY5K,YAC3BtQ,EAAS1P,EAAG,IAChB,IAAI,YAAc0P,GAAQ,CACtBA,EAAO9O,MAAM+O,WAAa,SAC1BD,EAAOE,KAAOJ,EACdE,EAAOG,SAAWpb,EAClBoL,EAAGiQ,KAAK9V,YAAY0V,EACpB,IAAIK,GAAMlQ,EAAGmQ,YAAY,cACzBD,GAAIE,UAAU,SAAS,GAAM,GAC7BP,EAAOQ,cAAcH,GACrBlQ,EAAGiQ,KAAKrV,YAAYiV,OAEpBS,UAASP,KAAOJ,IAK5BsZ,gBAAiB,SAAUpxB,EAAMM,GACzBN,IAASc,EAAOqL,WAAWE,QAC3BjQ,KAAKiQ,UAKjB,IAAI+oB,GAAoB,GAAIt0B,GAAOqpB,OAAO,aAAc,SAAU5pB,GAC9D,GAAI80B,GAAM,GAAIv0B,GAAOwwB,WAAW/wB,EAChCA,GAAG+wB,WAAa+D,EAChB90B,EAAG6yB,MAAQ,WACPiC,EAAIjC,SAER7yB,EAAGyd,mBAAmB,SAAUhe,EAAMM,GAClC+0B,EAAIjE,gBAAgBz0B,KAAK04B,EAAKr1B,EAAMM,MAI5CQ,GAAOupB,gBAAgB+K,KAExBl0B,ShBq7IG,SAAUlF,EAAQyD,EAAqBpD,GAE7C,YiBpxJA,IAAI6J,GAAS,WAAa,GAAIovB,GAAIl5B,KAASm5B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,CAAG,OAAOE,GAAG,OAAOjpB,IAAI8oB,EAAI90B,QAAQ0I,OAAQ/I,OAAQm1B,EAAIn1B,UAAWs1B,EAAG,OAAOE,OAAO,GAAK,sBAAsBL,EAAIM,GAAG,KAAKN,EAAIO,GAAG,MACpN1vB,GAAmB,WAAa,GAAImvB,GAAIl5B,KAASm5B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,CAAG,OAAOE,GAAG,OAAOK,aAAa,QAAU,UAAUL,EAAG,SAASM,YAAY,OAAOJ,OAAO,KAAO,OAAO,GAAK,gBAAgB,OAAS,iBACnOK,GAAc9vB,OAAQA,EAAQC,gBAAiBA,EACpC","file":"build.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vue-jsMind\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-jsMind\"] = factory();\n\telse\n\t\troot[\"vue-jsMind\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4fc1592970019b72096a","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vue-jsMind\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-jsMind\"] = factory();\n\telse\n\t\troot[\"vue-jsMind\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__jsmind_js__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__jsmind_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__jsmind_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__jsmind_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__jsmind_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__jsmind_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__jsmind_draggable_js__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__jsmind_draggable_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__jsmind_draggable_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__jsmind_screenshot_js__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__jsmind_screenshot_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__jsmind_screenshot_js__);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: \"jsMind\",\n  props: {\n    values: {\n      type: Object,\n      required: true\n    },\n    options: {\n      type: Object\n    },\n    height: {\n      type: String,\n      required: true\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  },\n  data: function data() {\n    return {\n      jm: {},\n      refresh: 1,\n      value: {},\n      // 默认配置\n      default_options: {\n        container: \"jsmind_container\",\n        editable: true, // 是否启用编辑\n        theme: \"primary\", // 主题\n        mode: \"full\", // 显示模式\n        support_html: true, // 是否支持节点里的HTML元素\n        view: {\n          engine: \"canvas\", // 思维导图各节点之间线条的绘制引擎\n          hmargin: 100, // 思维导图距容器外框的最小水平距离\n          vmargin: 50, // 思维导图距容器外框的最小垂直距离\n          line_width: 2, // 思维导图线条的粗细\n          line_color: \"#555\" // 思维导图线条的颜色\n        },\n        layout: {\n          hspace: 30, // 节点之间的水平间距\n          vspace: 20, // 节点之间的垂直间距\n          pspace: 13 // 节点与连接线之间的水平间距（用于容纳节点收缩/展开控制器）\n        },\n        shortcut: {\n          enable: true, // 是否启用快捷键\n          handles: {\n            SavePNG: function SavePNG() {\n              this.jm.screenshot.shootDownload();\n            }\n          }, // 命名的快捷键事件处理器\n          mapping: {\n            // 快捷键映射\n            addchild: 45, // <Insert>\n            addbrother: 13, // <Enter>\n            editnode: 113, // <F2>\n            delnode: 46, // <Delete>\n            toggle: 32, // <Space>\n            left: 37, // <Left>\n            up: 38, // <Up>\n            right: 39, // <Right>\n            down: 40, // <Down>\n            SavePNG: jsMind.key.ctrl + 83\n          }\n        }\n      }\n    };\n  },\n  updated: function updated() {\n    this.init();\n  },\n\n  watch: {\n    options: function options() {\n      var _this = this;\n\n      this.$nextTick(function () {\n        _this.refresh++;\n      });\n    }\n  },\n  methods: {\n    init: function init() {\n      if (this.jm.get_data) {\n        this.value = this.jm.get_data();\n      } else {\n        this.value = this.values;\n      }\n      var options = Object.assign(this.default_options, this.options);\n      this.jm = window.jsMind.show(options, this.value);\n    }\n  }\n});\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__JsMind_vue__ = __webpack_require__(3);\n\n__WEBPACK_IMPORTED_MODULE_0__JsMind_vue__[\"a\" /* default */].install = function (Vue) {\n    Vue.component(__WEBPACK_IMPORTED_MODULE_0__JsMind_vue__[\"a\" /* default */].name, __WEBPACK_IMPORTED_MODULE_0__JsMind_vue__[\"a\" /* default */]);\n};\n\nif (typeof window !== 'undefined' && window.Vue) {\n    window.Vue.component(__WEBPACK_IMPORTED_MODULE_0__JsMind_vue__[\"a\" /* default */].name, __WEBPACK_IMPORTED_MODULE_0__JsMind_vue__[\"a\" /* default */]);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__WEBPACK_IMPORTED_MODULE_0__JsMind_vue__[\"a\" /* default */]);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_JsMind_vue__ = __webpack_require__(1);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7e05affa_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_JsMind_vue__ = __webpack_require__(16);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(4)\n}\nvar normalizeComponent = __webpack_require__(8)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7e05affa\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_JsMind_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7e05affa_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_JsMind_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(5);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(6)(\"5d40047c\", content, true, {});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"#jsmind_container[data-v-7e05affa]{height:100%}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\nvar listToStyles = __webpack_require__(7)\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nmodule.exports = function (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nmodule.exports = function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/*\n * Released under BSD License\n * Copyright (c) 2014-2016 hizzgdev@163.com\n *\n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n;(function ($w) {\n    'use strict';\n    // set 'jsMind' as the library name.\n    // __name__ should be a const value, Never try to change it easily.\n\n    var __name__ = 'jsMind';\n    // library version\n    var __version__ = '0.4.6';\n    // author\n    var __author__ = 'hizzgdev@163.com';\n\n    // an noop function define\n    var _noop = function _noop() {};\n    var logger = typeof console === 'undefined' ? {\n        log: _noop, debug: _noop, error: _noop, warn: _noop, info: _noop\n    } : console;\n\n    // check global variables\n    if (typeof module === 'undefined' || !module.exports) {\n        if (typeof $w[__name__] != 'undefined') {\n            logger.log(__name__ + ' has been already exist.');\n            return;\n        }\n    }\n\n    // shortcut of methods in dom\n    var $d = $w.document;\n    var $g = function $g(id) {\n        return $d.getElementById(id);\n    };\n    var $c = function $c(tag) {\n        return $d.createElement(tag);\n    };\n    var $t = function $t(n, t) {\n        if (n.hasChildNodes()) {\n            n.firstChild.nodeValue = t;\n        } else {\n            n.appendChild($d.createTextNode(t));\n        }\n    };\n\n    var $h = function $h(n, t) {\n        if (t instanceof HTMLElement) {\n            n.innerHTML = '';\n            n.appendChild(t);\n        } else {\n            n.innerHTML = t;\n        }\n    };\n    // detect isElement\n    var $i = function $i(el) {\n        return !!el && (typeof el === 'undefined' ? 'undefined' : _typeof(el)) === 'object' && el.nodeType === 1 && _typeof(el.style) === 'object' && _typeof(el.ownerDocument) === 'object';\n    };\n    if (typeof String.prototype.startsWith != 'function') {\n        String.prototype.startsWith = function (p) {\n            return this.slice(0, p.length) === p;\n        };\n    }\n\n    var DEFAULT_OPTIONS = {\n        container: '', // id of the container\n        editable: false, // you can change it in your options\n        theme: null,\n        mode: 'full', // full or side\n        support_html: true,\n\n        view: {\n            engine: 'canvas',\n            hmargin: 100,\n            vmargin: 50,\n            line_width: 2,\n            line_color: '#555'\n        },\n        layout: {\n            hspace: 30,\n            vspace: 20,\n            pspace: 13\n        },\n        default_event_handle: {\n            enable_mousedown_handle: true,\n            enable_click_handle: true,\n            enable_dblclick_handle: true\n        },\n        shortcut: {\n            enable: true,\n            handles: {},\n            mapping: {\n                addchild: 45, // Insert\n                addbrother: 13, // Enter\n                editnode: 113, // F2\n                delnode: 46, // Delete\n                toggle: 32, // Space\n                left: 37, // Left\n                up: 38, // Up\n                right: 39, // Right\n                down: 40 // Down\n            }\n        }\n    };\n\n    // core object\n    var jm = function jm(options) {\n        jm.current = this;\n\n        this.version = __version__;\n        var opts = {};\n        jm.util.json.merge(opts, DEFAULT_OPTIONS);\n        jm.util.json.merge(opts, options);\n\n        if (!opts.container) {\n            logger.error('the options.container should not be null or empty.');\n            return;\n        }\n        this.options = opts;\n        this.inited = false;\n        this.mind = null;\n        this.event_handles = [];\n        this.init();\n    };\n\n    // ============= static object =============================================\n    jm.direction = { left: -1, center: 0, right: 1 };\n    jm.event_type = { show: 1, resize: 2, edit: 3, select: 4 };\n    jm.key = { meta: 1 << 13, ctrl: 1 << 12, alt: 1 << 11, shift: 1 << 10 };\n\n    jm.node = function (sId, iIndex, sTopic, oData, bIsRoot, oParent, eDirection, bExpanded) {\n        if (!sId) {\n            logger.error('invalid nodeid');return;\n        }\n        if (typeof iIndex != 'number') {\n            logger.error('invalid node index');return;\n        }\n        if (typeof bExpanded === 'undefined') {\n            bExpanded = true;\n        }\n        this.id = sId;\n        this.index = iIndex;\n        this.topic = sTopic;\n        this.data = oData || {};\n        this.isroot = bIsRoot;\n        this.parent = oParent;\n        this.direction = eDirection;\n        this.expanded = !!bExpanded;\n        this.children = [];\n        this._data = {};\n    };\n\n    jm.node.compare = function (node1, node2) {\n        // '-1' is alwary the last\n        var r = 0;\n        var i1 = node1.index;\n        var i2 = node2.index;\n        if (i1 >= 0 && i2 >= 0) {\n            r = i1 - i2;\n        } else if (i1 == -1 && i2 == -1) {\n            r = 0;\n        } else if (i1 == -1) {\n            r = 1;\n        } else if (i2 == -1) {\n            r = -1;\n        } else {\n            r = 0;\n        }\n        //logger.debug(i1+' <> '+i2+'  =  '+r);\n        return r;\n    };\n\n    jm.node.inherited = function (pnode, node) {\n        if (!!pnode && !!node) {\n            if (pnode.id === node.id) {\n                return true;\n            }\n            if (pnode.isroot) {\n                return true;\n            }\n            var pid = pnode.id;\n            var p = node;\n            while (!p.isroot) {\n                p = p.parent;\n                if (p.id === pid) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n\n    jm.node.prototype = {\n        get_location: function get_location() {\n            var vd = this._data.view;\n            return {\n                x: vd.abs_x,\n                y: vd.abs_y\n            };\n        },\n        get_size: function get_size() {\n            var vd = this._data.view;\n            return {\n                w: vd.width,\n                h: vd.height\n            };\n        }\n    };\n\n    jm.mind = function () {\n        this.name = null;\n        this.author = null;\n        this.version = null;\n        this.root = null;\n        this.selected = null;\n        this.nodes = {};\n    };\n\n    jm.mind.prototype = {\n        get_node: function get_node(nodeid) {\n            if (nodeid in this.nodes) {\n                return this.nodes[nodeid];\n            } else {\n                logger.warn('the node[id=' + nodeid + '] can not be found');\n                return null;\n            }\n        },\n\n        set_root: function set_root(nodeid, topic, data) {\n            if (this.root == null) {\n                this.root = new jm.node(nodeid, 0, topic, data, true);\n                this._put_node(this.root);\n            } else {\n                logger.error('root node is already exist');\n            }\n        },\n\n        add_node: function add_node(parent_node, nodeid, topic, data, idx, direction, expanded) {\n            if (!jm.util.is_node(parent_node)) {\n                var the_parent_node = this.get_node(parent_node);\n                if (!the_parent_node) {\n                    logger.error('the parent_node[id=' + parent_node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.add_node(the_parent_node, nodeid, topic, data, idx, direction, expanded);\n                }\n            }\n            var nodeindex = idx || -1;\n            var node = null;\n            if (parent_node.isroot) {\n                var d = jm.direction.right;\n                if (isNaN(direction)) {\n                    var children = parent_node.children;\n                    var children_len = children.length;\n                    var r = 0;\n                    for (var i = 0; i < children_len; i++) {\n                        if (children[i].direction === jm.direction.left) {\n                            r--;\n                        } else {\n                            r++;\n                        }\n                    }\n                    d = children_len > 1 && r > 0 ? jm.direction.left : jm.direction.right;\n                } else {\n                    d = direction != jm.direction.left ? jm.direction.right : jm.direction.left;\n                }\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, d, expanded);\n            } else {\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, parent_node.direction, expanded);\n            }\n            if (this._put_node(node)) {\n                parent_node.children.push(node);\n                this._reindex(parent_node);\n            } else {\n                logger.error('fail, the nodeid \\'' + node.id + '\\' has been already exist.');\n                node = null;\n            }\n            return node;\n        },\n\n        insert_node_before: function insert_node_before(node_before, nodeid, topic, data) {\n            if (!jm.util.is_node(node_before)) {\n                var the_node_before = this.get_node(node_before);\n                if (!the_node_before) {\n                    logger.error('the node_before[id=' + node_before + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_before(the_node_before, nodeid, topic, data);\n                }\n            }\n            var node_index = node_before.index - 0.5;\n            return this.add_node(node_before.parent, nodeid, topic, data, node_index);\n        },\n\n        get_node_before: function get_node_before(node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_before(the_node);\n                }\n            }\n            if (node.isroot) {\n                return null;\n            }\n            var idx = node.index - 2;\n            if (idx >= 0) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        insert_node_after: function insert_node_after(node_after, nodeid, topic, data) {\n            if (!jm.util.is_node(node_after)) {\n                var the_node_after = this.get_node(node_before);\n                if (!the_node_after) {\n                    logger.error('the node_after[id=' + node_after + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_after(the_node_after, nodeid, topic, data);\n                }\n            }\n            var node_index = node_after.index + 0.5;\n            return this.add_node(node_after.parent, nodeid, topic, data, node_index);\n        },\n\n        get_node_after: function get_node_after(node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_after(the_node);\n                }\n            }\n            if (node.isroot) {\n                return null;\n            }\n            var idx = node.index;\n            var brothers = node.parent.children;\n            if (brothers.length >= idx) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        move_node: function move_node(node, beforeid, parentid, direction) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.move_node(the_node, beforeid, parentid, direction);\n                }\n            }\n            if (!parentid) {\n                parentid = node.parent.id;\n            }\n            return this._move_node(node, beforeid, parentid, direction);\n        },\n\n        _flow_node_direction: function _flow_node_direction(node, direction) {\n            if (typeof direction === 'undefined') {\n                direction = node.direction;\n            } else {\n                node.direction = direction;\n            }\n            var len = node.children.length;\n            while (len--) {\n                this._flow_node_direction(node.children[len], direction);\n            }\n        },\n\n        _move_node_internal: function _move_node_internal(node, beforeid) {\n            if (!!node && !!beforeid) {\n                if (beforeid == '_last_') {\n                    node.index = -1;\n                    this._reindex(node.parent);\n                } else if (beforeid == '_first_') {\n                    node.index = 0;\n                    this._reindex(node.parent);\n                } else {\n                    var node_before = !!beforeid ? this.get_node(beforeid) : null;\n                    if (node_before != null && node_before.parent != null && node_before.parent.id == node.parent.id) {\n                        node.index = node_before.index - 0.5;\n                        this._reindex(node.parent);\n                    }\n                }\n            }\n            return node;\n        },\n\n        _move_node: function _move_node(node, beforeid, parentid, direction) {\n            if (!!node && !!parentid) {\n                if (node.parent.id != parentid) {\n                    // remove from parent's children\n                    var sibling = node.parent.children;\n                    var si = sibling.length;\n                    while (si--) {\n                        if (sibling[si].id == node.id) {\n                            sibling.splice(si, 1);\n                            break;\n                        }\n                    }\n                    node.parent = this.get_node(parentid);\n                    node.parent.children.push(node);\n                }\n\n                if (node.parent.isroot) {\n                    if (direction == jm.direction.left) {\n                        node.direction = direction;\n                    } else {\n                        node.direction = jm.direction.right;\n                    }\n                } else {\n                    node.direction = node.parent.direction;\n                }\n                this._move_node_internal(node, beforeid);\n                this._flow_node_direction(node);\n            }\n            return node;\n        },\n\n        remove_node: function remove_node(node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (!node) {\n                logger.error('fail, the node can not be found');\n                return false;\n            }\n            if (node.isroot) {\n                logger.error('fail, can not remove root node');\n                return false;\n            }\n            if (this.selected != null && this.selected.id == node.id) {\n                this.selected = null;\n            }\n            // clean all subordinate nodes\n            var children = node.children;\n            var ci = children.length;\n            while (ci--) {\n                this.remove_node(children[ci]);\n            }\n            // clean all children\n            children.length = 0;\n            // remove from parent's children\n            var sibling = node.parent.children;\n            var si = sibling.length;\n            while (si--) {\n                if (sibling[si].id == node.id) {\n                    sibling.splice(si, 1);\n                    break;\n                }\n            }\n            // remove from global nodes\n            delete this.nodes[node.id];\n            // clean all properties\n            for (var k in node) {\n                delete node[k];\n            }\n            // remove it's self\n            node = null;\n            //delete node;\n            return true;\n        },\n\n        _put_node: function _put_node(node) {\n            if (node.id in this.nodes) {\n                logger.warn('the nodeid \\'' + node.id + '\\' has been already exist.');\n                return false;\n            } else {\n                this.nodes[node.id] = node;\n                return true;\n            }\n        },\n\n        _reindex: function _reindex(node) {\n            if (node instanceof jm.node) {\n                node.children.sort(jm.node.compare);\n                for (var i = 0; i < node.children.length; i++) {\n                    node.children[i].index = i + 1;\n                }\n            }\n        }\n    };\n\n    jm.format = {\n        node_tree: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_tree\",\n                \"data\": { \"id\": \"root\", \"topic\": \"jsMind Example\" }\n            },\n            get_mind: function get_mind(source) {\n                var df = jm.format.node_tree;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n            get_data: function get_data(mind) {\n                var df = jm.format.node_tree;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_tree';\n                json.data = df._buildnode(mind.root);\n                return json;\n            },\n\n            _parse: function _parse(mind, node_root) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_root);\n                mind.set_root(node_root.id, node_root.topic, data);\n                if ('children' in node_root) {\n                    var children = node_root.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, mind.root, children[i]);\n                    }\n                }\n            },\n\n            _extract_data: function _extract_data(node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'children' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _extract_subnode: function _extract_subnode(mind, node_parent, node_json) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_json);\n                var d = null;\n                if (node_parent.isroot) {\n                    d = node_json.direction == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                var node = mind.add_node(node_parent, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                if ('children' in node_json) {\n                    var children = node_json.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, node, children[i]);\n                    }\n                }\n            },\n\n            _buildnode: function _buildnode(node) {\n                var df = jm.format.node_tree;\n                if (!(node instanceof jm.node)) {\n                    return;\n                }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                var children = node.children;\n                if (children.length > 0) {\n                    o.children = [];\n                    for (var i = 0; i < children.length; i++) {\n                        o.children.push(df._buildnode(children[i]));\n                    }\n                }\n                return o;\n            }\n        },\n\n        node_array: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_array\",\n                \"data\": [{ \"id\": \"root\", \"topic\": \"jsMind Example\", \"isroot\": true }]\n            },\n\n            get_mind: function get_mind(source) {\n                var df = jm.format.node_array;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n\n            get_data: function get_data(mind) {\n                var df = jm.format.node_array;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_array';\n                json.data = [];\n                df._array(mind, json.data);\n                return json;\n            },\n\n            _parse: function _parse(mind, node_array) {\n                var df = jm.format.node_array;\n                var narray = node_array.slice(0);\n                // reverse array for improving looping performance\n                narray.reverse();\n                var root_id = df._extract_root(mind, narray);\n                if (!!root_id) {\n                    df._extract_subnode(mind, root_id, narray);\n                } else {\n                    logger.error('root node can not be found');\n                }\n            },\n\n            _extract_root: function _extract_root(mind, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                while (i--) {\n                    if ('isroot' in node_array[i] && node_array[i].isroot) {\n                        var root_json = node_array[i];\n                        var data = df._extract_data(root_json);\n                        mind.set_root(root_json.id, root_json.topic, data);\n                        node_array.splice(i, 1);\n                        return root_json.id;\n                    }\n                }\n                return null;\n            },\n\n            _extract_subnode: function _extract_subnode(mind, parentid, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                var node_json = null;\n                var data = null;\n                var extract_count = 0;\n                while (i--) {\n                    node_json = node_array[i];\n                    if (node_json.parentid == parentid) {\n                        data = df._extract_data(node_json);\n                        var d = null;\n                        var node_direction = node_json.direction;\n                        if (!!node_direction) {\n                            d = node_direction == 'left' ? jm.direction.left : jm.direction.right;\n                        }\n                        mind.add_node(parentid, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                        node_array.splice(i, 1);\n                        extract_count++;\n                        var sub_extract_count = df._extract_subnode(mind, node_json.id, node_array);\n                        if (sub_extract_count > 0) {\n                            // reset loop index after extract subordinate node\n                            i = node_array.length;\n                            extract_count += sub_extract_count;\n                        }\n                    }\n                }\n                return extract_count;\n            },\n\n            _extract_data: function _extract_data(node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'parentid' || k == 'isroot' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _array: function _array(mind, node_array) {\n                var df = jm.format.node_array;\n                df._array_node(mind.root, node_array);\n            },\n\n            _array_node: function _array_node(node, node_array) {\n                var df = jm.format.node_array;\n                if (!(node instanceof jm.node)) {\n                    return;\n                }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent) {\n                    o.parentid = node.parent.id;\n                }\n                if (node.isroot) {\n                    o.isroot = true;\n                }\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                node_array.push(o);\n                var ci = node.children.length;\n                for (var i = 0; i < ci; i++) {\n                    df._array_node(node.children[i], node_array);\n                }\n            }\n        },\n\n        freemind: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"freemind\",\n                \"data\": \"<map version=\\\"1.0.1\\\"><node ID=\\\"root\\\" TEXT=\\\"freemind Example\\\"/></map>\"\n            },\n            get_mind: function get_mind(source) {\n                var df = jm.format.freemind;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                var xml = source.data;\n                var xml_doc = df._parse_xml(xml);\n                var xml_root = df._find_root(xml_doc);\n                df._load_node(mind, null, xml_root);\n                return mind;\n            },\n\n            get_data: function get_data(mind) {\n                var df = jm.format.freemind;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'freemind';\n                var xmllines = [];\n                xmllines.push('<map version=\\\"1.0.1\\\">');\n                df._buildmap(mind.root, xmllines);\n                xmllines.push('</map>');\n                json.data = xmllines.join(' ');\n                return json;\n            },\n\n            _parse_xml: function _parse_xml(xml) {\n                var xml_doc = null;\n                if (window.DOMParser) {\n                    var parser = new DOMParser();\n                    xml_doc = parser.parseFromString(xml, 'text/xml');\n                } else {\n                    // Internet Explorer\n                    xml_doc = new ActiveXObject('Microsoft.XMLDOM');\n                    xml_doc.async = false;\n                    xml_doc.loadXML(xml);\n                }\n                return xml_doc;\n            },\n\n            _find_root: function _find_root(xml_doc) {\n                var nodes = xml_doc.childNodes;\n                var node = null;\n                var root = null;\n                var n = null;\n                for (var i = 0; i < nodes.length; i++) {\n                    n = nodes[i];\n                    if (n.nodeType == 1 && n.tagName == 'map') {\n                        node = n;\n                        break;\n                    }\n                }\n                if (!!node) {\n                    var ns = node.childNodes;\n                    node = null;\n                    for (var i = 0; i < ns.length; i++) {\n                        n = ns[i];\n                        if (n.nodeType == 1 && n.tagName == 'node') {\n                            node = n;\n                            break;\n                        }\n                    }\n                }\n                return node;\n            },\n\n            _load_node: function _load_node(mind, parent_id, xml_node) {\n                var df = jm.format.freemind;\n                var node_id = xml_node.getAttribute('ID');\n                var node_topic = xml_node.getAttribute('TEXT');\n                // look for richcontent\n                if (node_topic == null) {\n                    var topic_children = xml_node.childNodes;\n                    var topic_child = null;\n                    for (var i = 0; i < topic_children.length; i++) {\n                        topic_child = topic_children[i];\n                        //logger.debug(topic_child.tagName);\n                        if (topic_child.nodeType == 1 && topic_child.tagName === 'richcontent') {\n                            node_topic = topic_child.textContent;\n                            break;\n                        }\n                    }\n                }\n                var node_data = df._load_attributes(xml_node);\n                var node_expanded = 'expanded' in node_data ? node_data.expanded == 'true' : true;\n                delete node_data.expanded;\n\n                var node_position = xml_node.getAttribute('POSITION');\n                var node_direction = null;\n                if (!!node_position) {\n                    node_direction = node_position == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                //logger.debug(node_position +':'+ node_direction);\n                if (!!parent_id) {\n                    mind.add_node(parent_id, node_id, node_topic, node_data, null, node_direction, node_expanded);\n                } else {\n                    mind.set_root(node_id, node_topic, node_data);\n                }\n                var children = xml_node.childNodes;\n                var child = null;\n                for (var i = 0; i < children.length; i++) {\n                    child = children[i];\n                    if (child.nodeType == 1 && child.tagName == 'node') {\n                        df._load_node(mind, node_id, child);\n                    }\n                }\n            },\n\n            _load_attributes: function _load_attributes(xml_node) {\n                var children = xml_node.childNodes;\n                var attr = null;\n                var attr_data = {};\n                for (var i = 0; i < children.length; i++) {\n                    attr = children[i];\n                    if (attr.nodeType == 1 && attr.tagName === 'attribute') {\n                        attr_data[attr.getAttribute('NAME')] = attr.getAttribute('VALUE');\n                    }\n                }\n                return attr_data;\n            },\n\n            _buildmap: function _buildmap(node, xmllines) {\n                var df = jm.format.freemind;\n                var pos = null;\n                if (!!node.parent && node.parent.isroot) {\n                    pos = node.direction === jm.direction.left ? 'left' : 'right';\n                }\n                xmllines.push('<node');\n                xmllines.push('ID=\\\"' + node.id + '\\\"');\n                if (!!pos) {\n                    xmllines.push('POSITION=\\\"' + pos + '\\\"');\n                }\n                xmllines.push('TEXT=\\\"' + node.topic + '\\\">');\n\n                // store expanded status as an attribute\n                xmllines.push('<attribute NAME=\\\"expanded\\\" VALUE=\\\"' + node.expanded + '\\\"/>');\n\n                // for attributes\n                var node_data = node.data;\n                if (node_data != null) {\n                    for (var k in node_data) {\n                        xmllines.push('<attribute NAME=\\\"' + k + '\\\" VALUE=\\\"' + node_data[k] + '\\\"/>');\n                    }\n                }\n\n                // for children\n                var children = node.children;\n                for (var i = 0; i < children.length; i++) {\n                    df._buildmap(children[i], xmllines);\n                }\n\n                xmllines.push('</node>');\n            }\n        }\n    };\n\n    // ============= utility object =============================================\n\n    jm.util = {\n        is_node: function is_node(node) {\n            return !!node && node instanceof jm.node;\n        },\n        ajax: {\n            _xhr: function _xhr() {\n                var xhr = null;\n                if (window.XMLHttpRequest) {\n                    xhr = new XMLHttpRequest();\n                } else {\n                    try {\n                        xhr = new ActiveXObject('Microsoft.XMLHTTP');\n                    } catch (e) {}\n                }\n                return xhr;\n            },\n            _eurl: function _eurl(url) {\n                return encodeURIComponent(url);\n            },\n            request: function request(url, param, method, callback, fail_callback) {\n                var a = jm.util.ajax;\n                var p = null;\n                var tmp_param = [];\n                for (var k in param) {\n                    tmp_param.push(a._eurl(k) + '=' + a._eurl(param[k]));\n                }\n                if (tmp_param.length > 0) {\n                    p = tmp_param.join('&');\n                }\n                var xhr = a._xhr();\n                if (!xhr) {\n                    return;\n                }\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState == 4) {\n                        if (xhr.status == 200 || xhr.status == 0) {\n                            if (typeof callback === 'function') {\n                                var data = jm.util.json.string2json(xhr.responseText);\n                                if (data != null) {\n                                    callback(data);\n                                } else {\n                                    callback(xhr.responseText);\n                                }\n                            }\n                        } else {\n                            if (typeof fail_callback === 'function') {\n                                fail_callback(xhr);\n                            } else {\n                                logger.error('xhr request failed.', xhr);\n                            }\n                        }\n                    }\n                };\n                method = method || 'GET';\n                xhr.open(method, url, true);\n                xhr.setRequestHeader('If-Modified-Since', '0');\n                if (method == 'POST') {\n                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;charset=utf-8');\n                    xhr.send(p);\n                } else {\n                    xhr.send();\n                }\n            },\n            get: function get(url, callback) {\n                return jm.util.ajax.request(url, {}, 'GET', callback);\n            },\n            post: function post(url, param, callback) {\n                return jm.util.ajax.request(url, param, 'POST', callback);\n            }\n        },\n\n        dom: {\n            //target,eventType,handler\n            add_event: function add_event(t, e, h) {\n                if (!!t.addEventListener) {\n                    t.addEventListener(e, h, false);\n                } else {\n                    t.attachEvent('on' + e, h);\n                }\n            }\n        },\n\n        file: {\n            read: function read(file_data, fn_callback) {\n                var reader = new FileReader();\n                reader.onload = function () {\n                    if (typeof fn_callback === 'function') {\n                        fn_callback(this.result, file_data.name);\n                    }\n                };\n                reader.readAsText(file_data);\n            },\n\n            save: function save(file_data, type, name) {\n                var blob;\n                if (typeof $w.Blob === 'function') {\n                    blob = new Blob([file_data], { type: type });\n                } else {\n                    var BlobBuilder = $w.BlobBuilder || $w.MozBlobBuilder || $w.WebKitBlobBuilder || $w.MSBlobBuilder;\n                    var bb = new BlobBuilder();\n                    bb.append(file_data);\n                    blob = bb.getBlob(type);\n                }\n                if (navigator.msSaveBlob) {\n                    navigator.msSaveBlob(blob, name);\n                } else {\n                    var URL = $w.URL || $w.webkitURL;\n                    var bloburl = URL.createObjectURL(blob);\n                    var anchor = $c('a');\n                    if ('download' in anchor) {\n                        anchor.style.visibility = 'hidden';\n                        anchor.href = bloburl;\n                        anchor.download = name;\n                        $d.body.appendChild(anchor);\n                        var evt = $d.createEvent('MouseEvents');\n                        evt.initEvent('click', true, true);\n                        anchor.dispatchEvent(evt);\n                        $d.body.removeChild(anchor);\n                    } else {\n                        location.href = bloburl;\n                    }\n                }\n            }\n        },\n\n        json: {\n            json2string: function json2string(json) {\n                if (!!JSON) {\n                    try {\n                        var json_str = JSON.stringify(json);\n                        return json_str;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not convert to string');\n                        return null;\n                    }\n                }\n            },\n            string2json: function string2json(json_str) {\n                if (!!JSON) {\n                    try {\n                        var json = JSON.parse(json_str);\n                        return json;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not parse to json');\n                        return null;\n                    }\n                }\n            },\n            merge: function merge(b, a) {\n                for (var o in a) {\n                    if (o in b) {\n                        if (_typeof(b[o]) === 'object' && Object.prototype.toString.call(b[o]).toLowerCase() == '[object object]' && !b[o].length) {\n                            jm.util.json.merge(b[o], a[o]);\n                        } else {\n                            b[o] = a[o];\n                        }\n                    } else {\n                        b[o] = a[o];\n                    }\n                }\n                return b;\n            }\n        },\n\n        uuid: {\n            newid: function newid() {\n                return (new Date().getTime().toString(16) + Math.random().toString(16).substr(2)).substr(2, 16);\n            }\n        },\n\n        text: {\n            is_empty: function is_empty(s) {\n                if (!s) {\n                    return true;\n                }\n                return s.replace(/\\s*/, '').length == 0;\n            }\n        }\n    };\n\n    jm.prototype = {\n        init: function init() {\n            if (this.inited) {\n                return;\n            }\n            this.inited = true;\n\n            var opts = this.options;\n\n            var opts_layout = {\n                mode: opts.mode,\n                hspace: opts.layout.hspace,\n                vspace: opts.layout.vspace,\n                pspace: opts.layout.pspace\n            };\n            var opts_view = {\n                container: opts.container,\n                support_html: opts.support_html,\n                engine: opts.view.engine,\n                hmargin: opts.view.hmargin,\n                vmargin: opts.view.vmargin,\n                line_width: opts.view.line_width,\n                line_color: opts.view.line_color\n            };\n            // create instance of function provider\n            this.data = new jm.data_provider(this);\n            this.layout = new jm.layout_provider(this, opts_layout);\n            this.view = new jm.view_provider(this, opts_view);\n            this.shortcut = new jm.shortcut_provider(this, opts.shortcut);\n\n            this.data.init();\n            this.layout.init();\n            this.view.init();\n            this.shortcut.init();\n\n            this._event_bind();\n\n            jm.init_plugins(this);\n        },\n\n        enable_edit: function enable_edit() {\n            this.options.editable = true;\n        },\n\n        disable_edit: function disable_edit() {\n            this.options.editable = false;\n        },\n\n        // call enable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        enable_event_handle: function enable_event_handle(event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = true;\n        },\n\n        // call disable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        disable_event_handle: function disable_event_handle(event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = false;\n        },\n\n        get_editable: function get_editable() {\n            return this.options.editable;\n        },\n\n        set_theme: function set_theme(theme) {\n            var theme_old = this.options.theme;\n            this.options.theme = !!theme ? theme : null;\n            if (theme_old != this.options.theme) {\n                this.view.reset_theme();\n                this.view.reset_custom_style();\n            }\n        },\n        _event_bind: function _event_bind() {\n            this.view.add_event(this, 'mousedown', this.mousedown_handle);\n            this.view.add_event(this, 'click', this.click_handle);\n            this.view.add_event(this, 'dblclick', this.dblclick_handle);\n        },\n\n        mousedown_handle: function mousedown_handle(e) {\n            if (!this.options.default_event_handle['enable_mousedown_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var nodeid = this.view.get_binded_nodeid(element);\n            if (!!nodeid) {\n                if (element.tagName.toLowerCase() == 'jmnode') {\n                    this.select_node(nodeid);\n                }\n            } else {\n                this.select_clear();\n            }\n        },\n\n        click_handle: function click_handle(e) {\n            if (!this.options.default_event_handle['enable_click_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var isexpander = this.view.is_expander(element);\n            if (isexpander) {\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.toggle_node(nodeid);\n                }\n            }\n        },\n\n        dblclick_handle: function dblclick_handle(e) {\n            if (!this.options.default_event_handle['enable_dblclick_handle']) {\n                return;\n            }\n            if (this.get_editable()) {\n                var element = e.target || event.srcElement;\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.begin_edit(nodeid);\n                }\n            }\n        },\n\n        begin_edit: function begin_edit(node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.begin_edit(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                this.view.edit_node_begin(node);\n            } else {\n                logger.error('fail, this mind map is not editable.');\n                return;\n            }\n        },\n\n        end_edit: function end_edit() {\n            this.view.edit_node_end();\n        },\n\n        toggle_node: function toggle_node(node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.toggle_node(the_node);\n                }\n            }\n            if (node.isroot) {\n                return;\n            }\n            this.view.save_location(node);\n            this.layout.toggle_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_node: function expand_node(node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.expand_node(the_node);\n                }\n            }\n            if (node.isroot) {\n                return;\n            }\n            this.view.save_location(node);\n            this.layout.expand_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        collapse_node: function collapse_node(node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.collapse_node(the_node);\n                }\n            }\n            if (node.isroot) {\n                return;\n            }\n            this.view.save_location(node);\n            this.layout.collapse_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_all: function expand_all() {\n            this.layout.expand_all();\n            this.view.relayout();\n        },\n\n        collapse_all: function collapse_all() {\n            this.layout.collapse_all();\n            this.view.relayout();\n        },\n\n        expand_to_depth: function expand_to_depth(depth) {\n            this.layout.expand_to_depth(depth);\n            this.view.relayout();\n        },\n\n        _reset: function _reset() {\n            this.view.reset();\n            this.layout.reset();\n            this.data.reset();\n        },\n\n        _show: function _show(mind) {\n            var m = mind || jm.format.node_array.example;\n\n            this.mind = this.data.load(m);\n            if (!this.mind) {\n                logger.error('data.load error');\n                return;\n            } else {\n                logger.debug('data.load ok');\n            }\n\n            this.view.load();\n            logger.debug('view.load ok');\n\n            this.layout.layout();\n            logger.debug('layout.layout ok');\n\n            this.view.show(true);\n            logger.debug('view.show ok');\n\n            this.invoke_event_handle(jm.event_type.show, { data: [mind] });\n        },\n\n        show: function show(mind) {\n            this._reset();\n            this._show(mind);\n        },\n\n        get_meta: function get_meta() {\n            return {\n                name: this.mind.name,\n                author: this.mind.author,\n                version: this.mind.version\n            };\n        },\n\n        get_data: function get_data(data_format) {\n            var df = data_format || 'node_tree';\n            return this.data.get_data(df);\n        },\n\n        get_root: function get_root() {\n            return this.mind.root;\n        },\n\n        get_node: function get_node(nodeid) {\n            return this.mind.get_node(nodeid);\n        },\n\n        add_node: function add_node(parent_node, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var node = this.mind.add_node(parent_node, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.view.reset_node_custom_style(node);\n                    this.expand_node(parent_node);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'add_node', data: [parent_node.id, nodeid, topic, data], node: nodeid });\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_before: function insert_node_before(node_before, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var beforeid = jm.util.is_node(node_before) ? node_before.id : node_before;\n                var node = this.mind.insert_node_before(node_before, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_before', data: [beforeid, nodeid, topic, data], node: nodeid });\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_after: function insert_node_after(node_after, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var afterid = jm.util.is_node(node_after) ? node_after.id : node_after;\n                var node = this.mind.insert_node_after(node_after, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_after', data: [afterid, nodeid, topic, data], node: nodeid });\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        remove_node: function remove_node(node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                if (node.isroot) {\n                    logger.error('fail, can not remove root node');\n                    return false;\n                }\n                var nodeid = node.id;\n                var parentid = node.parent.id;\n                var parent_node = this.get_node(parentid);\n                this.view.save_location(parent_node);\n                this.view.remove_node(node);\n                this.mind.remove_node(node);\n                this.layout.layout();\n                this.view.show(false);\n                this.view.restore_location(parent_node);\n                this.invoke_event_handle(jm.event_type.edit, { evt: 'remove_node', data: [nodeid], node: parentid });\n                return true;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return false;\n            }\n        },\n\n        update_node: function update_node(nodeid, topic) {\n            if (this.get_editable()) {\n                if (jm.util.text.is_empty(topic)) {\n                    logger.warn('fail, topic can not be empty');\n                    return;\n                }\n                var node = this.get_node(nodeid);\n                if (!!node) {\n                    if (node.topic === topic) {\n                        logger.info('nothing changed');\n                        this.view.update_node(node);\n                        return;\n                    }\n                    node.topic = topic;\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'update_node', data: [nodeid, topic], node: nodeid });\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n\n        move_node: function move_node(nodeid, beforeid, parentid, direction) {\n            if (this.get_editable()) {\n                var node = this.mind.move_node(nodeid, beforeid, parentid, direction);\n                if (!!node) {\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'move_node', data: [nodeid, beforeid, parentid, direction], node: nodeid });\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n\n        select_node: function select_node(node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.select_node(the_node);\n                }\n            }\n            if (!this.layout.is_visible(node)) {\n                return;\n            }\n            this.mind.selected = node;\n            this.view.select_node(node);\n        },\n\n        get_selected_node: function get_selected_node() {\n            if (!!this.mind) {\n                return this.mind.selected;\n            } else {\n                return null;\n            }\n        },\n\n        select_clear: function select_clear() {\n            if (!!this.mind) {\n                this.mind.selected = null;\n                this.view.select_clear();\n            }\n        },\n\n        is_node_visible: function is_node_visible(node) {\n            return this.layout.is_visible(node);\n        },\n\n        find_node_before: function find_node_before(node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_before(the_node);\n                }\n            }\n            if (node.isroot) {\n                return null;\n            }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var prev = null;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (node.id === ni.id) {\n                            n = prev;\n                        }\n                        prev = ni;\n                    }\n                }\n            } else {\n                n = this.mind.get_node_before(node);\n            }\n            return n;\n        },\n\n        find_node_after: function find_node_after(node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_after(the_node);\n                }\n            }\n            if (node.isroot) {\n                return null;\n            }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var getthis = false;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (getthis) {\n                            n = ni;\n                            break;\n                        }\n                        if (node.id === ni.id) {\n                            getthis = true;\n                        }\n                    }\n                }\n            } else {\n                n = this.mind.get_node_after(node);\n            }\n            return n;\n        },\n\n        set_node_color: function set_node_color(nodeid, bgcolor, fgcolor) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!bgcolor) {\n                        node.data['background-color'] = bgcolor;\n                    }\n                    if (!!fgcolor) {\n                        node.data['foreground-color'] = fgcolor;\n                    }\n                    this.view.reset_node_custom_style(node);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_font_style: function set_node_font_style(nodeid, size, weight, style) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!size) {\n                        node.data['font-size'] = size;\n                    }\n                    if (!!weight) {\n                        node.data['font-weight'] = weight;\n                    }\n                    if (!!style) {\n                        node.data['font-style'] = style;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_image: function set_node_background_image(nodeid, image, width, height, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!image) {\n                        node.data['background-image'] = image;\n                    }\n                    if (!!width) {\n                        node.data['width'] = width;\n                    }\n                    if (!!height) {\n                        node.data['height'] = height;\n                    }\n                    if (!!rotation) {\n                        node.data['background-rotation'] = rotation;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_rotation: function set_node_background_rotation(nodeid, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!node.data['background-image']) {\n                        logger.error('fail, only can change rotation angle of node with background image');\n                        return null;\n                    }\n                    node.data['background-rotation'] = rotation;\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        resize: function resize() {\n            this.view.resize();\n        },\n\n        // callback(type ,data)\n        add_event_listener: function add_event_listener(callback) {\n            if (typeof callback === 'function') {\n                this.event_handles.push(callback);\n            }\n        },\n\n        invoke_event_handle: function invoke_event_handle(type, data) {\n            var j = this;\n            $w.setTimeout(function () {\n                j._invoke_event_handle(type, data);\n            }, 0);\n        },\n\n        _invoke_event_handle: function _invoke_event_handle(type, data) {\n            var l = this.event_handles.length;\n            for (var i = 0; i < l; i++) {\n                this.event_handles[i](type, data);\n            }\n        }\n\n    };\n\n    // ============= data provider =============================================\n\n    jm.data_provider = function (jm) {\n        this.jm = jm;\n    };\n\n    jm.data_provider.prototype = {\n        init: function init() {\n            logger.debug('data.init');\n        },\n\n        reset: function reset() {\n            logger.debug('data.reset');\n        },\n\n        load: function load(mind_data) {\n            var df = null;\n            var mind = null;\n            if ((typeof mind_data === 'undefined' ? 'undefined' : _typeof(mind_data)) === 'object') {\n                if (!!mind_data.format) {\n                    df = mind_data.format;\n                } else {\n                    df = 'node_tree';\n                }\n            } else {\n                df = 'freemind';\n            }\n\n            if (df == 'node_array') {\n                mind = jm.format.node_array.get_mind(mind_data);\n            } else if (df == 'node_tree') {\n                mind = jm.format.node_tree.get_mind(mind_data);\n            } else if (df == 'freemind') {\n                mind = jm.format.freemind.get_mind(mind_data);\n            } else {\n                logger.warn('unsupported format');\n            }\n            return mind;\n        },\n\n        get_data: function get_data(data_format) {\n            var data = null;\n            if (data_format == 'node_array') {\n                data = jm.format.node_array.get_data(this.jm.mind);\n            } else if (data_format == 'node_tree') {\n                data = jm.format.node_tree.get_data(this.jm.mind);\n            } else if (data_format == 'freemind') {\n                data = jm.format.freemind.get_data(this.jm.mind);\n            } else {\n                logger.error('unsupported ' + data_format + ' format');\n            }\n            return data;\n        }\n    };\n\n    // ============= layout provider ===========================================\n\n    jm.layout_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.isside = this.opts.mode == 'side';\n        this.bounds = null;\n\n        this.cache_valid = false;\n    };\n\n    jm.layout_provider.prototype = {\n        init: function init() {\n            logger.debug('layout.init');\n        },\n        reset: function reset() {\n            logger.debug('layout.reset');\n            this.bounds = { n: 0, s: 0, w: 0, e: 0 };\n        },\n        layout: function layout() {\n            logger.debug('layout.layout');\n            this.layout_direction();\n            this.layout_offset();\n        },\n\n        layout_direction: function layout_direction() {\n            this._layout_direction_root();\n        },\n\n        _layout_direction_root: function _layout_direction_root() {\n            var node = this.jm.mind.root;\n            // logger.debug(node);\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n            layout_data.direction = jm.direction.center;\n            layout_data.side_index = 0;\n            if (this.isside) {\n                var i = children_count;\n                while (i--) {\n                    this._layout_direction_side(children[i], jm.direction.right, i);\n                }\n            } else {\n                var i = children_count;\n                var subnode = null;\n                while (i--) {\n                    subnode = children[i];\n                    if (subnode.direction == jm.direction.left) {\n                        this._layout_direction_side(subnode, jm.direction.left, i);\n                    } else {\n                        this._layout_direction_side(subnode, jm.direction.right, i);\n                    }\n                }\n                /*\n                var boundary = Math.ceil(children_count/2);\n                var i = children_count;\n                while(i--){\n                    if(i>=boundary){\n                        this._layout_direction_side(children[i],jm.direction.left, children_count-i-1);\n                    }else{\n                        this._layout_direction_side(children[i],jm.direction.right, i);\n                    }\n                }*/\n            }\n        },\n\n        _layout_direction_side: function _layout_direction_side(node, direction, side_index) {\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n\n            layout_data.direction = direction;\n            layout_data.side_index = side_index;\n            var i = children_count;\n            while (i--) {\n                this._layout_direction_side(children[i], direction, i);\n            }\n        },\n\n        layout_offset: function layout_offset() {\n            var node = this.jm.mind.root;\n            var layout_data = node._data.layout;\n            layout_data.offset_x = 0;\n            layout_data.offset_y = 0;\n            layout_data.outer_height = 0;\n            var children = node.children;\n            var i = children.length;\n            var left_nodes = [];\n            var right_nodes = [];\n            var subnode = null;\n            while (i--) {\n                subnode = children[i];\n                if (subnode._data.layout.direction == jm.direction.right) {\n                    right_nodes.unshift(subnode);\n                } else {\n                    left_nodes.unshift(subnode);\n                }\n            }\n            layout_data.left_nodes = left_nodes;\n            layout_data.right_nodes = right_nodes;\n            layout_data.outer_height_left = this._layout_offset_subnodes(left_nodes);\n            layout_data.outer_height_right = this._layout_offset_subnodes(right_nodes);\n            this.bounds.e = node._data.view.width / 2;\n            this.bounds.w = 0 - this.bounds.e;\n            //logger.debug(this.bounds.w);\n            this.bounds.n = 0;\n            this.bounds.s = Math.max(layout_data.outer_height_left, layout_data.outer_height_right);\n        },\n\n        // layout both the x and y axis\n        _layout_offset_subnodes: function _layout_offset_subnodes(nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                    this.set_visible(node.children, false);\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                layout_data.offset_x = this.opts.hspace * layout_data.direction + pd.view.width * (pd.layout.direction + layout_data.direction) / 2;\n                if (!node.parent.isroot) {\n                    layout_data.offset_x += this.opts.pspace * layout_data.direction;\n                }\n\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n            }\n            return total_height;\n        },\n\n        // layout the y axis only, for collapse/expand a node\n        _layout_offset_subnodes_height: function _layout_offset_subnodes_height(nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes_height(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n                //logger.debug(node.topic);\n                //logger.debug(node._data.layout.offset_y);\n            }\n            return total_height;\n        },\n\n        get_node_offset: function get_node_offset(node) {\n            var layout_data = node._data.layout;\n            var offset_cache = null;\n            if ('_offset_' in layout_data && this.cache_valid) {\n                offset_cache = layout_data._offset_;\n            } else {\n                offset_cache = { x: -1, y: -1 };\n                layout_data._offset_ = offset_cache;\n            }\n            if (offset_cache.x == -1 || offset_cache.y == -1) {\n                var x = layout_data.offset_x;\n                var y = layout_data.offset_y;\n                if (!node.isroot) {\n                    var offset_p = this.get_node_offset(node.parent);\n                    x += offset_p.x;\n                    y += offset_p.y;\n                }\n                offset_cache.x = x;\n                offset_cache.y = y;\n            }\n            return offset_cache;\n        },\n\n        get_node_point: function get_node_point(node) {\n            var view_data = node._data.view;\n            var offset_p = this.get_node_offset(node);\n            //logger.debug(offset_p);\n            var p = {};\n            p.x = offset_p.x + view_data.width * (node._data.layout.direction - 1) / 2;\n            p.y = offset_p.y - view_data.height / 2;\n            //logger.debug(p);\n            return p;\n        },\n\n        get_node_point_in: function get_node_point_in(node) {\n            var p = this.get_node_offset(node);\n            return p;\n        },\n\n        get_node_point_out: function get_node_point_out(node) {\n            var layout_data = node._data.layout;\n            var pout_cache = null;\n            if ('_pout_' in layout_data && this.cache_valid) {\n                pout_cache = layout_data._pout_;\n            } else {\n                pout_cache = { x: -1, y: -1 };\n                layout_data._pout_ = pout_cache;\n            }\n            if (pout_cache.x == -1 || pout_cache.y == -1) {\n                if (node.isroot) {\n                    pout_cache.x = 0;\n                    pout_cache.y = 0;\n                } else {\n                    var view_data = node._data.view;\n                    var offset_p = this.get_node_offset(node);\n                    pout_cache.x = offset_p.x + (view_data.width + this.opts.pspace) * node._data.layout.direction;\n                    pout_cache.y = offset_p.y;\n                    //logger.debug('pout');\n                    //logger.debug(pout_cache);\n                }\n            }\n            return pout_cache;\n        },\n\n        get_expander_point: function get_expander_point(node) {\n            var p = this.get_node_point_out(node);\n            var ex_p = {};\n            if (node._data.layout.direction == jm.direction.right) {\n                ex_p.x = p.x - this.opts.pspace;\n            } else {\n                ex_p.x = p.x;\n            }\n            ex_p.y = p.y - Math.ceil(this.opts.pspace / 2);\n            return ex_p;\n        },\n\n        get_min_size: function get_min_size() {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pout = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                pout = this.get_node_point_out(node);\n                if (pout.x > this.bounds.e) {\n                    this.bounds.e = pout.x;\n                }\n                if (pout.x < this.bounds.w) {\n                    this.bounds.w = pout.x;\n                }\n            }\n            return {\n                w: this.bounds.e - this.bounds.w,\n                h: this.bounds.s - this.bounds.n\n            };\n        },\n\n        toggle_node: function toggle_node(node) {\n            if (node.isroot) {\n                return;\n            }\n            if (node.expanded) {\n                this.collapse_node(node);\n            } else {\n                this.expand_node(node);\n            }\n        },\n\n        expand_node: function expand_node(node) {\n            node.expanded = true;\n            this.part_layout(node);\n            this.set_visible(node.children, true);\n        },\n\n        collapse_node: function collapse_node(node) {\n            node.expanded = false;\n            this.part_layout(node);\n            this.set_visible(node.children, false);\n        },\n\n        expand_all: function expand_all() {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!node.expanded) {\n                    node.expanded = true;\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        collapse_all: function collapse_all() {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (node.expanded && !node.isroot) {\n                    node.expanded = false;\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        expand_to_depth: function expand_to_depth(target_depth, curr_nodes, curr_depth) {\n            if (target_depth < 1) {\n                return;\n            }\n            var nodes = curr_nodes || this.jm.mind.root.children;\n            var depth = curr_depth || 1;\n            var i = nodes.length;\n            var node = null;\n            while (i--) {\n                node = nodes[i];\n                if (depth < target_depth) {\n                    if (!node.expanded) {\n                        this.expand_node(node);\n                    }\n                    this.expand_to_depth(target_depth, node.children, depth + 1);\n                }\n                if (depth == target_depth) {\n                    if (node.expanded) {\n                        this.collapse_node(node);\n                    }\n                }\n            }\n        },\n\n        part_layout: function part_layout(node) {\n            var root = this.jm.mind.root;\n            if (!!root) {\n                var root_layout_data = root._data.layout;\n                if (node.isroot) {\n                    root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                } else {\n                    if (node._data.layout.direction == jm.direction.right) {\n                        root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    } else {\n                        root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                    }\n                }\n                this.bounds.s = Math.max(root_layout_data.outer_height_left, root_layout_data.outer_height_right);\n                this.cache_valid = false;\n            } else {\n                logger.warn('can not found root node');\n            }\n        },\n\n        set_visible: function set_visible(nodes, visible) {\n            var i = nodes.length;\n            var node = null;\n            var layout_data = null;\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (node.expanded) {\n                    this.set_visible(node.children, visible);\n                } else {\n                    this.set_visible(node.children, false);\n                }\n                if (!node.isroot) {\n                    node._data.layout.visible = visible;\n                }\n            }\n        },\n\n        is_expand: function is_expand(node) {\n            return node.expanded;\n        },\n\n        is_visible: function is_visible(node) {\n            var layout_data = node._data.layout;\n            if ('visible' in layout_data && !layout_data.visible) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n    };\n\n    jm.graph_canvas = function (view) {\n        this.opts = view.opts;\n        this.e_canvas = $c('canvas');\n        this.canvas_ctx = this.e_canvas.getContext('2d');\n        this.size = { w: 0, h: 0 };\n    };\n\n    jm.graph_canvas.prototype = {\n        element: function element() {\n            return this.e_canvas;\n        },\n\n        set_size: function set_size(w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_canvas.width = w;\n            this.e_canvas.height = h;\n        },\n\n        clear: function clear() {\n            this.canvas_ctx.clearRect(0, 0, this.size.w, this.size.h);\n        },\n\n        draw_line: function draw_line(pout, pin, offset) {\n            var ctx = this.canvas_ctx;\n            ctx.strokeStyle = this.opts.line_color;\n            ctx.lineWidth = this.opts.line_width;\n            ctx.lineCap = 'round';\n\n            this._bezier_to(ctx, pin.x + offset.x, pin.y + offset.y, pout.x + offset.x, pout.y + offset.y);\n        },\n\n        copy_to: function copy_to(dest_canvas_ctx, callback) {\n            dest_canvas_ctx.drawImage(this.e_canvas, 0, 0);\n            !!callback && callback();\n        },\n\n        _bezier_to: function _bezier_to(ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.bezierCurveTo(x1 + (x2 - x1) * 2 / 3, y1, x1, y2, x2, y2);\n            ctx.stroke();\n        },\n\n        _line_to: function _line_to(ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.lineTo(x2, y2);\n            ctx.stroke();\n        }\n    };\n\n    jm.graph_svg = function (view) {\n        this.view = view;\n        this.opts = view.opts;\n        this.e_svg = jm.graph_svg.c('svg');\n        this.size = { w: 0, h: 0 };\n        this.lines = [];\n    };\n\n    jm.graph_svg.c = function (tag) {\n        return $d.createElementNS('http://www.w3.org/2000/svg', tag);\n    };\n\n    jm.graph_svg.prototype = {\n        element: function element() {\n            return this.e_svg;\n        },\n\n        set_size: function set_size(w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_svg.setAttribute('width', w);\n            this.e_svg.setAttribute('height', h);\n        },\n\n        clear: function clear() {\n            var len = this.lines.length;\n            while (len--) {\n                this.e_svg.removeChild(this.lines[len]);\n            }\n            this.lines.length = 0;\n        },\n\n        draw_line: function draw_line(pout, pin, offset) {\n            var line = jm.graph_svg.c('path');\n            line.setAttribute('stroke', this.opts.line_color);\n            line.setAttribute('stroke-width', this.opts.line_width);\n            line.setAttribute('fill', 'transparent');\n            this.lines.push(line);\n            this.e_svg.appendChild(line);\n            this._bezier_to(line, pin.x + offset.x, pin.y + offset.y, pout.x + offset.x, pout.y + offset.y);\n        },\n\n        copy_to: function copy_to(dest_canvas_ctx, callback) {\n            var img = new Image();\n            img.onload = function () {\n                dest_canvas_ctx.drawImage(img, 0, 0);\n                !!callback && callback();\n            };\n            img.src = 'data:image/svg+xml;base64,' + btoa(new XMLSerializer().serializeToString(this.e_svg));\n        },\n\n        _bezier_to: function _bezier_to(path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M' + x1 + ' ' + y1 + ' C ' + (x1 + (x2 - x1) * 2 / 3) + ' ' + y1 + ', ' + x1 + ' ' + y2 + ', ' + x2 + ' ' + y2);\n        },\n\n        _line_to: function _line_to(path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' L ' + x2 + ' ' + y2);\n        }\n    };\n\n    // view provider\n    jm.view_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.layout = jm.layout;\n\n        this.container = null;\n        this.e_panel = null;\n        this.e_nodes = null;\n\n        this.size = { w: 0, h: 0 };\n\n        this.selected_node = null;\n        this.editing_node = null;\n\n        this.graph = null;\n    };\n\n    jm.view_provider.prototype = {\n        init: function init() {\n            logger.debug('view.init');\n\n            this.container = $i(this.opts.container) ? this.opts.container : $g(this.opts.container);\n            if (!this.container) {\n                logger.error('the options.view.container was not be found in dom');\n                return;\n            }\n            this.e_panel = $c('div');\n            this.e_nodes = $c('jmnodes');\n            this.e_editor = $c('input');\n\n            this.graph = this.opts.engine.toLowerCase() === 'svg' ? new jm.graph_svg(this) : new jm.graph_canvas(this);\n\n            this.e_panel.className = 'jsmind-inner';\n            this.e_panel.appendChild(this.graph.element());\n            this.e_panel.appendChild(this.e_nodes);\n\n            this.e_editor.className = 'jsmind-editor';\n            this.e_editor.type = 'text';\n\n            this.actualZoom = 1;\n            this.zoomStep = 0.1;\n            this.minZoom = 0.5;\n            this.maxZoom = 2;\n\n            var v = this;\n            jm.util.dom.add_event(this.e_editor, 'keydown', function (e) {\n                var evt = e || event;\n                if (evt.keyCode == 13) {\n                    v.edit_node_end();evt.stopPropagation();\n                }\n            });\n            jm.util.dom.add_event(this.e_editor, 'blur', function (e) {\n                v.edit_node_end();\n            });\n\n            this.container.appendChild(this.e_panel);\n        },\n\n        add_event: function add_event(obj, event_name, event_handle) {\n            jm.util.dom.add_event(this.e_nodes, event_name, function (e) {\n                var evt = e || event;\n                event_handle.call(obj, evt);\n            });\n        },\n\n        get_binded_nodeid: function get_binded_nodeid(element) {\n            if (element == null) {\n                return null;\n            }\n            var tagName = element.tagName.toLowerCase();\n            if (tagName == 'jmnodes' || tagName == 'body' || tagName == 'html') {\n                return null;\n            }\n            if (tagName == 'jmnode' || tagName == 'jmexpander') {\n                return element.getAttribute('nodeid');\n            } else {\n                return this.get_binded_nodeid(element.parentElement);\n            }\n        },\n\n        is_expander: function is_expander(element) {\n            return element.tagName.toLowerCase() == 'jmexpander';\n        },\n\n        reset: function reset() {\n            logger.debug('view.reset');\n            this.selected_node = null;\n            this.clear_lines();\n            this.clear_nodes();\n            this.reset_theme();\n        },\n\n        reset_theme: function reset_theme() {\n            var theme_name = this.jm.options.theme;\n            if (!!theme_name) {\n                this.e_nodes.className = 'theme-' + theme_name;\n            } else {\n                this.e_nodes.className = '';\n            }\n        },\n\n        reset_custom_style: function reset_custom_style() {\n            var nodes = this.jm.mind.nodes;\n            for (var nodeid in nodes) {\n                this.reset_node_custom_style(nodes[nodeid]);\n            }\n        },\n\n        load: function load() {\n            logger.debug('view.load');\n            this.init_nodes();\n        },\n\n        expand_size: function expand_size() {\n            var min_size = this.layout.get_min_size();\n            var min_width = min_size.w + this.opts.hmargin * 2;\n            var min_height = min_size.h + this.opts.vmargin * 2;\n            var client_w = this.e_panel.clientWidth;\n            var client_h = this.e_panel.clientHeight;\n            if (client_w < min_width) {\n                client_w = min_width;\n            }\n            if (client_h < min_height) {\n                client_h = min_height;\n            }\n            this.size.w = client_w;\n            this.size.h = client_h;\n        },\n\n        init_nodes_size: function init_nodes_size(node) {\n            var view_data = node._data.view;\n            view_data.width = view_data.element.clientWidth;\n            view_data.height = view_data.element.clientHeight;\n        },\n\n        init_nodes: function init_nodes() {\n            var nodes = this.jm.mind.nodes;\n            var doc_frag = $d.createDocumentFragment();\n            for (var nodeid in nodes) {\n                this.create_node_element(nodes[nodeid], doc_frag);\n            }\n            this.e_nodes.appendChild(doc_frag);\n            for (var nodeid in nodes) {\n                this.init_nodes_size(nodes[nodeid]);\n            }\n        },\n\n        add_node: function add_node(node) {\n            this.create_node_element(node, this.e_nodes);\n            this.init_nodes_size(node);\n        },\n\n        create_node_element: function create_node_element(node, parent_node) {\n            var view_data = null;\n            if ('view' in node._data) {\n                view_data = node._data.view;\n            } else {\n                view_data = {};\n                node._data.view = view_data;\n            }\n\n            var d = $c('jmnode');\n            if (node.isroot) {\n                d.className = 'root';\n            } else {\n                var d_e = $c('jmexpander');\n                $t(d_e, '-');\n                d_e.setAttribute('nodeid', node.id);\n                d_e.style.visibility = 'hidden';\n                parent_node.appendChild(d_e);\n                view_data.expander = d_e;\n            }\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(d, node.topic);\n                } else {\n                    $t(d, node.topic);\n                }\n            }\n            d.setAttribute('nodeid', node.id);\n            d.style.visibility = 'hidden';\n            this._reset_node_custom_style(d, node.data);\n\n            parent_node.appendChild(d);\n            view_data.element = d;\n        },\n\n        remove_node: function remove_node(node) {\n            if (this.selected_node != null && this.selected_node.id == node.id) {\n                this.selected_node = null;\n            }\n            if (this.editing_node != null && this.editing_node.id == node.id) {\n                node._data.view.element.removeChild(this.e_editor);\n                this.editing_node = null;\n            }\n            var children = node.children;\n            var i = children.length;\n            while (i--) {\n                this.remove_node(children[i]);\n            }\n            if (node._data.view) {\n                var element = node._data.view.element;\n                var expander = node._data.view.expander;\n                this.e_nodes.removeChild(element);\n                this.e_nodes.removeChild(expander);\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n        },\n\n        update_node: function update_node(node) {\n            var view_data = node._data.view;\n            var element = view_data.element;\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(element, node.topic);\n                } else {\n                    $t(element, node.topic);\n                }\n            }\n            view_data.width = element.clientWidth;\n            view_data.height = element.clientHeight;\n        },\n\n        select_node: function select_node(node) {\n            if (!!this.selected_node) {\n                this.selected_node._data.view.element.className = this.selected_node._data.view.element.className.replace(/\\s*selected\\b/i, '');\n                this.reset_node_custom_style(this.selected_node);\n            }\n            if (!!node) {\n                this.selected_node = node;\n                node._data.view.element.className += ' selected';\n                this.clear_node_custom_style(node);\n            }\n        },\n\n        select_clear: function select_clear() {\n            this.select_node(null);\n        },\n\n        get_editing_node: function get_editing_node() {\n            return this.editing_node;\n        },\n\n        is_editing: function is_editing() {\n            return !!this.editing_node;\n        },\n\n        edit_node_begin: function edit_node_begin(node) {\n            if (!node.topic) {\n                logger.warn(\"don't edit image nodes\");\n                return;\n            }\n            if (this.editing_node != null) {\n                this.edit_node_end();\n            }\n            this.editing_node = node;\n            var view_data = node._data.view;\n            var element = view_data.element;\n            var topic = node.topic;\n            var ncs = getComputedStyle(element);\n            this.e_editor.value = topic;\n            this.e_editor.style.width = element.clientWidth - parseInt(ncs.getPropertyValue('padding-left')) - parseInt(ncs.getPropertyValue('padding-right')) + 'px';\n            element.innerHTML = '';\n            element.appendChild(this.e_editor);\n            element.style.zIndex = 5;\n            this.e_editor.focus();\n            this.e_editor.select();\n        },\n\n        edit_node_end: function edit_node_end() {\n            if (this.editing_node != null) {\n                var node = this.editing_node;\n                this.editing_node = null;\n                var view_data = node._data.view;\n                var element = view_data.element;\n                var topic = this.e_editor.value;\n                element.style.zIndex = 'auto';\n                element.removeChild(this.e_editor);\n                if (jm.util.text.is_empty(topic) || node.topic === topic) {\n                    if (this.opts.support_html) {\n                        $h(element, node.topic);\n                    } else {\n                        $t(element, node.topic);\n                    }\n                } else {\n                    this.jm.update_node(node.id, topic);\n                }\n            }\n        },\n\n        get_view_offset: function get_view_offset() {\n            var bounds = this.layout.bounds;\n            var _x = (this.size.w - bounds.e - bounds.w) / 2;\n            var _y = this.size.h / 2;\n            return { x: _x, y: _y };\n        },\n\n        resize: function resize() {\n            this.graph.set_size(1, 1);\n            this.e_nodes.style.width = '1px';\n            this.e_nodes.style.height = '1px';\n\n            this.expand_size();\n            this._show();\n        },\n\n        _show: function _show() {\n            this.graph.set_size(this.size.w, this.size.h);\n            this.e_nodes.style.width = this.size.w + 'px';\n            this.e_nodes.style.height = this.size.h + 'px';\n            this.show_nodes();\n            this.show_lines();\n            //this.layout.cache_valid = true;\n            this.jm.invoke_event_handle(jm.event_type.resize, { data: [] });\n        },\n\n        zoomIn: function zoomIn() {\n            return this.setZoom(this.actualZoom + this.zoomStep);\n        },\n\n        zoomOut: function zoomOut() {\n            return this.setZoom(this.actualZoom - this.zoomStep);\n        },\n\n        setZoom: function setZoom(zoom) {\n            if (zoom < this.minZoom || zoom > this.maxZoom) {\n                return false;\n            }\n            this.actualZoom = zoom;\n            for (var i = 0; i < this.e_panel.children.length; i++) {\n                this.e_panel.children[i].style.transform = 'scale(' + zoom + ')';\n            };\n            this.show(true);\n            return true;\n        },\n\n        _center_root: function _center_root() {\n            // center root node\n            var outer_w = this.e_panel.clientWidth;\n            var outer_h = this.e_panel.clientHeight;\n            if (this.size.w > outer_w) {\n                var _offset = this.get_view_offset();\n                this.e_panel.scrollLeft = _offset.x - outer_w / 2;\n            }\n            if (this.size.h > outer_h) {\n                this.e_panel.scrollTop = (this.size.h - outer_h) / 2;\n            }\n        },\n\n        show: function show(keep_center) {\n            logger.debug('view.show');\n            this.expand_size();\n            this._show();\n            if (!!keep_center) {\n                this._center_root();\n            }\n        },\n\n        relayout: function relayout() {\n            this.expand_size();\n            this._show();\n        },\n\n        save_location: function save_location(node) {\n            var vd = node._data.view;\n            vd._saved_location = {\n                x: parseInt(vd.element.style.left) - this.e_panel.scrollLeft,\n                y: parseInt(vd.element.style.top) - this.e_panel.scrollTop\n            };\n        },\n\n        restore_location: function restore_location(node) {\n            var vd = node._data.view;\n            this.e_panel.scrollLeft = parseInt(vd.element.style.left) - vd._saved_location.x;\n            this.e_panel.scrollTop = parseInt(vd.element.style.top) - vd._saved_location.y;\n        },\n\n        clear_nodes: function clear_nodes() {\n            var mind = this.jm.mind;\n            if (mind == null) {\n                return;\n            }\n            var nodes = mind.nodes;\n            var node = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n            this.e_nodes.innerHTML = '';\n        },\n\n        show_nodes: function show_nodes() {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var node_element = null;\n            var expander = null;\n            var p = null;\n            var p_expander = null;\n            var expander_text = '-';\n            var view_data = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                view_data = node._data.view;\n                node_element = view_data.element;\n                expander = view_data.expander;\n                if (!this.layout.is_visible(node)) {\n                    node_element.style.display = 'none';\n                    expander.style.display = 'none';\n                    continue;\n                }\n                this.reset_node_custom_style(node);\n                p = this.layout.get_node_point(node);\n                view_data.abs_x = _offset.x + p.x;\n                view_data.abs_y = _offset.y + p.y;\n                node_element.style.left = _offset.x + p.x + 'px';\n                node_element.style.top = _offset.y + p.y + 'px';\n                node_element.style.display = '';\n                node_element.style.visibility = 'visible';\n                if (!node.isroot && node.children.length > 0) {\n                    expander_text = node.expanded ? '-' : '+';\n                    p_expander = this.layout.get_expander_point(node);\n                    expander.style.left = _offset.x + p_expander.x + 'px';\n                    expander.style.top = _offset.y + p_expander.y + 'px';\n                    expander.style.display = '';\n                    expander.style.visibility = 'visible';\n                    $t(expander, expander_text);\n                }\n                // hide expander while all children have been removed\n                if (!node.isroot && node.children.length == 0) {\n                    expander.style.display = 'none';\n                    expander.style.visibility = 'hidden';\n                }\n            }\n        },\n\n        reset_node_custom_style: function reset_node_custom_style(node) {\n            this._reset_node_custom_style(node._data.view.element, node.data);\n        },\n\n        _reset_node_custom_style: function _reset_node_custom_style(node_element, node_data) {\n            if ('background-color' in node_data) {\n                node_element.style.backgroundColor = node_data['background-color'];\n            }\n            if ('foreground-color' in node_data) {\n                node_element.style.color = node_data['foreground-color'];\n            }\n            if ('width' in node_data) {\n                node_element.style.width = node_data['width'] + 'px';\n            }\n            if ('height' in node_data) {\n                node_element.style.height = node_data['height'] + 'px';\n            }\n            if ('font-size' in node_data) {\n                node_element.style.fontSize = node_data['font-size'] + 'px';\n            }\n            if ('font-weight' in node_data) {\n                node_element.style.fontWeight = node_data['font-weight'];\n            }\n            if ('font-style' in node_data) {\n                node_element.style.fontStyle = node_data['font-style'];\n            }\n            if ('background-image' in node_data) {\n                var backgroundImage = node_data['background-image'];\n                if (backgroundImage.startsWith('data') && node_data['width'] && node_data['height']) {\n                    var img = new Image();\n\n                    img.onload = function () {\n                        var c = $c('canvas');\n                        c.width = node_element.clientWidth;\n                        c.height = node_element.clientHeight;\n                        var img = this;\n                        if (c.getContext) {\n                            var ctx = c.getContext('2d');\n                            ctx.drawImage(img, 2, 2, node_element.clientWidth, node_element.clientHeight);\n                            var scaledImageData = c.toDataURL();\n                            node_element.style.backgroundImage = 'url(' + scaledImageData + ')';\n                        }\n                    };\n                    img.src = backgroundImage;\n                } else {\n                    node_element.style.backgroundImage = 'url(' + backgroundImage + ')';\n                }\n                node_element.style.backgroundSize = '99%';\n\n                if ('background-rotation' in node_data) {\n                    node_element.style.transform = 'rotate(' + node_data['background-rotation'] + 'deg)';\n                }\n            }\n        },\n\n        clear_node_custom_style: function clear_node_custom_style(node) {\n            var node_element = node._data.view.element;\n            node_element.style.backgroundColor = \"\";\n            node_element.style.color = \"\";\n        },\n\n        clear_lines: function clear_lines() {\n            this.graph.clear();\n        },\n\n        show_lines: function show_lines() {\n            this.clear_lines();\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pin = null;\n            var pout = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!!node.isroot) {\n                    continue;\n                }\n                if ('visible' in node._data.layout && !node._data.layout.visible) {\n                    continue;\n                }\n                pin = this.layout.get_node_point_in(node);\n                pout = this.layout.get_node_point_out(node.parent);\n                this.graph.draw_line(pout, pin, _offset);\n            }\n        }\n    };\n\n    // shortcut provider\n    jm.shortcut_provider = function (jm, options) {\n        this.jm = jm;\n        this.opts = options;\n        this.mapping = options.mapping;\n        this.handles = options.handles;\n        this._mapping = {};\n    };\n\n    jm.shortcut_provider.prototype = {\n        init: function init() {\n            jm.util.dom.add_event($d, 'keydown', this.handler.bind(this));\n\n            this.handles['addchild'] = this.handle_addchild;\n            this.handles['addbrother'] = this.handle_addbrother;\n            this.handles['editnode'] = this.handle_editnode;\n            this.handles['delnode'] = this.handle_delnode;\n            this.handles['toggle'] = this.handle_toggle;\n            this.handles['up'] = this.handle_up;\n            this.handles['down'] = this.handle_down;\n            this.handles['left'] = this.handle_left;\n            this.handles['right'] = this.handle_right;\n\n            for (var handle in this.mapping) {\n                if (!!this.mapping[handle] && handle in this.handles) {\n                    this._mapping[this.mapping[handle]] = this.handles[handle];\n                }\n            }\n        },\n\n        enable_shortcut: function enable_shortcut() {\n            this.opts.enable = true;\n        },\n\n        disable_shortcut: function disable_shortcut() {\n            this.opts.enable = false;\n        },\n\n        handler: function handler(e) {\n            if (this.jm.view.is_editing()) {\n                return;\n            }\n            var evt = e || event;\n            if (!this.opts.enable) {\n                return true;\n            }\n            var kc = evt.keyCode + (evt.metaKey << 13) + (evt.ctrlKey << 12) + (evt.altKey << 11) + (evt.shiftKey << 10);\n            if (kc in this._mapping) {\n                this._mapping[kc].call(this, this.jm, e);\n            }\n        },\n\n        handle_addchild: function handle_addchild(_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.add_node(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_addbrother: function handle_addbrother(_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.insert_node_after(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_editnode: function handle_editnode(_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.begin_edit(selected_node);\n            }\n        },\n        handle_delnode: function handle_delnode(_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                _jm.select_node(selected_node.parent);\n                _jm.remove_node(selected_node);\n            }\n        },\n        handle_toggle: function handle_toggle(_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.toggle_node(selected_node.id);\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n        handle_up: function handle_up(_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var up_node = _jm.find_node_before(selected_node);\n                if (!up_node) {\n                    var np = _jm.find_node_before(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        up_node = np.children[np.children.length - 1];\n                    }\n                }\n                if (!!up_node) {\n                    _jm.select_node(up_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_down: function handle_down(_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var down_node = _jm.find_node_after(selected_node);\n                if (!down_node) {\n                    var np = _jm.find_node_after(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        down_node = np.children[0];\n                    }\n                }\n                if (!!down_node) {\n                    _jm.select_node(down_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_left: function handle_left(_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.left);\n        },\n        handle_right: function handle_right(_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.right);\n        },\n        _handle_direction: function _handle_direction(_jm, e, d) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            var node = null;\n            if (!!selected_node) {\n                if (selected_node.isroot) {\n                    var c = selected_node.children;\n                    var children = [];\n                    for (var i = 0; i < c.length; i++) {\n                        if (c[i].direction === d) {\n                            children.push(i);\n                        }\n                    }\n                    node = c[children[Math.floor((children.length - 1) / 2)]];\n                } else if (selected_node.direction === d) {\n                    var children = selected_node.children;\n                    var childrencount = children.length;\n                    if (childrencount > 0) {\n                        node = children[Math.floor((childrencount - 1) / 2)];\n                    }\n                } else {\n                    node = selected_node.parent;\n                }\n                if (!!node) {\n                    _jm.select_node(node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        }\n    };\n\n    // plugin\n    jm.plugin = function (name, init) {\n        this.name = name;\n        this.init = init;\n    };\n\n    jm.plugins = [];\n\n    jm.register_plugin = function (plugin) {\n        if (plugin instanceof jm.plugin) {\n            jm.plugins.push(plugin);\n        }\n    };\n\n    jm.init_plugins = function (sender) {\n        $w.setTimeout(function () {\n            jm._init_plugins(sender);\n        }, 0);\n    };\n\n    jm._init_plugins = function (sender) {\n        var l = jm.plugins.length;\n        var fn_init = null;\n        for (var i = 0; i < l; i++) {\n            fn_init = jm.plugins[i].init;\n            if (typeof fn_init === 'function') {\n                fn_init(sender);\n            }\n        }\n    };\n\n    // quick way\n    jm.show = function (options, mind) {\n        var _jm = new jm(options);\n        _jm.show(mind);\n        return _jm;\n    };\n\n    // export jsmind\n    if (typeof module !== 'undefined' && ( false ? 'undefined' : _typeof(exports)) === 'object') {\n        module.exports = jm;\n        $w[__name__] = jm;\n    } else if (true) {\n        !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n            return jm;\n        }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {\n        $w[__name__] = jm;\n    }\n})(typeof window !== 'undefined' ? window : global);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(10)))\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar api = __webpack_require__(12);\n            var content = __webpack_require__(13);\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce =  true ? __webpack_require__.nc : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".jsmind-inner{position:relative;overflow:auto;width:100%;height:100%;moz-user-select:-moz-none;-moz-user-select:none;-o-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}canvas{z-index:1}canvas,jmnodes{position:absolute}jmnodes{z-index:2;background-color:transparent}jmnode{cursor:default;max-width:400px;white-space:nowrap;text-overflow:ellipsis}jmexpander,jmnode{position:absolute;overflow:hidden}jmexpander{width:11px;height:11px;display:block;line-height:12px;font-size:12px;text-align:center;border-radius:6px;border-width:1px;border-style:solid;cursor:pointer}jmnode{padding:10px;background-color:#fff;color:#333;border-radius:5px;box-shadow:1px 1px 1px #666;font:16px/1.125 Verdana,Arial,Helvetica,sans-serif}jmnode:hover{box-shadow:2px 2px 8px #000;background-color:#ebebeb;color:#333}jmnode.selected{background-color:#11f;color:#fff;box-shadow:2px 2px 8px #000}jmnode.root{font-size:24px}jmexpander{border-color:gray}jmexpander:hover{border-color:#000}@media screen and (max-device-width:1024px){jmnode{padding:5px;border-radius:3px;font-size:14px}jmnode.root{font-size:21px}}jmnodes.theme-primary jmnode{background-color:#428bca;color:#fff;border-color:#357ebd}jmnodes.theme-primary jmnode:hover{background-color:#3276b1;border-color:#285e8e}jmnodes.theme-primary jmnode.selected{background-color:#f1c40f;color:#fff}jmnodes.theme-warning jmnode{background-color:#f0ad4e;border-color:#eea236;color:#fff}jmnodes.theme-warning jmnode:hover{background-color:#ed9c28;border-color:#d58512}jmnodes.theme-warning jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-danger jmnode{background-color:#d9534f;border-color:#d43f3a;color:#fff}jmnodes.theme-danger jmnode:hover{background-color:#d2322d;border-color:#ac2925}jmnodes.theme-danger jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-success jmnode{background-color:#5cb85c;border-color:#4cae4c;color:#fff}jmnodes.theme-success jmnode:hover{background-color:#47a447;border-color:#398439}jmnodes.theme-success jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-info jmnode{background-color:#5dc0de;border-color:#46b8da;color:#fff}jmnodes.theme-info jmnode:hover{background-color:#39b3d7;border-color:#269abc}jmnodes.theme-info jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-greensea jmnode{background-color:#1abc9c;color:#fff}jmnodes.theme-greensea jmnode:hover{background-color:#16a085}jmnodes.theme-greensea jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-nephrite jmnode{background-color:#2ecc71;color:#fff}jmnodes.theme-nephrite jmnode:hover{background-color:#27ae60}jmnodes.theme-nephrite jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-belizehole jmnode{background-color:#3498db;color:#fff}jmnodes.theme-belizehole jmnode:hover{background-color:#2980b9}jmnodes.theme-belizehole jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-wisteria jmnode{background-color:#9b59b6;color:#fff}jmnodes.theme-wisteria jmnode:hover{background-color:#8e44ad}jmnodes.theme-wisteria jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-asphalt jmnode{background-color:#34495e;color:#fff}jmnodes.theme-asphalt jmnode:hover{background-color:#2c3e50}jmnodes.theme-asphalt jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-orange jmnode{background-color:#f1c40f;color:#fff}jmnodes.theme-orange jmnode:hover{background-color:#f39c12}jmnodes.theme-orange jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-pumpkin jmnode{background-color:#e67e22;color:#fff}jmnodes.theme-pumpkin jmnode:hover{background-color:#d35400}jmnodes.theme-pumpkin jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-pomegranate jmnode{background-color:#e74c3c;color:#fff}jmnodes.theme-pomegranate jmnode:hover{background-color:#c0392b}jmnodes.theme-pomegranate jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-clouds jmnode{background-color:#ecf0f1;color:#333}jmnodes.theme-clouds jmnode:hover{background-color:#bdc3c7}jmnodes.theme-clouds jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-asbestos jmnode{background-color:#95a5a6;color:#fff}jmnodes.theme-asbestos jmnode:hover{background-color:#7f8c8d}jmnodes.theme-asbestos jmnode.selected{background-color:#11f;color:#fff}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n/*\n * Released under BSD License\n * Copyright (c) 2014-2015 hizzgdev@163.com\n * \n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n(function ($w) {\n    'use strict';\n\n    var $d = $w.document;\n    var __name__ = 'jsMind';\n    var jsMind = $w[__name__];\n    if (!jsMind) {\n        return;\n    }\n    if (typeof jsMind.draggable != 'undefined') {\n        return;\n    }\n\n    var jdom = jsMind.util.dom;\n    var clear_selection = 'getSelection' in $w ? function () {\n        $w.getSelection().removeAllRanges();\n    } : function () {\n        $d.selection.empty();\n    };\n\n    var options = {\n        line_width: 5,\n        lookup_delay: 500,\n        lookup_interval: 80\n    };\n\n    jsMind.draggable = function (jm) {\n        this.jm = jm;\n        this.e_canvas = null;\n        this.canvas_ctx = null;\n        this.shadow = null;\n        this.shadow_w = 0;\n        this.shadow_h = 0;\n        this.active_node = null;\n        this.target_node = null;\n        this.target_direct = null;\n        this.client_w = 0;\n        this.client_h = 0;\n        this.offset_x = 0;\n        this.offset_y = 0;\n        this.hlookup_delay = 0;\n        this.hlookup_timer = 0;\n        this.capture = false;\n        this.moved = false;\n    };\n\n    jsMind.draggable.prototype = {\n        init: function init() {\n            this._create_canvas();\n            this._create_shadow();\n            this._event_bind();\n        },\n\n        resize: function resize() {\n            this.jm.view.e_nodes.appendChild(this.shadow);\n            this.e_canvas.width = this.jm.view.size.w;\n            this.e_canvas.height = this.jm.view.size.h;\n        },\n\n        _create_canvas: function _create_canvas() {\n            var c = $d.createElement('canvas');\n            this.jm.view.e_panel.appendChild(c);\n            var ctx = c.getContext('2d');\n            this.e_canvas = c;\n            this.canvas_ctx = ctx;\n        },\n\n        _create_shadow: function _create_shadow() {\n            var s = $d.createElement('jmnode');\n            s.style.visibility = 'hidden';\n            s.style.zIndex = '3';\n            s.style.cursor = 'move';\n            s.style.opacity = '0.7';\n            this.shadow = s;\n        },\n\n        reset_shadow: function reset_shadow(el) {\n            var s = this.shadow.style;\n            this.shadow.innerHTML = el.innerHTML;\n            s.left = el.style.left;\n            s.top = el.style.top;\n            s.width = el.style.width;\n            s.height = el.style.height;\n            s.backgroundImage = el.style.backgroundImage;\n            s.backgroundSize = el.style.backgroundSize;\n            s.transform = el.style.transform;\n            this.shadow_w = this.shadow.clientWidth;\n            this.shadow_h = this.shadow.clientHeight;\n        },\n\n        show_shadow: function show_shadow() {\n            if (!this.moved) {\n                this.shadow.style.visibility = 'visible';\n            }\n        },\n\n        hide_shadow: function hide_shadow() {\n            this.shadow.style.visibility = 'hidden';\n        },\n\n        _magnet_shadow: function _magnet_shadow(node) {\n            if (!!node) {\n                this.canvas_ctx.lineWidth = options.line_width;\n                this.canvas_ctx.strokeStyle = 'rgba(0,0,0,0.3)';\n                this.canvas_ctx.lineCap = 'round';\n                this._clear_lines();\n                this._canvas_lineto(node.sp.x, node.sp.y, node.np.x, node.np.y);\n            }\n        },\n\n        _clear_lines: function _clear_lines() {\n            this.canvas_ctx.clearRect(0, 0, this.jm.view.size.w, this.jm.view.size.h);\n        },\n\n        _canvas_lineto: function _canvas_lineto(x1, y1, x2, y2) {\n            this.canvas_ctx.beginPath();\n            this.canvas_ctx.moveTo(x1, y1);\n            this.canvas_ctx.lineTo(x2, y2);\n            this.canvas_ctx.stroke();\n        },\n\n        _lookup_close_node: function _lookup_close_node() {\n            var root = this.jm.get_root();\n            var root_location = root.get_location();\n            var root_size = root.get_size();\n            var root_x = root_location.x + root_size.w / 2;\n\n            var sw = this.shadow_w;\n            var sh = this.shadow_h;\n            var sx = this.shadow.offsetLeft;\n            var sy = this.shadow.offsetTop;\n\n            var ns, nl;\n\n            var direct = sx + sw / 2 >= root_x ? jsMind.direction.right : jsMind.direction.left;\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var min_distance = Number.MAX_VALUE;\n            var distance = 0;\n            var closest_node = null;\n            var closest_p = null;\n            var shadow_p = null;\n            for (var nodeid in nodes) {\n                var np, sp;\n                node = nodes[nodeid];\n                if (node.isroot || node.direction == direct) {\n                    if (node.id == this.active_node.id) {\n                        continue;\n                    }\n                    ns = node.get_size();\n                    nl = node.get_location();\n                    if (direct == jsMind.direction.right) {\n                        if (sx - nl.x - ns.w <= 0) {\n                            continue;\n                        }\n                        distance = Math.abs(sx - nl.x - ns.w) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + ns.w - options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + options.line_width, y: sy + sh / 2 };\n                    } else {\n                        if (nl.x - sx - sw <= 0) {\n                            continue;\n                        }\n                        distance = Math.abs(sx + sw - nl.x) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + sw - options.line_width, y: sy + sh / 2 };\n                    }\n                    if (distance < min_distance) {\n                        closest_node = node;\n                        closest_p = np;\n                        shadow_p = sp;\n                        min_distance = distance;\n                    }\n                }\n            }\n            var result_node = null;\n            if (!!closest_node) {\n                result_node = {\n                    node: closest_node,\n                    direction: direct,\n                    sp: shadow_p,\n                    np: closest_p\n                };\n            }\n            return result_node;\n        },\n\n        lookup_close_node: function lookup_close_node() {\n            var node_data = this._lookup_close_node();\n            if (!!node_data) {\n                this._magnet_shadow(node_data);\n                this.target_node = node_data.node;\n                this.target_direct = node_data.direction;\n            }\n        },\n\n        _event_bind: function _event_bind() {\n            var jd = this;\n            var container = this.jm.view.container;\n            jdom.add_event(container, 'mousedown', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'mousemove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'mouseup', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchstart', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchmove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchend', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n        },\n\n        dragstart: function dragstart(e) {\n            if (!this.jm.get_editable()) {\n                return;\n            }\n            if (this.capture) {\n                return;\n            }\n            this.active_node = null;\n\n            var jview = this.jm.view;\n            var el = e.target || event.srcElement;\n            if (el.tagName.toLowerCase() != 'jmnode') {\n                return;\n            }\n            var nodeid = jview.get_binded_nodeid(el);\n            if (!!nodeid) {\n                var node = this.jm.get_node(nodeid);\n                if (!node.isroot) {\n                    this.reset_shadow(el);\n                    this.active_node = node;\n                    this.offset_x = (e.clientX || e.touches[0].clientX) - el.offsetLeft;\n                    this.offset_y = (e.clientY || e.touches[0].clientY) - el.offsetTop;\n                    this.client_hw = Math.floor(el.clientWidth / 2);\n                    this.client_hh = Math.floor(el.clientHeight / 2);\n                    if (this.hlookup_delay != 0) {\n                        $w.clearTimeout(this.hlookup_delay);\n                    }\n                    if (this.hlookup_timer != 0) {\n                        $w.clearInterval(this.hlookup_timer);\n                    }\n                    var jd = this;\n                    this.hlookup_delay = $w.setTimeout(function () {\n                        jd.hlookup_delay = 0;\n                        jd.hlookup_timer = $w.setInterval(function () {\n                            jd.lookup_close_node.call(jd);\n                        }, options.lookup_interval);\n                    }, options.lookup_delay);\n                    this.capture = true;\n                }\n            }\n        },\n\n        drag: function drag(e) {\n            if (!this.jm.get_editable()) {\n                return;\n            }\n            if (this.capture) {\n                e.preventDefault();\n                this.show_shadow();\n                this.moved = true;\n                clear_selection();\n                var px = (e.clientX || e.touches[0].clientX) - this.offset_x;\n                var py = (e.clientY || e.touches[0].clientY) - this.offset_y;\n                var cx = px + this.client_hw;\n                var cy = py + this.client_hh;\n                this.shadow.style.left = px + 'px';\n                this.shadow.style.top = py + 'px';\n                clear_selection();\n            }\n        },\n\n        dragend: function dragend(e) {\n            if (!this.jm.get_editable()) {\n                return;\n            }\n            if (this.capture) {\n                if (this.hlookup_delay != 0) {\n                    $w.clearTimeout(this.hlookup_delay);\n                    this.hlookup_delay = 0;\n                    this._clear_lines();\n                }\n                if (this.hlookup_timer != 0) {\n                    $w.clearInterval(this.hlookup_timer);\n                    this.hlookup_timer = 0;\n                    this._clear_lines();\n                }\n                if (this.moved) {\n                    var src_node = this.active_node;\n                    var target_node = this.target_node;\n                    var target_direct = this.target_direct;\n                    this.move_node(src_node, target_node, target_direct);\n                }\n                this.hide_shadow();\n            }\n            this.moved = false;\n            this.capture = false;\n        },\n\n        move_node: function move_node(src_node, target_node, target_direct) {\n            var shadow_h = this.shadow.offsetTop;\n            if (!!target_node && !!src_node && !jsMind.node.inherited(src_node, target_node)) {\n                // lookup before_node\n                var sibling_nodes = target_node.children;\n                var sc = sibling_nodes.length;\n                var node = null;\n                var delta_y = Number.MAX_VALUE;\n                var node_before = null;\n                var beforeid = '_last_';\n                while (sc--) {\n                    node = sibling_nodes[sc];\n                    if (node.direction == target_direct && node.id != src_node.id) {\n                        var dy = node.get_location().y - shadow_h;\n                        if (dy > 0 && dy < delta_y) {\n                            delta_y = dy;\n                            node_before = node;\n                            beforeid = '_first_';\n                        }\n                    }\n                }\n                if (!!node_before) {\n                    beforeid = node_before.id;\n                }\n                this.jm.move_node(src_node.id, beforeid, target_node.id, target_direct);\n            }\n            this.active_node = null;\n            this.target_node = null;\n            this.target_direct = null;\n        },\n\n        jm_event_handle: function jm_event_handle(type, data) {\n            if (type === jsMind.event_type.resize) {\n                this.resize();\n            }\n        }\n    };\n\n    var draggable_plugin = new jsMind.plugin('draggable', function (jm) {\n        var jd = new jsMind.draggable(jm);\n        jd.init();\n        jm.add_event_listener(function (type, data) {\n            jd.jm_event_handle.call(jd, type, data);\n        });\n    });\n\n    jsMind.register_plugin(draggable_plugin);\n})(window);\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n/*\n * Released under BSD License\n * Copyright (c) 2014-2015 hizzgdev@163.com\n * \n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n(function ($w) {\n    'use strict';\n\n    var __name__ = 'jsMind';\n    var jsMind = $w[__name__];\n    if (!jsMind) {\n        return;\n    }\n    if (typeof jsMind.screenshot != 'undefined') {\n        return;\n    }\n    var $d = $w.document;\n    var $c = function $c(tag) {\n        return $d.createElement(tag);\n    };\n\n    var css = function css(cstyle, property_name) {\n        return cstyle.getPropertyValue(property_name);\n    };\n    var is_visible = function is_visible(cstyle) {\n        var visibility = css(cstyle, 'visibility');\n        var display = css(cstyle, 'display');\n        return visibility !== 'hidden' && display !== 'none';\n    };\n    var jcanvas = {};\n    jcanvas.rect = function (ctx, x, y, w, h, r) {\n        if (w < 2 * r) r = w / 2;\n        if (h < 2 * r) r = h / 2;\n        ctx.moveTo(x + r, y);\n        ctx.arcTo(x + w, y, x + w, y + h, r);\n        ctx.arcTo(x + w, y + h, x, y + h, r);\n        ctx.arcTo(x, y + h, x, y, r);\n        ctx.arcTo(x, y, x + w, y, r);\n    };\n\n    jcanvas.text_multiline = function (ctx, text, x, y, w, h, lineheight) {\n        var line = '';\n        var text_len = text.length;\n        var chars = text.split('');\n        var test_line = null;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'top';\n        for (var i = 0; i < text_len; i++) {\n            test_line = line + chars[i];\n            if (ctx.measureText(test_line).width > w && i > 0) {\n                ctx.fillText(line, x, y);\n                line = chars[i];\n                y += lineheight;\n            } else {\n                line = test_line;\n            }\n        }\n        ctx.fillText(line, x, y);\n    };\n\n    jcanvas.text_ellipsis = function (ctx, text, x, y, w, h) {\n        var center_y = y + h / 2;\n        var text = jcanvas.fittingString(ctx, text, w);\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'middle';\n        ctx.fillText(text, x, center_y, w);\n    };\n\n    jcanvas.fittingString = function (ctx, text, max_width) {\n        var width = ctx.measureText(text).width;\n        var ellipsis = '…';\n        var ellipsis_width = ctx.measureText(ellipsis).width;\n        if (width <= max_width || width <= ellipsis_width) {\n            return text;\n        } else {\n            var len = text.length;\n            while (width >= max_width - ellipsis_width && len-- > 0) {\n                text = text.substring(0, len);\n                width = ctx.measureText(text).width;\n            }\n            return text + ellipsis;\n        }\n    };\n\n    jcanvas.image = function (ctx, url, x, y, w, h, r, rotation, callback) {\n        var img = new Image();\n        img.onload = function () {\n            ctx.save();\n            ctx.translate(x, y);\n            ctx.save();\n            ctx.beginPath();\n            jcanvas.rect(ctx, 0, 0, w, h, r);\n            ctx.closePath();\n            ctx.clip();\n            ctx.translate(w / 2, h / 2);\n            ctx.rotate(rotation * Math.PI / 180);\n            ctx.drawImage(img, -w / 2, -h / 2);\n            ctx.restore();\n            ctx.restore();\n            !!callback && callback();\n        };\n        img.src = url;\n    };\n\n    jsMind.screenshot = function (jm) {\n        this.jm = jm;\n        this.canvas_elem = null;\n        this.canvas_ctx = null;\n        this._inited = false;\n    };\n\n    jsMind.screenshot.prototype = {\n        init: function init() {\n            if (this._inited) {\n                return;\n            }\n            console.log('init');\n            var c = $c('canvas');\n            var ctx = c.getContext('2d');\n\n            this.canvas_elem = c;\n            this.canvas_ctx = ctx;\n            this.jm.view.e_panel.appendChild(c);\n            this._inited = true;\n            this.resize();\n        },\n\n        shoot: function shoot(callback) {\n            this.init();\n            this._draw(function () {\n                !!callback && callback();\n                this.clean();\n            }.bind(this));\n            this._watermark();\n        },\n\n        shootDownload: function shootDownload() {\n            this.shoot(function () {\n                this._download();\n            }.bind(this));\n        },\n\n        shootAsDataURL: function shootAsDataURL(callback) {\n            this.shoot(function () {\n                !!callback && callback(this.canvas_elem.toDataURL());\n            }.bind(this));\n        },\n\n        resize: function resize() {\n            if (this._inited) {\n                this.canvas_elem.width = this.jm.view.size.w;\n                this.canvas_elem.height = this.jm.view.size.h;\n            }\n        },\n\n        clean: function clean() {\n            var c = this.canvas_elem;\n            this.canvas_ctx.clearRect(0, 0, c.width, c.height);\n        },\n\n        _draw: function _draw(callback) {\n            var ctx = this.canvas_ctx;\n            ctx.textAlign = 'left';\n            ctx.textBaseline = 'top';\n            this._draw_lines(function () {\n                this._draw_nodes(callback);\n            }.bind(this));\n        },\n\n        _watermark: function _watermark() {\n            var c = this.canvas_elem;\n            var ctx = this.canvas_ctx;\n            ctx.textAlign = 'right';\n            ctx.textBaseline = 'bottom';\n            ctx.fillStyle = '#000';\n            ctx.font = '11px Verdana,Arial,Helvetica,sans-serif';\n            ctx.fillText('hizzgdev.github.io/jsmind', c.width - 5.5, c.height - 2.5);\n            ctx.textAlign = 'left';\n            ctx.fillText($w.location, 5.5, c.height - 2.5);\n        },\n\n        _draw_lines: function _draw_lines(callback) {\n            this.jm.view.graph.copy_to(this.canvas_ctx, callback);\n        },\n\n        _draw_nodes: function _draw_nodes(callback) {\n            var nodes = this.jm.mind.nodes;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                this._draw_node(node);\n            }\n\n            function check_nodes_ready() {\n                console.log('check_node_ready' + new Date());\n                var allOk = true;\n                for (var nodeid in nodes) {\n                    node = nodes[nodeid];\n                    allOk = allOk & node.ready;\n                }\n\n                if (!allOk) {\n                    $w.setTimeout(check_nodes_ready, 200);\n                } else {\n                    $w.setTimeout(callback, 200);\n                }\n            }\n            check_nodes_ready();\n        },\n\n        _draw_node: function _draw_node(node) {\n            var ctx = this.canvas_ctx;\n            var view_data = node._data.view;\n            var node_element = view_data.element;\n            var ncs = getComputedStyle(node_element);\n            if (!is_visible(ncs)) {\n                node.ready = true;\n                return;\n            }\n\n            var bgcolor = css(ncs, 'background-color');\n            var round_radius = parseInt(css(ncs, 'border-top-left-radius'));\n            var color = css(ncs, 'color');\n            var padding_left = parseInt(css(ncs, 'padding-left'));\n            var padding_right = parseInt(css(ncs, 'padding-right'));\n            var padding_top = parseInt(css(ncs, 'padding-top'));\n            var padding_bottom = parseInt(css(ncs, 'padding-bottom'));\n            var text_overflow = css(ncs, 'text-overflow');\n            var font = css(ncs, 'font-style') + ' ' + css(ncs, 'font-variant') + ' ' + css(ncs, 'font-weight') + ' ' + css(ncs, 'font-size') + '/' + css(ncs, 'line-height') + ' ' + css(ncs, 'font-family');\n\n            var rb = {\n                x: view_data.abs_x,\n                y: view_data.abs_y,\n                w: view_data.width + 1,\n                h: view_data.height + 1\n            };\n            var tb = {\n                x: rb.x + padding_left,\n                y: rb.y + padding_top,\n                w: rb.w - padding_left - padding_right,\n                h: rb.h - padding_top - padding_bottom\n            };\n\n            ctx.font = font;\n            ctx.fillStyle = bgcolor;\n            ctx.beginPath();\n            jcanvas.rect(ctx, rb.x, rb.y, rb.w, rb.h, round_radius);\n            ctx.closePath();\n            ctx.fill();\n\n            ctx.fillStyle = color;\n            if ('background-image' in node.data) {\n                var backgroundUrl = css(ncs, 'background-image').slice(5, -2);\n                node.ready = false;\n                var rotation = 0;\n                if ('background-rotation' in node.data) {\n                    rotation = node.data['background-rotation'];\n                }\n                jcanvas.image(ctx, backgroundUrl, rb.x, rb.y, rb.w, rb.h, round_radius, rotation, function () {\n                    node.ready = true;\n                });\n            }\n            if (!!node.topic) {\n                if (text_overflow === 'ellipsis') {\n                    jcanvas.text_ellipsis(ctx, node.topic, tb.x, tb.y, tb.w, tb.h);\n                } else {\n                    var line_height = parseInt(css(ncs, 'line-height'));\n                    jcanvas.text_multiline(ctx, node.topic, tb.x, tb.y, tb.w, tb.h, line_height);\n                }\n            }\n            if (!!view_data.expander) {\n                this._draw_expander(view_data.expander);\n            }\n            if (!('background-image' in node.data)) {\n                node.ready = true;\n            }\n        },\n\n        _draw_expander: function _draw_expander(expander) {\n            var ctx = this.canvas_ctx;\n            var ncs = getComputedStyle(expander);\n            if (!is_visible(ncs)) {\n                return;\n            }\n\n            var style_left = css(ncs, 'left');\n            var style_top = css(ncs, 'top');\n            var font = css(ncs, 'font');\n            var left = parseInt(style_left);\n            var top = parseInt(style_top);\n            var is_plus = expander.innerHTML === '+';\n\n            ctx.lineWidth = 1;\n\n            ctx.beginPath();\n            ctx.arc(left + 7, top + 7, 5, 0, Math.PI * 2, true);\n            ctx.moveTo(left + 10, top + 7);\n            ctx.lineTo(left + 4, top + 7);\n            if (is_plus) {\n                ctx.moveTo(left + 7, top + 4);\n                ctx.lineTo(left + 7, top + 10);\n            }\n            ctx.closePath();\n            ctx.stroke();\n        },\n\n        _download: function _download() {\n            var c = this.canvas_elem;\n            var name = this.jm.mind.name + '.png';\n\n            if (navigator.msSaveBlob && !!c.msToBlob) {\n                var blob = c.msToBlob();\n                navigator.msSaveBlob(blob, name);\n            } else {\n                var bloburl = this.canvas_elem.toDataURL();\n                var anchor = $c('a');\n                if ('download' in anchor) {\n                    anchor.style.visibility = 'hidden';\n                    anchor.href = bloburl;\n                    anchor.download = name;\n                    $d.body.appendChild(anchor);\n                    var evt = $d.createEvent('MouseEvents');\n                    evt.initEvent('click', true, true);\n                    anchor.dispatchEvent(evt);\n                    $d.body.removeChild(anchor);\n                } else {\n                    location.href = bloburl;\n                }\n            }\n        },\n\n        jm_event_handle: function jm_event_handle(type, data) {\n            if (type === jsMind.event_type.resize) {\n                this.resize();\n            }\n        }\n    };\n\n    var screenshot_plugin = new jsMind.plugin('screenshot', function (jm) {\n        var jss = new jsMind.screenshot(jm);\n        jm.screenshot = jss;\n        jm.shoot = function () {\n            jss.shoot();\n        };\n        jm.add_event_listener(function (type, data) {\n            jss.jm_event_handle.call(jss, type, data);\n        });\n    });\n\n    jsMind.register_plugin(screenshot_plugin);\n})(window);\n\n/***/ }),\n/* 16 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{key:_vm.refresh,style:({height: _vm.height})},[_c('div',{attrs:{\"id\":\"jsmind_container\"}}),_vm._v(\" \"),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"}},[_c('input',{staticClass:\"file\",attrs:{\"type\":\"file\",\"id\":\"image-chooser\",\"accept\":\"image/*\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// build.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 0\n// module chunks = 0","<template>\r\n<div :key='refresh' :style=\"{height}\">\r\n  <div id=\"jsmind_container\" ></div>\r\n  <div style=\"display:none\">\r\n      <input class=\"file\" type=\"file\" id=\"image-chooser\" accept=\"image/*\"/>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport  \"./jsmind.js\";\r\nimport \"./jsmind.css\";\r\nimport './jsmind.draggable.js'\r\nimport './jsmind.screenshot.js'\r\nexport default {\r\n  name: \"jsMind\",\r\n  props: {\r\n    values: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    options: {\r\n      type: Object\r\n    },\r\n    height:{\r\n      type:String,\r\n      required:true\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  data(){\r\n    return{\r\n      jm:{},\r\n      refresh:1,\r\n      value:{},\r\n       // 默认配置\r\n      default_options : {\r\n      container: \"jsmind_container\",\r\n      editable: true, // 是否启用编辑\r\n      theme: \"primary\", // 主题\r\n      mode: \"full\", // 显示模式\r\n      support_html: true, // 是否支持节点里的HTML元素\r\n      view: {\r\n        engine: \"canvas\", // 思维导图各节点之间线条的绘制引擎\r\n        hmargin: 100, // 思维导图距容器外框的最小水平距离\r\n        vmargin: 50, // 思维导图距容器外框的最小垂直距离\r\n        line_width: 2, // 思维导图线条的粗细\r\n        line_color: \"#555\" // 思维导图线条的颜色\r\n      },\r\n      layout: {\r\n        hspace: 30, // 节点之间的水平间距\r\n        vspace: 20, // 节点之间的垂直间距\r\n        pspace: 13 // 节点与连接线之间的水平间距（用于容纳节点收缩/展开控制器）\r\n      },\r\n      shortcut: {\r\n        enable: true, // 是否启用快捷键\r\n        handles: {\r\n          SavePNG(){\r\n            this.jm.screenshot.shootDownload();\r\n          }\r\n        }, // 命名的快捷键事件处理器\r\n        mapping: {\r\n          // 快捷键映射\r\n          addchild: 45, // <Insert>\r\n          addbrother: 13, // <Enter>\r\n          editnode: 113, // <F2>\r\n          delnode: 46, // <Delete>\r\n          toggle: 32, // <Space>\r\n          left: 37, // <Left>\r\n          up: 38, // <Up>\r\n          right: 39, // <Right>\r\n          down: 40 ,// <Down>\r\n          SavePNG:jsMind.key.ctrl + 83\r\n        }\r\n      }\r\n    }\r\n    }\r\n  },\r\n  updated(){\r\n    this.init()\r\n  },\r\n  watch:{\r\n    options(){\r\n     this.$nextTick(()=>{\r\n      this.refresh++\r\n     })\r\n    }\r\n  },\r\n  methods:{\r\n    init(){\r\n      if(this.jm.get_data){\r\n        this.value=this.jm.get_data()\r\n      }else{\r\n        this.value=this.values\r\n      }\r\n      const options = Object.assign(this.default_options, this.options);\r\n      this.jm=window.jsMind.show(options,this.value)\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n#jsmind_container {\r\n  height: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/JsMind/JsMind.vue","import jsMind from './JsMind.vue'\r\njsMind.install = Vue => {\r\n    Vue.component(jsMind.name, jsMind)\r\n}\r\n\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n    window.Vue.component(jsMind.name, jsMind)\r\n}\r\n\r\nexport default jsMind;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/JsMind/index.js","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader?minimize!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7e05affa\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./JsMind.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./JsMind.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./JsMind.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7e05affa\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./JsMind.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7e05affa\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/JsMind/JsMind.vue\n// module id = 3\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7e05affa\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./JsMind.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"5d40047c\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-7e05affa\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/JsMind/JsMind.vue\n// module id = 4\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"#jsmind_container[data-v-7e05affa]{height:100%}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-7e05affa\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/JsMind/JsMind.vue\n// module id = 5\n// module chunks = 0","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\nvar listToStyles = require('./listToStyles')\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nmodule.exports = function (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader/lib/addStylesClient.js\n// module id = 6\n// module chunks = 0","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nmodule.exports = function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader/lib/listToStyles.js\n// module id = 7\n// module chunks = 0","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/component-normalizer.js\n// module id = 8\n// module chunks = 0","/*\n * Released under BSD License\n * Copyright (c) 2014-2016 hizzgdev@163.com\n *\n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n; (function ($w) {\n    'use strict';\n    // set 'jsMind' as the library name.\n    // __name__ should be a const value, Never try to change it easily.\n    var __name__ = 'jsMind';\n    // library version\n    var __version__ = '0.4.6';\n    // author\n    var __author__ = 'hizzgdev@163.com';\n\n    // an noop function define\n    var _noop = function () { };\n    var logger = (typeof console === 'undefined') ? {\n        log: _noop, debug: _noop, error: _noop, warn: _noop, info: _noop\n    } : console;\n\n    // check global variables\n    if (typeof module === 'undefined' || !module.exports) {\n        if (typeof $w[__name__] != 'undefined') {\n            logger.log(__name__ + ' has been already exist.');\n            return;\n        }\n    }\n\n    // shortcut of methods in dom\n    var $d = $w.document;\n    var $g = function (id) { return $d.getElementById(id); };\n    var $c = function (tag) { return $d.createElement(tag); };\n    var $t = function (n, t) { if (n.hasChildNodes()) { n.firstChild.nodeValue = t; } else { n.appendChild($d.createTextNode(t)); } };\n\n    var $h = function (n, t) {\n        if (t instanceof HTMLElement) {\n            n.innerHTML = '';\n            n.appendChild(t)\n        } else {\n            n.innerHTML = t;\n        }\n    };\n    // detect isElement\n    var $i = function (el) { return !!el && (typeof el === 'object') && (el.nodeType === 1) && (typeof el.style === 'object') && (typeof el.ownerDocument === 'object'); };\n    if (typeof String.prototype.startsWith != 'function') { String.prototype.startsWith = function (p) { return this.slice(0, p.length) === p; }; }\n\n    var DEFAULT_OPTIONS = {\n        container: '',   // id of the container\n        editable: false, // you can change it in your options\n        theme: null,\n        mode: 'full',    // full or side\n        support_html: true,\n\n        view: {\n            engine: 'canvas',\n            hmargin: 100,\n            vmargin: 50,\n            line_width: 2,\n            line_color: '#555'\n        },\n        layout: {\n            hspace: 30,\n            vspace: 20,\n            pspace: 13\n        },\n        default_event_handle: {\n            enable_mousedown_handle: true,\n            enable_click_handle: true,\n            enable_dblclick_handle: true\n        },\n        shortcut: {\n            enable: true,\n            handles: {\n            },\n            mapping: {\n                addchild: 45, // Insert\n                addbrother: 13, // Enter\n                editnode: 113,// F2\n                delnode: 46, // Delete\n                toggle: 32, // Space\n                left: 37, // Left\n                up: 38, // Up\n                right: 39, // Right\n                down: 40, // Down\n            }\n        },\n    };\n\n    // core object\n    var jm = function (options) {\n        jm.current = this;\n\n        this.version = __version__;\n        var opts = {};\n        jm.util.json.merge(opts, DEFAULT_OPTIONS);\n        jm.util.json.merge(opts, options);\n\n        if (!opts.container) {\n            logger.error('the options.container should not be null or empty.');\n            return;\n        }\n        this.options = opts;\n        this.inited = false;\n        this.mind = null;\n        this.event_handles = [];\n        this.init();\n    };\n\n    // ============= static object =============================================\n    jm.direction = { left: -1, center: 0, right: 1 };\n    jm.event_type = { show: 1, resize: 2, edit: 3, select: 4 };\n    jm.key = { meta: 1 << 13, ctrl: 1 << 12, alt: 1 << 11, shift: 1 << 10 };\n\n    jm.node = function (sId, iIndex, sTopic, oData, bIsRoot, oParent, eDirection, bExpanded) {\n        if (!sId) { logger.error('invalid nodeid'); return; }\n        if (typeof iIndex != 'number') { logger.error('invalid node index'); return; }\n        if (typeof bExpanded === 'undefined') { bExpanded = true; }\n        this.id = sId;\n        this.index = iIndex;\n        this.topic = sTopic;\n        this.data = oData || {};\n        this.isroot = bIsRoot;\n        this.parent = oParent;\n        this.direction = eDirection;\n        this.expanded = !!bExpanded;\n        this.children = [];\n        this._data = {};\n    };\n\n    jm.node.compare = function (node1, node2) {\n        // '-1' is alwary the last\n        var r = 0;\n        var i1 = node1.index;\n        var i2 = node2.index;\n        if (i1 >= 0 && i2 >= 0) {\n            r = i1 - i2;\n        } else if (i1 == -1 && i2 == -1) {\n            r = 0;\n        } else if (i1 == -1) {\n            r = 1;\n        } else if (i2 == -1) {\n            r = -1;\n        } else {\n            r = 0;\n        }\n        //logger.debug(i1+' <> '+i2+'  =  '+r);\n        return r;\n    };\n\n    jm.node.inherited = function (pnode, node) {\n        if (!!pnode && !!node) {\n            if (pnode.id === node.id) {\n                return true;\n            }\n            if (pnode.isroot) {\n                return true;\n            }\n            var pid = pnode.id;\n            var p = node;\n            while (!p.isroot) {\n                p = p.parent;\n                if (p.id === pid) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n\n    jm.node.prototype = {\n        get_location: function () {\n            var vd = this._data.view;\n            return {\n                x: vd.abs_x,\n                y: vd.abs_y\n            };\n        },\n        get_size: function () {\n            var vd = this._data.view;\n            return {\n                w: vd.width,\n                h: vd.height\n            }\n        }\n    };\n\n\n    jm.mind = function () {\n        this.name = null;\n        this.author = null;\n        this.version = null;\n        this.root = null;\n        this.selected = null;\n        this.nodes = {};\n    };\n\n    jm.mind.prototype = {\n        get_node: function (nodeid) {\n            if (nodeid in this.nodes) {\n                return this.nodes[nodeid];\n            } else {\n                logger.warn('the node[id=' + nodeid + '] can not be found');\n                return null;\n            }\n        },\n\n        set_root: function (nodeid, topic, data) {\n            if (this.root == null) {\n                this.root = new jm.node(nodeid, 0, topic, data, true);\n                this._put_node(this.root);\n            } else {\n                logger.error('root node is already exist');\n            }\n        },\n\n        add_node: function (parent_node, nodeid, topic, data, idx, direction, expanded) {\n            if (!jm.util.is_node(parent_node)) {\n                var the_parent_node = this.get_node(parent_node);\n                if (!the_parent_node) {\n                    logger.error('the parent_node[id=' + parent_node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.add_node(the_parent_node, nodeid, topic, data, idx, direction, expanded);\n                }\n            }\n            var nodeindex = idx || -1;\n            var node = null;\n            if (parent_node.isroot) {\n                var d = jm.direction.right;\n                if (isNaN(direction)) {\n                    var children = parent_node.children;\n                    var children_len = children.length;\n                    var r = 0;\n                    for (var i = 0; i < children_len; i++) { if (children[i].direction === jm.direction.left) { r--; } else { r++; } }\n                    d = (children_len > 1 && r > 0) ? jm.direction.left : jm.direction.right\n                } else {\n                    d = (direction != jm.direction.left) ? jm.direction.right : jm.direction.left;\n                }\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, d, expanded);\n            } else {\n                node = new jm.node(nodeid, nodeindex, topic, data, false, parent_node, parent_node.direction, expanded);\n            }\n            if (this._put_node(node)) {\n                parent_node.children.push(node);\n                this._reindex(parent_node);\n            } else {\n                logger.error('fail, the nodeid \\'' + node.id + '\\' has been already exist.');\n                node = null;\n            }\n            return node;\n        },\n\n        insert_node_before: function (node_before, nodeid, topic, data) {\n            if (!jm.util.is_node(node_before)) {\n                var the_node_before = this.get_node(node_before);\n                if (!the_node_before) {\n                    logger.error('the node_before[id=' + node_before + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_before(the_node_before, nodeid, topic, data);\n                }\n            }\n            var node_index = node_before.index - 0.5;\n            return this.add_node(node_before.parent, nodeid, topic, data, node_index);\n        },\n\n        get_node_before: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_before(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var idx = node.index - 2;\n            if (idx >= 0) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        insert_node_after: function (node_after, nodeid, topic, data) {\n            if (!jm.util.is_node(node_after)) {\n                var the_node_after = this.get_node(node_before);\n                if (!the_node_after) {\n                    logger.error('the node_after[id=' + node_after + '] can not be found.');\n                    return null;\n                } else {\n                    return this.insert_node_after(the_node_after, nodeid, topic, data);\n                }\n            }\n            var node_index = node_after.index + 0.5;\n            return this.add_node(node_after.parent, nodeid, topic, data, node_index);\n        },\n\n        get_node_after: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.get_node_after(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var idx = node.index;\n            var brothers = node.parent.children;\n            if (brothers.length >= idx) {\n                return node.parent.children[idx];\n            } else {\n                return null;\n            }\n        },\n\n        move_node: function (node, beforeid, parentid, direction) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return null;\n                } else {\n                    return this.move_node(the_node, beforeid, parentid, direction);\n                }\n            }\n            if (!parentid) {\n                parentid = node.parent.id;\n            }\n            return this._move_node(node, beforeid, parentid, direction);\n        },\n\n        _flow_node_direction: function (node, direction) {\n            if (typeof direction === 'undefined') {\n                direction = node.direction;\n            } else {\n                node.direction = direction;\n            }\n            var len = node.children.length;\n            while (len--) {\n                this._flow_node_direction(node.children[len], direction);\n            }\n        },\n\n        _move_node_internal: function (node, beforeid) {\n            if (!!node && !!beforeid) {\n                if (beforeid == '_last_') {\n                    node.index = -1;\n                    this._reindex(node.parent);\n                } else if (beforeid == '_first_') {\n                    node.index = 0;\n                    this._reindex(node.parent);\n                } else {\n                    var node_before = (!!beforeid) ? this.get_node(beforeid) : null;\n                    if (node_before != null && node_before.parent != null && node_before.parent.id == node.parent.id) {\n                        node.index = node_before.index - 0.5;\n                        this._reindex(node.parent);\n                    }\n                }\n            }\n            return node;\n        },\n\n        _move_node: function (node, beforeid, parentid, direction) {\n            if (!!node && !!parentid) {\n                if (node.parent.id != parentid) {\n                    // remove from parent's children\n                    var sibling = node.parent.children;\n                    var si = sibling.length;\n                    while (si--) {\n                        if (sibling[si].id == node.id) {\n                            sibling.splice(si, 1);\n                            break;\n                        }\n                    }\n                    node.parent = this.get_node(parentid);\n                    node.parent.children.push(node);\n                }\n\n                if (node.parent.isroot) {\n                    if (direction == jm.direction.left) {\n                        node.direction = direction;\n                    } else {\n                        node.direction = jm.direction.right;\n                    }\n                } else {\n                    node.direction = node.parent.direction;\n                }\n                this._move_node_internal(node, beforeid);\n                this._flow_node_direction(node);\n            }\n            return node;\n        },\n\n        remove_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (!node) {\n                logger.error('fail, the node can not be found');\n                return false;\n            }\n            if (node.isroot) {\n                logger.error('fail, can not remove root node');\n                return false;\n            }\n            if (this.selected != null && this.selected.id == node.id) {\n                this.selected = null;\n            }\n            // clean all subordinate nodes\n            var children = node.children;\n            var ci = children.length;\n            while (ci--) {\n                this.remove_node(children[ci]);\n            }\n            // clean all children\n            children.length = 0;\n            // remove from parent's children\n            var sibling = node.parent.children;\n            var si = sibling.length;\n            while (si--) {\n                if (sibling[si].id == node.id) {\n                    sibling.splice(si, 1);\n                    break;\n                }\n            }\n            // remove from global nodes\n            delete this.nodes[node.id];\n            // clean all properties\n            for (var k in node) {\n                delete node[k];\n            }\n            // remove it's self\n            node = null;\n            //delete node;\n            return true;\n        },\n\n        _put_node: function (node) {\n            if (node.id in this.nodes) {\n                logger.warn('the nodeid \\'' + node.id + '\\' has been already exist.');\n                return false;\n            } else {\n                this.nodes[node.id] = node;\n                return true;\n            }\n        },\n\n        _reindex: function (node) {\n            if (node instanceof jm.node) {\n                node.children.sort(jm.node.compare);\n                for (var i = 0; i < node.children.length; i++) {\n                    node.children[i].index = i + 1;\n                }\n            }\n        },\n    };\n\n    jm.format = {\n        node_tree: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_tree\",\n                \"data\": { \"id\": \"root\", \"topic\": \"jsMind Example\" }\n            },\n            get_mind: function (source) {\n                var df = jm.format.node_tree;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n            get_data: function (mind) {\n                var df = jm.format.node_tree;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_tree';\n                json.data = df._buildnode(mind.root);\n                return json;\n            },\n\n            _parse: function (mind, node_root) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_root);\n                mind.set_root(node_root.id, node_root.topic, data);\n                if ('children' in node_root) {\n                    var children = node_root.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, mind.root, children[i]);\n                    }\n                }\n            },\n\n            _extract_data: function (node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'children' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _extract_subnode: function (mind, node_parent, node_json) {\n                var df = jm.format.node_tree;\n                var data = df._extract_data(node_json);\n                var d = null;\n                if (node_parent.isroot) {\n                    d = node_json.direction == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                var node = mind.add_node(node_parent, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                if ('children' in node_json) {\n                    var children = node_json.children;\n                    for (var i = 0; i < children.length; i++) {\n                        df._extract_subnode(mind, node, children[i]);\n                    }\n                }\n            },\n\n            _buildnode: function (node) {\n                var df = jm.format.node_tree;\n                if (!(node instanceof jm.node)) { return; }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                var children = node.children;\n                if (children.length > 0) {\n                    o.children = [];\n                    for (var i = 0; i < children.length; i++) {\n                        o.children.push(df._buildnode(children[i]));\n                    }\n                }\n                return o;\n            }\n        },\n\n        node_array: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"node_array\",\n                \"data\": [\n                    { \"id\": \"root\", \"topic\": \"jsMind Example\", \"isroot\": true }\n                ]\n            },\n\n            get_mind: function (source) {\n                var df = jm.format.node_array;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                df._parse(mind, source.data);\n                return mind;\n            },\n\n            get_data: function (mind) {\n                var df = jm.format.node_array;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'node_array';\n                json.data = [];\n                df._array(mind, json.data);\n                return json;\n            },\n\n            _parse: function (mind, node_array) {\n                var df = jm.format.node_array;\n                var narray = node_array.slice(0);\n                // reverse array for improving looping performance\n                narray.reverse();\n                var root_id = df._extract_root(mind, narray);\n                if (!!root_id) {\n                    df._extract_subnode(mind, root_id, narray);\n                } else {\n                    logger.error('root node can not be found');\n                }\n            },\n\n            _extract_root: function (mind, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                while (i--) {\n                    if ('isroot' in node_array[i] && node_array[i].isroot) {\n                        var root_json = node_array[i];\n                        var data = df._extract_data(root_json);\n                        mind.set_root(root_json.id, root_json.topic, data);\n                        node_array.splice(i, 1);\n                        return root_json.id;\n                    }\n                }\n                return null;\n            },\n\n            _extract_subnode: function (mind, parentid, node_array) {\n                var df = jm.format.node_array;\n                var i = node_array.length;\n                var node_json = null;\n                var data = null;\n                var extract_count = 0;\n                while (i--) {\n                    node_json = node_array[i];\n                    if (node_json.parentid == parentid) {\n                        data = df._extract_data(node_json);\n                        var d = null;\n                        var node_direction = node_json.direction;\n                        if (!!node_direction) {\n                            d = node_direction == 'left' ? jm.direction.left : jm.direction.right;\n                        }\n                        mind.add_node(parentid, node_json.id, node_json.topic, data, null, d, node_json.expanded);\n                        node_array.splice(i, 1);\n                        extract_count++;\n                        var sub_extract_count = df._extract_subnode(mind, node_json.id, node_array);\n                        if (sub_extract_count > 0) {\n                            // reset loop index after extract subordinate node\n                            i = node_array.length;\n                            extract_count += sub_extract_count;\n                        }\n                    }\n                }\n                return extract_count;\n            },\n\n            _extract_data: function (node_json) {\n                var data = {};\n                for (var k in node_json) {\n                    if (k == 'id' || k == 'topic' || k == 'parentid' || k == 'isroot' || k == 'direction' || k == 'expanded') {\n                        continue;\n                    }\n                    data[k] = node_json[k];\n                }\n                return data;\n            },\n\n            _array: function (mind, node_array) {\n                var df = jm.format.node_array;\n                df._array_node(mind.root, node_array);\n            },\n\n            _array_node: function (node, node_array) {\n                var df = jm.format.node_array;\n                if (!(node instanceof jm.node)) { return; }\n                var o = {\n                    id: node.id,\n                    topic: node.topic,\n                    expanded: node.expanded\n                };\n                if (!!node.parent) {\n                    o.parentid = node.parent.id;\n                }\n                if (node.isroot) {\n                    o.isroot = true;\n                }\n                if (!!node.parent && node.parent.isroot) {\n                    o.direction = node.direction == jm.direction.left ? 'left' : 'right';\n                }\n                if (node.data != null) {\n                    var node_data = node.data;\n                    for (var k in node_data) {\n                        o[k] = node_data[k];\n                    }\n                }\n                node_array.push(o);\n                var ci = node.children.length;\n                for (var i = 0; i < ci; i++) {\n                    df._array_node(node.children[i], node_array);\n                }\n            },\n        },\n\n        freemind: {\n            example: {\n                \"meta\": {\n                    \"name\": __name__,\n                    \"author\": __author__,\n                    \"version\": __version__\n                },\n                \"format\": \"freemind\",\n                \"data\": \"<map version=\\\"1.0.1\\\"><node ID=\\\"root\\\" TEXT=\\\"freemind Example\\\"/></map>\"\n            },\n            get_mind: function (source) {\n                var df = jm.format.freemind;\n                var mind = new jm.mind();\n                mind.name = source.meta.name;\n                mind.author = source.meta.author;\n                mind.version = source.meta.version;\n                var xml = source.data;\n                var xml_doc = df._parse_xml(xml);\n                var xml_root = df._find_root(xml_doc);\n                df._load_node(mind, null, xml_root);\n                return mind;\n            },\n\n            get_data: function (mind) {\n                var df = jm.format.freemind;\n                var json = {};\n                json.meta = {\n                    name: mind.name,\n                    author: mind.author,\n                    version: mind.version\n                };\n                json.format = 'freemind';\n                var xmllines = [];\n                xmllines.push('<map version=\\\"1.0.1\\\">');\n                df._buildmap(mind.root, xmllines);\n                xmllines.push('</map>');\n                json.data = xmllines.join(' ');\n                return json;\n            },\n\n            _parse_xml: function (xml) {\n                var xml_doc = null;\n                if (window.DOMParser) {\n                    var parser = new DOMParser();\n                    xml_doc = parser.parseFromString(xml, 'text/xml');\n                } else { // Internet Explorer\n                    xml_doc = new ActiveXObject('Microsoft.XMLDOM');\n                    xml_doc.async = false;\n                    xml_doc.loadXML(xml);\n                }\n                return xml_doc;\n            },\n\n            _find_root: function (xml_doc) {\n                var nodes = xml_doc.childNodes;\n                var node = null;\n                var root = null;\n                var n = null;\n                for (var i = 0; i < nodes.length; i++) {\n                    n = nodes[i];\n                    if (n.nodeType == 1 && n.tagName == 'map') {\n                        node = n;\n                        break;\n                    }\n                }\n                if (!!node) {\n                    var ns = node.childNodes;\n                    node = null;\n                    for (var i = 0; i < ns.length; i++) {\n                        n = ns[i];\n                        if (n.nodeType == 1 && n.tagName == 'node') {\n                            node = n;\n                            break;\n                        }\n                    }\n                }\n                return node;\n            },\n\n            _load_node: function (mind, parent_id, xml_node) {\n                var df = jm.format.freemind;\n                var node_id = xml_node.getAttribute('ID');\n                var node_topic = xml_node.getAttribute('TEXT');\n                // look for richcontent\n                if (node_topic == null) {\n                    var topic_children = xml_node.childNodes;\n                    var topic_child = null;\n                    for (var i = 0; i < topic_children.length; i++) {\n                        topic_child = topic_children[i];\n                        //logger.debug(topic_child.tagName);\n                        if (topic_child.nodeType == 1 && topic_child.tagName === 'richcontent') {\n                            node_topic = topic_child.textContent;\n                            break;\n                        }\n                    }\n                }\n                var node_data = df._load_attributes(xml_node);\n                var node_expanded = ('expanded' in node_data) ? (node_data.expanded == 'true') : true;\n                delete node_data.expanded;\n\n                var node_position = xml_node.getAttribute('POSITION');\n                var node_direction = null;\n                if (!!node_position) {\n                    node_direction = node_position == 'left' ? jm.direction.left : jm.direction.right;\n                }\n                //logger.debug(node_position +':'+ node_direction);\n                if (!!parent_id) {\n                    mind.add_node(parent_id, node_id, node_topic, node_data, null, node_direction, node_expanded);\n                } else {\n                    mind.set_root(node_id, node_topic, node_data);\n                }\n                var children = xml_node.childNodes;\n                var child = null;\n                for (var i = 0; i < children.length; i++) {\n                    child = children[i];\n                    if (child.nodeType == 1 && child.tagName == 'node') {\n                        df._load_node(mind, node_id, child);\n                    }\n                }\n            },\n\n            _load_attributes: function (xml_node) {\n                var children = xml_node.childNodes;\n                var attr = null;\n                var attr_data = {};\n                for (var i = 0; i < children.length; i++) {\n                    attr = children[i];\n                    if (attr.nodeType == 1 && attr.tagName === 'attribute') {\n                        attr_data[attr.getAttribute('NAME')] = attr.getAttribute('VALUE');\n                    }\n                }\n                return attr_data;\n            },\n\n            _buildmap: function (node, xmllines) {\n                var df = jm.format.freemind;\n                var pos = null;\n                if (!!node.parent && node.parent.isroot) {\n                    pos = node.direction === jm.direction.left ? 'left' : 'right';\n                }\n                xmllines.push('<node');\n                xmllines.push('ID=\\\"' + node.id + '\\\"');\n                if (!!pos) {\n                    xmllines.push('POSITION=\\\"' + pos + '\\\"');\n                }\n                xmllines.push('TEXT=\\\"' + node.topic + '\\\">');\n\n                // store expanded status as an attribute\n                xmllines.push('<attribute NAME=\\\"expanded\\\" VALUE=\\\"' + node.expanded + '\\\"/>');\n\n                // for attributes\n                var node_data = node.data;\n                if (node_data != null) {\n                    for (var k in node_data) {\n                        xmllines.push('<attribute NAME=\\\"' + k + '\\\" VALUE=\\\"' + node_data[k] + '\\\"/>');\n                    }\n                }\n\n                // for children\n                var children = node.children;\n                for (var i = 0; i < children.length; i++) {\n                    df._buildmap(children[i], xmllines);\n                }\n\n                xmllines.push('</node>');\n            },\n        },\n    };\n\n    // ============= utility object =============================================\n\n    jm.util = {\n        is_node: function (node) {\n            return !!node && node instanceof jm.node;\n        },\n        ajax: {\n            _xhr: function () {\n                var xhr = null;\n                if (window.XMLHttpRequest) {\n                    xhr = new XMLHttpRequest();\n                } else {\n                    try {\n                        xhr = new ActiveXObject('Microsoft.XMLHTTP');\n                    } catch (e) { }\n                }\n                return xhr;\n            },\n            _eurl: function (url) {\n                return encodeURIComponent(url);\n            },\n            request: function (url, param, method, callback, fail_callback) {\n                var a = jm.util.ajax;\n                var p = null;\n                var tmp_param = [];\n                for (var k in param) {\n                    tmp_param.push(a._eurl(k) + '=' + a._eurl(param[k]));\n                }\n                if (tmp_param.length > 0) {\n                    p = tmp_param.join('&');\n                }\n                var xhr = a._xhr();\n                if (!xhr) { return; }\n                xhr.onreadystatechange = function () {\n                    if (xhr.readyState == 4) {\n                        if (xhr.status == 200 || xhr.status == 0) {\n                            if (typeof callback === 'function') {\n                                var data = jm.util.json.string2json(xhr.responseText);\n                                if (data != null) {\n                                    callback(data);\n                                } else {\n                                    callback(xhr.responseText);\n                                }\n                            }\n                        } else {\n                            if (typeof fail_callback === 'function') {\n                                fail_callback(xhr);\n                            } else {\n                                logger.error('xhr request failed.', xhr);\n                            }\n                        }\n                    }\n                }\n                method = method || 'GET';\n                xhr.open(method, url, true);\n                xhr.setRequestHeader('If-Modified-Since', '0');\n                if (method == 'POST') {\n                    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded;charset=utf-8');\n                    xhr.send(p);\n                } else {\n                    xhr.send();\n                }\n            },\n            get: function (url, callback) {\n                return jm.util.ajax.request(url, {}, 'GET', callback);\n            },\n            post: function (url, param, callback) {\n                return jm.util.ajax.request(url, param, 'POST', callback);\n            }\n        },\n\n        dom: {\n            //target,eventType,handler\n            add_event: function (t, e, h) {\n                if (!!t.addEventListener) {\n                    t.addEventListener(e, h, false);\n                } else {\n                    t.attachEvent('on' + e, h);\n                }\n            }\n        },\n\n        file: {\n            read: function (file_data, fn_callback) {\n                var reader = new FileReader();\n                reader.onload = function () {\n                    if (typeof fn_callback === 'function') {\n                        fn_callback(this.result, file_data.name);\n                    }\n                };\n                reader.readAsText(file_data);\n            },\n\n            save: function (file_data, type, name) {\n                var blob;\n                if (typeof $w.Blob === 'function') {\n                    blob = new Blob([file_data], { type: type });\n                } else {\n                    var BlobBuilder = $w.BlobBuilder || $w.MozBlobBuilder || $w.WebKitBlobBuilder || $w.MSBlobBuilder;\n                    var bb = new BlobBuilder();\n                    bb.append(file_data);\n                    blob = bb.getBlob(type);\n                }\n                if (navigator.msSaveBlob) {\n                    navigator.msSaveBlob(blob, name);\n                } else {\n                    var URL = $w.URL || $w.webkitURL;\n                    var bloburl = URL.createObjectURL(blob);\n                    var anchor = $c('a');\n                    if ('download' in anchor) {\n                        anchor.style.visibility = 'hidden';\n                        anchor.href = bloburl;\n                        anchor.download = name;\n                        $d.body.appendChild(anchor);\n                        var evt = $d.createEvent('MouseEvents');\n                        evt.initEvent('click', true, true);\n                        anchor.dispatchEvent(evt);\n                        $d.body.removeChild(anchor);\n                    } else {\n                        location.href = bloburl;\n                    }\n                }\n            }\n        },\n\n        json: {\n            json2string: function (json) {\n                if (!!JSON) {\n                    try {\n                        var json_str = JSON.stringify(json);\n                        return json_str;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not convert to string');\n                        return null;\n                    }\n                }\n            },\n            string2json: function (json_str) {\n                if (!!JSON) {\n                    try {\n                        var json = JSON.parse(json_str);\n                        return json;\n                    } catch (e) {\n                        logger.warn(e);\n                        logger.warn('can not parse to json');\n                        return null;\n                    }\n                }\n            },\n            merge: function (b, a) {\n                for (var o in a) {\n                    if (o in b) {\n                        if (typeof b[o] === 'object' &&\n                            Object.prototype.toString.call(b[o]).toLowerCase() == '[object object]' &&\n                            !b[o].length) {\n                            jm.util.json.merge(b[o], a[o]);\n                        } else {\n                            b[o] = a[o];\n                        }\n                    } else {\n                        b[o] = a[o];\n                    }\n                }\n                return b;\n            }\n        },\n\n        uuid: {\n            newid: function () {\n                return (new Date().getTime().toString(16) + Math.random().toString(16).substr(2)).substr(2, 16);\n            }\n        },\n\n        text: {\n            is_empty: function (s) {\n                if (!s) { return true; }\n                return s.replace(/\\s*/, '').length == 0;\n            }\n        }\n    };\n\n    jm.prototype = {\n        init: function () {\n            if (this.inited) { return; }\n            this.inited = true;\n\n            var opts = this.options;\n\n            var opts_layout = {\n                mode: opts.mode,\n                hspace: opts.layout.hspace,\n                vspace: opts.layout.vspace,\n                pspace: opts.layout.pspace\n            }\n            var opts_view = {\n                container: opts.container,\n                support_html: opts.support_html,\n                engine: opts.view.engine,\n                hmargin: opts.view.hmargin,\n                vmargin: opts.view.vmargin,\n                line_width: opts.view.line_width,\n                line_color: opts.view.line_color\n            };\n            // create instance of function provider\n            this.data = new jm.data_provider(this);\n            this.layout = new jm.layout_provider(this, opts_layout);\n            this.view = new jm.view_provider(this, opts_view);\n            this.shortcut = new jm.shortcut_provider(this, opts.shortcut);\n\n            this.data.init();\n            this.layout.init();\n            this.view.init();\n            this.shortcut.init();\n\n            this._event_bind();\n\n            jm.init_plugins(this);\n        },\n\n        enable_edit: function () {\n            this.options.editable = true;\n        },\n\n        disable_edit: function () {\n            this.options.editable = false;\n        },\n\n        // call enable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        enable_event_handle: function (event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = true;\n        },\n\n        // call disable_event_handle('dblclick')\n        // options are 'mousedown', 'click', 'dblclick'\n        disable_event_handle: function (event_handle) {\n            this.options.default_event_handle['enable_' + event_handle + '_handle'] = false;\n        },\n\n        get_editable: function () {\n            return this.options.editable;\n        },\n\n        set_theme: function (theme) {\n            var theme_old = this.options.theme;\n            this.options.theme = (!!theme) ? theme : null;\n            if (theme_old != this.options.theme) {\n                this.view.reset_theme();\n                this.view.reset_custom_style();\n            }\n        },\n        _event_bind: function () {\n            this.view.add_event(this, 'mousedown', this.mousedown_handle);\n            this.view.add_event(this, 'click', this.click_handle);\n            this.view.add_event(this, 'dblclick', this.dblclick_handle);\n        },\n\n        mousedown_handle: function (e) {\n            if (!this.options.default_event_handle['enable_mousedown_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var nodeid = this.view.get_binded_nodeid(element);\n            if (!!nodeid) {\n                if (element.tagName.toLowerCase() == 'jmnode') {\n                    this.select_node(nodeid);\n                }\n            } else {\n                this.select_clear();\n            }\n        },\n\n        click_handle: function (e) {\n            if (!this.options.default_event_handle['enable_click_handle']) {\n                return;\n            }\n            var element = e.target || event.srcElement;\n            var isexpander = this.view.is_expander(element);\n            if (isexpander) {\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.toggle_node(nodeid);\n                }\n            }\n        },\n\n        dblclick_handle: function (e) {\n            if (!this.options.default_event_handle['enable_dblclick_handle']) {\n                return;\n            }\n            if (this.get_editable()) {\n                var element = e.target || event.srcElement;\n                var nodeid = this.view.get_binded_nodeid(element);\n                if (!!nodeid) {\n                    this.begin_edit(nodeid);\n                }\n            }\n        },\n\n        begin_edit: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.begin_edit(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                this.view.edit_node_begin(node);\n            } else {\n                logger.error('fail, this mind map is not editable.');\n                return;\n            }\n        },\n\n        end_edit: function () {\n            this.view.edit_node_end();\n        },\n\n        toggle_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.toggle_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.toggle_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.expand_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.expand_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        collapse_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.collapse_node(the_node);\n                }\n            }\n            if (node.isroot) { return; }\n            this.view.save_location(node);\n            this.layout.collapse_node(node);\n            this.view.relayout();\n            this.view.restore_location(node);\n        },\n\n        expand_all: function () {\n            this.layout.expand_all();\n            this.view.relayout();\n        },\n\n        collapse_all: function () {\n            this.layout.collapse_all();\n            this.view.relayout();\n        },\n\n        expand_to_depth: function (depth) {\n            this.layout.expand_to_depth(depth);\n            this.view.relayout();\n        },\n\n        _reset: function () {\n            this.view.reset();\n            this.layout.reset();\n            this.data.reset();\n        },\n\n        _show: function (mind) {\n            var m = mind || jm.format.node_array.example;\n\n            this.mind = this.data.load(m);\n            if (!this.mind) {\n                logger.error('data.load error');\n                return;\n            } else {\n                logger.debug('data.load ok');\n            }\n\n            this.view.load();\n            logger.debug('view.load ok');\n\n            this.layout.layout();\n            logger.debug('layout.layout ok');\n\n            this.view.show(true);\n            logger.debug('view.show ok');\n\n            this.invoke_event_handle(jm.event_type.show, { data: [mind] });\n        },\n\n        show: function (mind) {\n            this._reset();\n            this._show(mind);\n        },\n\n        get_meta: function () {\n            return {\n                name: this.mind.name,\n                author: this.mind.author,\n                version: this.mind.version\n            };\n        },\n\n        get_data: function (data_format) {\n            var df = data_format || 'node_tree';\n            return this.data.get_data(df);\n        },\n\n        get_root: function () {\n            return this.mind.root;\n        },\n\n        get_node: function (nodeid) {\n            return this.mind.get_node(nodeid);\n        },\n\n        add_node: function (parent_node, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var node = this.mind.add_node(parent_node, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.view.reset_node_custom_style(node);\n                    this.expand_node(parent_node);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'add_node', data: [parent_node.id, nodeid, topic, data], node: nodeid });\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_before: function (node_before, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var beforeid = jm.util.is_node(node_before) ? node_before.id : node_before;\n                var node = this.mind.insert_node_before(node_before, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_before', data: [beforeid, nodeid, topic, data], node: nodeid });\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        insert_node_after: function (node_after, nodeid, topic, data) {\n            if (this.get_editable()) {\n                var afterid = jm.util.is_node(node_after) ? node_after.id : node_after;\n                var node = this.mind.insert_node_after(node_after, nodeid, topic, data);\n                if (!!node) {\n                    this.view.add_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'insert_node_after', data: [afterid, nodeid, topic, data], node: nodeid });\n                }\n                return node;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        remove_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return false;\n                } else {\n                    return this.remove_node(the_node);\n                }\n            }\n            if (this.get_editable()) {\n                if (node.isroot) {\n                    logger.error('fail, can not remove root node');\n                    return false;\n                }\n                var nodeid = node.id;\n                var parentid = node.parent.id;\n                var parent_node = this.get_node(parentid);\n                this.view.save_location(parent_node);\n                this.view.remove_node(node);\n                this.mind.remove_node(node);\n                this.layout.layout();\n                this.view.show(false);\n                this.view.restore_location(parent_node);\n                this.invoke_event_handle(jm.event_type.edit, { evt: 'remove_node', data: [nodeid], node: parentid });\n                return true;\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return false;\n            }\n        },\n\n        update_node: function (nodeid, topic) {\n            if (this.get_editable()) {\n                if (jm.util.text.is_empty(topic)) {\n                    logger.warn('fail, topic can not be empty');\n                    return;\n                }\n                var node = this.get_node(nodeid);\n                if (!!node) {\n                    if (node.topic === topic) {\n                        logger.info('nothing changed');\n                        this.view.update_node(node);\n                        return;\n                    }\n                    node.topic = topic;\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'update_node', data: [nodeid, topic], node: nodeid });\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n\n        move_node: function (nodeid, beforeid, parentid, direction) {\n            if (this.get_editable()) {\n                var node = this.mind.move_node(nodeid, beforeid, parentid, direction);\n                if (!!node) {\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                    this.invoke_event_handle(jm.event_type.edit, { evt: 'move_node', data: [nodeid, beforeid, parentid, direction], node: nodeid });\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return;\n            }\n        },\n\n        select_node: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.select_node(the_node);\n                }\n            }\n            if (!this.layout.is_visible(node)) {\n                return;\n            }\n            this.mind.selected = node;\n            this.view.select_node(node);\n        },\n\n        get_selected_node: function () {\n            if (!!this.mind) {\n                return this.mind.selected;\n            } else {\n                return null;\n            }\n        },\n\n        select_clear: function () {\n            if (!!this.mind) {\n                this.mind.selected = null;\n                this.view.select_clear();\n            }\n        },\n\n        is_node_visible: function (node) {\n            return this.layout.is_visible(node);\n        },\n\n        find_node_before: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_before(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var prev = null;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (node.id === ni.id) {\n                            n = prev;\n                        }\n                        prev = ni;\n                    }\n                }\n            } else {\n                n = this.mind.get_node_before(node);\n            }\n            return n;\n        },\n\n        find_node_after: function (node) {\n            if (!jm.util.is_node(node)) {\n                var the_node = this.get_node(node);\n                if (!the_node) {\n                    logger.error('the node[id=' + node + '] can not be found.');\n                    return;\n                } else {\n                    return this.find_node_after(the_node);\n                }\n            }\n            if (node.isroot) { return null; }\n            var n = null;\n            if (node.parent.isroot) {\n                var c = node.parent.children;\n                var getthis = false;\n                var ni = null;\n                for (var i = 0; i < c.length; i++) {\n                    ni = c[i];\n                    if (node.direction === ni.direction) {\n                        if (getthis) {\n                            n = ni;\n                            break;\n                        }\n                        if (node.id === ni.id) {\n                            getthis = true;\n                        }\n                    }\n                }\n            } else {\n                n = this.mind.get_node_after(node);\n            }\n            return n;\n        },\n\n        set_node_color: function (nodeid, bgcolor, fgcolor) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!bgcolor) {\n                        node.data['background-color'] = bgcolor;\n                    }\n                    if (!!fgcolor) {\n                        node.data['foreground-color'] = fgcolor;\n                    }\n                    this.view.reset_node_custom_style(node);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_font_style: function (nodeid, size, weight, style) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!size) {\n                        node.data['font-size'] = size;\n                    }\n                    if (!!weight) {\n                        node.data['font-weight'] = weight;\n                    }\n                    if (!!style) {\n                        node.data['font-style'] = style;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_image: function (nodeid, image, width, height, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!!image) {\n                        node.data['background-image'] = image;\n                    }\n                    if (!!width) {\n                        node.data['width'] = width;\n                    }\n                    if (!!height) {\n                        node.data['height'] = height;\n                    }\n                    if (!!rotation) {\n                        node.data['background-rotation'] = rotation;\n                    }\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        set_node_background_rotation: function (nodeid, rotation) {\n            if (this.get_editable()) {\n                var node = this.mind.get_node(nodeid);\n                if (!!node) {\n                    if (!node.data['background-image']) {\n                        logger.error('fail, only can change rotation angle of node with background image');\n                        return null;\n                    }\n                    node.data['background-rotation'] = rotation;\n                    this.view.reset_node_custom_style(node);\n                    this.view.update_node(node);\n                    this.layout.layout();\n                    this.view.show(false);\n                }\n            } else {\n                logger.error('fail, this mind map is not editable');\n                return null;\n            }\n        },\n\n        resize: function () {\n            this.view.resize();\n        },\n\n        // callback(type ,data)\n        add_event_listener: function (callback) {\n            if (typeof callback === 'function') {\n                this.event_handles.push(callback);\n            }\n        },\n\n        invoke_event_handle: function (type, data) {\n            var j = this;\n            $w.setTimeout(function () {\n                j._invoke_event_handle(type, data);\n            }, 0);\n        },\n\n        _invoke_event_handle: function (type, data) {\n            var l = this.event_handles.length;\n            for (var i = 0; i < l; i++) {\n                this.event_handles[i](type, data);\n            }\n        }\n\n    };\n\n    // ============= data provider =============================================\n\n    jm.data_provider = function (jm) {\n        this.jm = jm;\n    };\n\n    jm.data_provider.prototype = {\n        init: function () {\n            logger.debug('data.init');\n        },\n\n        reset: function () {\n            logger.debug('data.reset');\n        },\n\n        load: function (mind_data) {\n            var df = null;\n            var mind = null;\n            if (typeof mind_data === 'object') {\n                if (!!mind_data.format) {\n                    df = mind_data.format;\n                } else {\n                    df = 'node_tree';\n                }\n            } else {\n                df = 'freemind';\n            }\n\n            if (df == 'node_array') {\n                mind = jm.format.node_array.get_mind(mind_data);\n            } else if (df == 'node_tree') {\n                mind = jm.format.node_tree.get_mind(mind_data);\n            } else if (df == 'freemind') {\n                mind = jm.format.freemind.get_mind(mind_data);\n            } else {\n                logger.warn('unsupported format');\n            }\n            return mind;\n        },\n\n        get_data: function (data_format) {\n            var data = null;\n            if (data_format == 'node_array') {\n                data = jm.format.node_array.get_data(this.jm.mind);\n            } else if (data_format == 'node_tree') {\n                data = jm.format.node_tree.get_data(this.jm.mind);\n            } else if (data_format == 'freemind') {\n                data = jm.format.freemind.get_data(this.jm.mind);\n            } else {\n                logger.error('unsupported ' + data_format + ' format');\n            }\n            return data;\n        },\n    };\n\n    // ============= layout provider ===========================================\n\n    jm.layout_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.isside = (this.opts.mode == 'side');\n        this.bounds = null;\n\n        this.cache_valid = false;\n    };\n\n    jm.layout_provider.prototype = {\n        init: function () {\n            logger.debug('layout.init');\n        },\n        reset: function () {\n            logger.debug('layout.reset');\n            this.bounds = { n: 0, s: 0, w: 0, e: 0 };\n        },\n        layout: function () {\n            logger.debug('layout.layout');\n            this.layout_direction();\n            this.layout_offset();\n        },\n\n        layout_direction: function () {\n            this._layout_direction_root();\n        },\n\n        _layout_direction_root: function () {\n            var node = this.jm.mind.root;\n            // logger.debug(node);\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n            layout_data.direction = jm.direction.center;\n            layout_data.side_index = 0;\n            if (this.isside) {\n                var i = children_count;\n                while (i--) {\n                    this._layout_direction_side(children[i], jm.direction.right, i);\n                }\n            } else {\n                var i = children_count;\n                var subnode = null;\n                while (i--) {\n                    subnode = children[i];\n                    if (subnode.direction == jm.direction.left) {\n                        this._layout_direction_side(subnode, jm.direction.left, i);\n                    } else {\n                        this._layout_direction_side(subnode, jm.direction.right, i);\n                    }\n                }\n                /*\n                var boundary = Math.ceil(children_count/2);\n                var i = children_count;\n                while(i--){\n                    if(i>=boundary){\n                        this._layout_direction_side(children[i],jm.direction.left, children_count-i-1);\n                    }else{\n                        this._layout_direction_side(children[i],jm.direction.right, i);\n                    }\n                }*/\n\n            }\n        },\n\n        _layout_direction_side: function (node, direction, side_index) {\n            var layout_data = null;\n            if ('layout' in node._data) {\n                layout_data = node._data.layout;\n            } else {\n                layout_data = {};\n                node._data.layout = layout_data;\n            }\n            var children = node.children;\n            var children_count = children.length;\n\n            layout_data.direction = direction;\n            layout_data.side_index = side_index;\n            var i = children_count;\n            while (i--) {\n                this._layout_direction_side(children[i], direction, i);\n            }\n        },\n\n        layout_offset: function () {\n            var node = this.jm.mind.root;\n            var layout_data = node._data.layout;\n            layout_data.offset_x = 0;\n            layout_data.offset_y = 0;\n            layout_data.outer_height = 0;\n            var children = node.children;\n            var i = children.length;\n            var left_nodes = [];\n            var right_nodes = [];\n            var subnode = null;\n            while (i--) {\n                subnode = children[i];\n                if (subnode._data.layout.direction == jm.direction.right) {\n                    right_nodes.unshift(subnode);\n                } else {\n                    left_nodes.unshift(subnode);\n                }\n            }\n            layout_data.left_nodes = left_nodes;\n            layout_data.right_nodes = right_nodes;\n            layout_data.outer_height_left = this._layout_offset_subnodes(left_nodes);\n            layout_data.outer_height_right = this._layout_offset_subnodes(right_nodes);\n            this.bounds.e = node._data.view.width / 2;\n            this.bounds.w = 0 - this.bounds.e;\n            //logger.debug(this.bounds.w);\n            this.bounds.n = 0;\n            this.bounds.s = Math.max(layout_data.outer_height_left, layout_data.outer_height_right);\n        },\n\n        // layout both the x and y axis\n        _layout_offset_subnodes: function (nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                    this.set_visible(node.children, false);\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                layout_data.offset_x = this.opts.hspace * layout_data.direction + pd.view.width * (pd.layout.direction + layout_data.direction) / 2;\n                if (!node.parent.isroot) {\n                    layout_data.offset_x += this.opts.pspace * layout_data.direction;\n                }\n\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n            }\n            return total_height;\n        },\n\n        // layout the y axis only, for collapse/expand a node\n        _layout_offset_subnodes_height: function (nodes) {\n            var total_height = 0;\n            var nodes_count = nodes.length;\n            var i = nodes_count;\n            var node = null;\n            var node_outer_height = 0;\n            var layout_data = null;\n            var base_y = 0;\n            var pd = null; // parent._data\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (pd == null) {\n                    pd = node.parent._data;\n                }\n\n                node_outer_height = this._layout_offset_subnodes_height(node.children);\n                if (!node.expanded) {\n                    node_outer_height = 0;\n                }\n                node_outer_height = Math.max(node._data.view.height, node_outer_height);\n\n                layout_data.outer_height = node_outer_height;\n                layout_data.offset_y = base_y - node_outer_height / 2;\n                base_y = base_y - node_outer_height - this.opts.vspace;\n                total_height += node_outer_height;\n            }\n            if (nodes_count > 1) {\n                total_height += this.opts.vspace * (nodes_count - 1);\n            }\n            i = nodes_count;\n            var middle_height = total_height / 2;\n            while (i--) {\n                node = nodes[i];\n                node._data.layout.offset_y += middle_height;\n                //logger.debug(node.topic);\n                //logger.debug(node._data.layout.offset_y);\n            }\n            return total_height;\n        },\n\n        get_node_offset: function (node) {\n            var layout_data = node._data.layout;\n            var offset_cache = null;\n            if (('_offset_' in layout_data) && this.cache_valid) {\n                offset_cache = layout_data._offset_;\n            } else {\n                offset_cache = { x: -1, y: -1 };\n                layout_data._offset_ = offset_cache;\n            }\n            if (offset_cache.x == -1 || offset_cache.y == -1) {\n                var x = layout_data.offset_x;\n                var y = layout_data.offset_y;\n                if (!node.isroot) {\n                    var offset_p = this.get_node_offset(node.parent);\n                    x += offset_p.x;\n                    y += offset_p.y;\n                }\n                offset_cache.x = x;\n                offset_cache.y = y;\n            }\n            return offset_cache;\n        },\n\n        get_node_point: function (node) {\n            var view_data = node._data.view;\n            var offset_p = this.get_node_offset(node);\n            //logger.debug(offset_p);\n            var p = {};\n            p.x = offset_p.x + view_data.width * (node._data.layout.direction - 1) / 2;\n            p.y = offset_p.y - view_data.height / 2;\n            //logger.debug(p);\n            return p;\n        },\n\n        get_node_point_in: function (node) {\n            var p = this.get_node_offset(node);\n            return p;\n        },\n\n        get_node_point_out: function (node) {\n            var layout_data = node._data.layout;\n            var pout_cache = null;\n            if (('_pout_' in layout_data) && this.cache_valid) {\n                pout_cache = layout_data._pout_;\n            } else {\n                pout_cache = { x: -1, y: -1 };\n                layout_data._pout_ = pout_cache;\n            }\n            if (pout_cache.x == -1 || pout_cache.y == -1) {\n                if (node.isroot) {\n                    pout_cache.x = 0;\n                    pout_cache.y = 0;\n                } else {\n                    var view_data = node._data.view;\n                    var offset_p = this.get_node_offset(node);\n                    pout_cache.x = offset_p.x + (view_data.width + this.opts.pspace) * node._data.layout.direction;\n                    pout_cache.y = offset_p.y;\n                    //logger.debug('pout');\n                    //logger.debug(pout_cache);\n                }\n            }\n            return pout_cache;\n        },\n\n        get_expander_point: function (node) {\n            var p = this.get_node_point_out(node);\n            var ex_p = {};\n            if (node._data.layout.direction == jm.direction.right) {\n                ex_p.x = p.x - this.opts.pspace;\n            } else {\n                ex_p.x = p.x;\n            }\n            ex_p.y = p.y - Math.ceil(this.opts.pspace / 2);\n            return ex_p;\n        },\n\n        get_min_size: function () {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pout = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                pout = this.get_node_point_out(node);\n                if (pout.x > this.bounds.e) { this.bounds.e = pout.x; }\n                if (pout.x < this.bounds.w) { this.bounds.w = pout.x; }\n            }\n            return {\n                w: this.bounds.e - this.bounds.w,\n                h: this.bounds.s - this.bounds.n\n            }\n        },\n\n        toggle_node: function (node) {\n            if (node.isroot) {\n                return;\n            }\n            if (node.expanded) {\n                this.collapse_node(node);\n            } else {\n                this.expand_node(node);\n            }\n        },\n\n        expand_node: function (node) {\n            node.expanded = true;\n            this.part_layout(node);\n            this.set_visible(node.children, true);\n        },\n\n        collapse_node: function (node) {\n            node.expanded = false;\n            this.part_layout(node);\n            this.set_visible(node.children, false);\n        },\n\n        expand_all: function () {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!node.expanded) {\n                    node.expanded = true;\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        collapse_all: function () {\n            var nodes = this.jm.mind.nodes;\n            var c = 0;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (node.expanded && !node.isroot) {\n                    node.expanded = false\n                    c++;\n                }\n            }\n            if (c > 0) {\n                var root = this.jm.mind.root;\n                this.part_layout(root);\n                this.set_visible(root.children, true);\n            }\n        },\n\n        expand_to_depth: function (target_depth, curr_nodes, curr_depth) {\n            if (target_depth < 1) { return; }\n            var nodes = curr_nodes || this.jm.mind.root.children;\n            var depth = curr_depth || 1;\n            var i = nodes.length;\n            var node = null;\n            while (i--) {\n                node = nodes[i];\n                if (depth < target_depth) {\n                    if (!node.expanded) {\n                        this.expand_node(node);\n                    }\n                    this.expand_to_depth(target_depth, node.children, depth + 1);\n                }\n                if (depth == target_depth) {\n                    if (node.expanded) {\n                        this.collapse_node(node);\n                    }\n                }\n            }\n        },\n\n        part_layout: function (node) {\n            var root = this.jm.mind.root;\n            if (!!root) {\n                var root_layout_data = root._data.layout;\n                if (node.isroot) {\n                    root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                } else {\n                    if (node._data.layout.direction == jm.direction.right) {\n                        root_layout_data.outer_height_right = this._layout_offset_subnodes_height(root_layout_data.right_nodes);\n                    } else {\n                        root_layout_data.outer_height_left = this._layout_offset_subnodes_height(root_layout_data.left_nodes);\n                    }\n                }\n                this.bounds.s = Math.max(root_layout_data.outer_height_left, root_layout_data.outer_height_right);\n                this.cache_valid = false;\n            } else {\n                logger.warn('can not found root node');\n            }\n        },\n\n        set_visible: function (nodes, visible) {\n            var i = nodes.length;\n            var node = null;\n            var layout_data = null;\n            while (i--) {\n                node = nodes[i];\n                layout_data = node._data.layout;\n                if (node.expanded) {\n                    this.set_visible(node.children, visible);\n                } else {\n                    this.set_visible(node.children, false);\n                }\n                if (!node.isroot) {\n                    node._data.layout.visible = visible;\n                }\n            }\n        },\n\n        is_expand: function (node) {\n            return node.expanded;\n        },\n\n        is_visible: function (node) {\n            var layout_data = node._data.layout;\n            if (('visible' in layout_data) && !layout_data.visible) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n    };\n\n    jm.graph_canvas = function (view) {\n        this.opts = view.opts;\n        this.e_canvas = $c('canvas');\n        this.canvas_ctx = this.e_canvas.getContext('2d');\n        this.size = { w: 0, h: 0 };\n    };\n\n    jm.graph_canvas.prototype = {\n        element: function () {\n            return this.e_canvas;\n        },\n\n        set_size: function (w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_canvas.width = w;\n            this.e_canvas.height = h;\n        },\n\n        clear: function () {\n            this.canvas_ctx.clearRect(0, 0, this.size.w, this.size.h);\n        },\n\n        draw_line: function (pout, pin, offset) {\n            var ctx = this.canvas_ctx;\n            ctx.strokeStyle = this.opts.line_color;\n            ctx.lineWidth = this.opts.line_width;\n            ctx.lineCap = 'round';\n\n            this._bezier_to(ctx,\n                pin.x + offset.x,\n                pin.y + offset.y,\n                pout.x + offset.x,\n                pout.y + offset.y);\n        },\n\n        copy_to: function (dest_canvas_ctx, callback) {\n            dest_canvas_ctx.drawImage(this.e_canvas, 0, 0);\n            !!callback && callback();\n        },\n\n        _bezier_to: function (ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.bezierCurveTo(x1 + (x2 - x1) * 2 / 3, y1, x1, y2, x2, y2);\n            ctx.stroke();\n        },\n\n        _line_to: function (ctx, x1, y1, x2, y2) {\n            ctx.beginPath();\n            ctx.moveTo(x1, y1);\n            ctx.lineTo(x2, y2);\n            ctx.stroke();\n        }\n    };\n\n    jm.graph_svg = function (view) {\n        this.view = view;\n        this.opts = view.opts;\n        this.e_svg = jm.graph_svg.c('svg');\n        this.size = { w: 0, h: 0 };\n        this.lines = [];\n    };\n\n    jm.graph_svg.c = function (tag) {\n        return $d.createElementNS('http://www.w3.org/2000/svg', tag);\n    };\n\n    jm.graph_svg.prototype = {\n        element: function () {\n            return this.e_svg;\n        },\n\n        set_size: function (w, h) {\n            this.size.w = w;\n            this.size.h = h;\n            this.e_svg.setAttribute('width', w);\n            this.e_svg.setAttribute('height', h);\n        },\n\n        clear: function () {\n            var len = this.lines.length;\n            while (len--) {\n                this.e_svg.removeChild(this.lines[len]);\n            }\n            this.lines.length = 0;\n        },\n\n        draw_line: function (pout, pin, offset) {\n            var line = jm.graph_svg.c('path');\n            line.setAttribute('stroke', this.opts.line_color);\n            line.setAttribute('stroke-width', this.opts.line_width);\n            line.setAttribute('fill', 'transparent');\n            this.lines.push(line);\n            this.e_svg.appendChild(line);\n            this._bezier_to(line, pin.x + offset.x, pin.y + offset.y, pout.x + offset.x, pout.y + offset.y);\n        },\n\n        copy_to: function (dest_canvas_ctx, callback) {\n            var img = new Image();\n            img.onload = function () {\n                dest_canvas_ctx.drawImage(img, 0, 0);\n                !!callback && callback();\n            }\n            img.src = 'data:image/svg+xml;base64,' + btoa(new XMLSerializer().serializeToString(this.e_svg));\n        },\n\n        _bezier_to: function (path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M' + x1 + ' ' + y1 + ' C ' + (x1 + (x2 - x1) * 2 / 3) + ' ' + y1 + ', ' + x1 + ' ' + y2 + ', ' + x2 + ' ' + y2);\n        },\n\n        _line_to: function (path, x1, y1, x2, y2) {\n            path.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' L ' + x2 + ' ' + y2);\n        }\n    };\n\n    // view provider\n    jm.view_provider = function (jm, options) {\n        this.opts = options;\n        this.jm = jm;\n        this.layout = jm.layout;\n\n        this.container = null;\n        this.e_panel = null;\n        this.e_nodes = null;\n\n        this.size = { w: 0, h: 0 };\n\n        this.selected_node = null;\n        this.editing_node = null;\n\n        this.graph = null;\n    };\n\n    jm.view_provider.prototype = {\n        init: function () {\n            logger.debug('view.init');\n\n            this.container = $i(this.opts.container) ? this.opts.container : $g(this.opts.container);\n            if (!this.container) {\n                logger.error('the options.view.container was not be found in dom');\n                return;\n            }\n            this.e_panel = $c('div');\n            this.e_nodes = $c('jmnodes');\n            this.e_editor = $c('input');\n\n            this.graph = this.opts.engine.toLowerCase() === 'svg' ? new jm.graph_svg(this) : new jm.graph_canvas(this);\n\n            this.e_panel.className = 'jsmind-inner';\n            this.e_panel.appendChild(this.graph.element());\n            this.e_panel.appendChild(this.e_nodes);\n\n            this.e_editor.className = 'jsmind-editor';\n            this.e_editor.type = 'text';\n\n            this.actualZoom = 1;\n            this.zoomStep = 0.1;\n            this.minZoom = 0.5;\n            this.maxZoom = 2;\n\n            var v = this;\n            jm.util.dom.add_event(this.e_editor, 'keydown', function (e) {\n                var evt = e || event;\n                if (evt.keyCode == 13) { v.edit_node_end(); evt.stopPropagation(); }\n            });\n            jm.util.dom.add_event(this.e_editor, 'blur', function (e) {\n                v.edit_node_end();\n            });\n\n            this.container.appendChild(this.e_panel);\n        },\n\n        add_event: function (obj, event_name, event_handle) {\n            jm.util.dom.add_event(this.e_nodes, event_name, function (e) {\n                var evt = e || event;\n                event_handle.call(obj, evt);\n            });\n        },\n\n        get_binded_nodeid: function (element) {\n            if (element == null) {\n                return null;\n            }\n            var tagName = element.tagName.toLowerCase();\n            if (tagName == 'jmnodes' || tagName == 'body' || tagName == 'html') {\n                return null;\n            }\n            if (tagName == 'jmnode' || tagName == 'jmexpander') {\n                return element.getAttribute('nodeid');\n            } else {\n                return this.get_binded_nodeid(element.parentElement);\n            }\n        },\n\n        is_expander: function (element) {\n            return (element.tagName.toLowerCase() == 'jmexpander');\n        },\n\n        reset: function () {\n            logger.debug('view.reset');\n            this.selected_node = null;\n            this.clear_lines();\n            this.clear_nodes();\n            this.reset_theme();\n        },\n\n        reset_theme: function () {\n            var theme_name = this.jm.options.theme;\n            if (!!theme_name) {\n                this.e_nodes.className = 'theme-' + theme_name;\n            } else {\n                this.e_nodes.className = '';\n            }\n        },\n\n        reset_custom_style: function () {\n            var nodes = this.jm.mind.nodes;\n            for (var nodeid in nodes) {\n                this.reset_node_custom_style(nodes[nodeid]);\n            }\n        },\n\n        load: function () {\n            logger.debug('view.load');\n            this.init_nodes();\n        },\n\n        expand_size: function () {\n            var min_size = this.layout.get_min_size();\n            var min_width = min_size.w + this.opts.hmargin * 2;\n            var min_height = min_size.h + this.opts.vmargin * 2;\n            var client_w = this.e_panel.clientWidth;\n            var client_h = this.e_panel.clientHeight;\n            if (client_w < min_width) { client_w = min_width; }\n            if (client_h < min_height) { client_h = min_height; }\n            this.size.w = client_w;\n            this.size.h = client_h;\n        },\n\n        init_nodes_size: function (node) {\n            var view_data = node._data.view;\n            view_data.width = view_data.element.clientWidth;\n            view_data.height = view_data.element.clientHeight;\n        },\n\n        init_nodes: function () {\n            var nodes = this.jm.mind.nodes;\n            var doc_frag = $d.createDocumentFragment();\n            for (var nodeid in nodes) {\n                this.create_node_element(nodes[nodeid], doc_frag);\n            }\n            this.e_nodes.appendChild(doc_frag);\n            for (var nodeid in nodes) {\n                this.init_nodes_size(nodes[nodeid]);\n            }\n        },\n\n        add_node: function (node) {\n            this.create_node_element(node, this.e_nodes);\n            this.init_nodes_size(node);\n        },\n\n        create_node_element: function (node, parent_node) {\n            var view_data = null;\n            if ('view' in node._data) {\n                view_data = node._data.view;\n            } else {\n                view_data = {};\n                node._data.view = view_data;\n            }\n\n            var d = $c('jmnode');\n            if (node.isroot) {\n                d.className = 'root';\n            } else {\n                var d_e = $c('jmexpander');\n                $t(d_e, '-');\n                d_e.setAttribute('nodeid', node.id);\n                d_e.style.visibility = 'hidden';\n                parent_node.appendChild(d_e);\n                view_data.expander = d_e;\n            }\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(d, node.topic);\n                } else {\n                    $t(d, node.topic);\n                }\n            }\n            d.setAttribute('nodeid', node.id);\n            d.style.visibility = 'hidden';\n            this._reset_node_custom_style(d, node.data);\n\n            parent_node.appendChild(d);\n            view_data.element = d;\n        },\n\n        remove_node: function (node) {\n            if (this.selected_node != null && this.selected_node.id == node.id) {\n                this.selected_node = null;\n            }\n            if (this.editing_node != null && this.editing_node.id == node.id) {\n                node._data.view.element.removeChild(this.e_editor);\n                this.editing_node = null;\n            }\n            var children = node.children;\n            var i = children.length;\n            while (i--) {\n                this.remove_node(children[i]);\n            }\n            if (node._data.view) {\n                var element = node._data.view.element;\n                var expander = node._data.view.expander;\n                this.e_nodes.removeChild(element);\n                this.e_nodes.removeChild(expander);\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n        },\n\n        update_node: function (node) {\n            var view_data = node._data.view;\n            var element = view_data.element;\n            if (!!node.topic) {\n                if (this.opts.support_html) {\n                    $h(element, node.topic);\n                } else {\n                    $t(element, node.topic);\n                }\n            }\n            view_data.width = element.clientWidth;\n            view_data.height = element.clientHeight;\n        },\n\n        select_node: function (node) {\n            if (!!this.selected_node) {\n                this.selected_node._data.view.element.className =\n                    this.selected_node._data.view.element.className.replace(/\\s*selected\\b/i, '');\n                this.reset_node_custom_style(this.selected_node);\n            }\n            if (!!node) {\n                this.selected_node = node;\n                node._data.view.element.className += ' selected';\n                this.clear_node_custom_style(node);\n            }\n        },\n\n        select_clear: function () {\n            this.select_node(null);\n        },\n\n        get_editing_node: function () {\n            return this.editing_node;\n        },\n\n        is_editing: function () {\n            return (!!this.editing_node);\n        },\n\n        edit_node_begin: function (node) {\n            if (!node.topic) {\n                logger.warn(\"don't edit image nodes\");\n                return;\n            }\n            if (this.editing_node != null) {\n                this.edit_node_end();\n            }\n            this.editing_node = node;\n            var view_data = node._data.view;\n            var element = view_data.element;\n            var topic = node.topic;\n            var ncs = getComputedStyle(element);\n            this.e_editor.value = topic;\n            this.e_editor.style.width = (element.clientWidth - parseInt(ncs.getPropertyValue('padding-left')) - parseInt(ncs.getPropertyValue('padding-right'))) + 'px';\n            element.innerHTML = '';\n            element.appendChild(this.e_editor);\n            element.style.zIndex = 5;\n            this.e_editor.focus();\n            this.e_editor.select();\n        },\n\n        edit_node_end: function () {\n            if (this.editing_node != null) {\n                var node = this.editing_node;\n                this.editing_node = null;\n                var view_data = node._data.view;\n                var element = view_data.element;\n                var topic = this.e_editor.value;\n                element.style.zIndex = 'auto';\n                element.removeChild(this.e_editor);\n                if (jm.util.text.is_empty(topic) || node.topic === topic) {\n                    if (this.opts.support_html) {\n                        $h(element, node.topic);\n                    } else {\n                        $t(element, node.topic);\n                    }\n                } else {\n                    this.jm.update_node(node.id, topic);\n                }\n            }\n        },\n\n        get_view_offset: function () {\n            var bounds = this.layout.bounds;\n            var _x = (this.size.w - bounds.e - bounds.w) / 2;\n            var _y = this.size.h / 2;\n            return { x: _x, y: _y };\n        },\n\n        resize: function () {\n            this.graph.set_size(1, 1);\n            this.e_nodes.style.width = '1px';\n            this.e_nodes.style.height = '1px';\n\n            this.expand_size();\n            this._show();\n        },\n\n        _show: function () {\n            this.graph.set_size(this.size.w, this.size.h);\n            this.e_nodes.style.width = this.size.w + 'px';\n            this.e_nodes.style.height = this.size.h + 'px';\n            this.show_nodes();\n            this.show_lines();\n            //this.layout.cache_valid = true;\n            this.jm.invoke_event_handle(jm.event_type.resize, { data: [] });\n        },\n\n        zoomIn: function () {\n            return this.setZoom(this.actualZoom + this.zoomStep);\n        },\n\n        zoomOut: function () {\n            return this.setZoom(this.actualZoom - this.zoomStep);\n        },\n\n        setZoom: function (zoom) {\n            if ((zoom < this.minZoom) || (zoom > this.maxZoom)) {\n                return false;\n            }\n            this.actualZoom = zoom;\n            for (var i = 0; i < this.e_panel.children.length; i++) {\n                this.e_panel.children[i].style.transform = 'scale(' + zoom + ')';\n            };\n            this.show(true);\n            return true;\n\n        },\n\n        _center_root: function () {\n            // center root node\n            var outer_w = this.e_panel.clientWidth;\n            var outer_h = this.e_panel.clientHeight;\n            if (this.size.w > outer_w) {\n                var _offset = this.get_view_offset();\n                this.e_panel.scrollLeft = _offset.x - outer_w / 2;\n            }\n            if (this.size.h > outer_h) {\n                this.e_panel.scrollTop = (this.size.h - outer_h) / 2;\n            }\n        },\n\n        show: function (keep_center) {\n            logger.debug('view.show');\n            this.expand_size();\n            this._show();\n            if (!!keep_center) {\n                this._center_root();\n            }\n        },\n\n        relayout: function () {\n            this.expand_size();\n            this._show();\n        },\n\n        save_location: function (node) {\n            var vd = node._data.view;\n            vd._saved_location = {\n                x: parseInt(vd.element.style.left) - this.e_panel.scrollLeft,\n                y: parseInt(vd.element.style.top) - this.e_panel.scrollTop,\n            };\n        },\n\n        restore_location: function (node) {\n            var vd = node._data.view;\n            this.e_panel.scrollLeft = parseInt(vd.element.style.left) - vd._saved_location.x;\n            this.e_panel.scrollTop = parseInt(vd.element.style.top) - vd._saved_location.y;\n        },\n\n        clear_nodes: function () {\n            var mind = this.jm.mind;\n            if (mind == null) {\n                return;\n            }\n            var nodes = mind.nodes;\n            var node = null;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                node._data.view.element = null;\n                node._data.view.expander = null;\n            }\n            this.e_nodes.innerHTML = '';\n        },\n\n        show_nodes: function () {\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var node_element = null;\n            var expander = null;\n            var p = null;\n            var p_expander = null;\n            var expander_text = '-';\n            var view_data = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                view_data = node._data.view;\n                node_element = view_data.element;\n                expander = view_data.expander;\n                if (!this.layout.is_visible(node)) {\n                    node_element.style.display = 'none';\n                    expander.style.display = 'none';\n                    continue;\n                }\n                this.reset_node_custom_style(node);\n                p = this.layout.get_node_point(node);\n                view_data.abs_x = _offset.x + p.x;\n                view_data.abs_y = _offset.y + p.y;\n                node_element.style.left = (_offset.x + p.x) + 'px';\n                node_element.style.top = (_offset.y + p.y) + 'px';\n                node_element.style.display = '';\n                node_element.style.visibility = 'visible';\n                if (!node.isroot && node.children.length > 0) {\n                    expander_text = node.expanded ? '-' : '+';\n                    p_expander = this.layout.get_expander_point(node);\n                    expander.style.left = (_offset.x + p_expander.x) + 'px';\n                    expander.style.top = (_offset.y + p_expander.y) + 'px';\n                    expander.style.display = '';\n                    expander.style.visibility = 'visible';\n                    $t(expander, expander_text);\n                }\n                // hide expander while all children have been removed\n                if (!node.isroot && node.children.length == 0) {\n                    expander.style.display = 'none';\n                    expander.style.visibility = 'hidden';\n                }\n            }\n        },\n\n        reset_node_custom_style: function (node) {\n            this._reset_node_custom_style(node._data.view.element, node.data);\n        },\n\n        _reset_node_custom_style: function (node_element, node_data) {\n            if ('background-color' in node_data) {\n                node_element.style.backgroundColor = node_data['background-color'];\n            }\n            if ('foreground-color' in node_data) {\n                node_element.style.color = node_data['foreground-color'];\n            }\n            if ('width' in node_data) {\n                node_element.style.width = node_data['width'] + 'px';\n            }\n            if ('height' in node_data) {\n                node_element.style.height = node_data['height'] + 'px';\n            }\n            if ('font-size' in node_data) {\n                node_element.style.fontSize = node_data['font-size'] + 'px';\n            }\n            if ('font-weight' in node_data) {\n                node_element.style.fontWeight = node_data['font-weight'];\n            }\n            if ('font-style' in node_data) {\n                node_element.style.fontStyle = node_data['font-style'];\n            }\n            if ('background-image' in node_data) {\n                var backgroundImage = node_data['background-image'];\n                if (backgroundImage.startsWith('data') && node_data['width'] && node_data['height']) {\n                    var img = new Image();\n\n                    img.onload = function () {\n                        var c = $c('canvas');\n                        c.width = node_element.clientWidth;\n                        c.height = node_element.clientHeight;\n                        var img = this;\n                        if (c.getContext) {\n                            var ctx = c.getContext('2d');\n                            ctx.drawImage(img, 2, 2, node_element.clientWidth, node_element.clientHeight);\n                            var scaledImageData = c.toDataURL();\n                            node_element.style.backgroundImage = 'url(' + scaledImageData + ')';\n                        }\n                    };\n                    img.src = backgroundImage;\n\n                } else {\n                    node_element.style.backgroundImage = 'url(' + backgroundImage + ')';\n                }\n                node_element.style.backgroundSize = '99%';\n\n                if ('background-rotation' in node_data) {\n                    node_element.style.transform = 'rotate(' + node_data['background-rotation'] + 'deg)';\n                }\n            }\n        },\n\n        clear_node_custom_style: function (node) {\n            var node_element = node._data.view.element;\n            node_element.style.backgroundColor = \"\";\n            node_element.style.color = \"\";\n        },\n\n        clear_lines: function () {\n            this.graph.clear();\n        },\n\n        show_lines: function () {\n            this.clear_lines();\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var pin = null;\n            var pout = null;\n            var _offset = this.get_view_offset();\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                if (!!node.isroot) { continue; }\n                if (('visible' in node._data.layout) && !node._data.layout.visible) { continue; }\n                pin = this.layout.get_node_point_in(node);\n                pout = this.layout.get_node_point_out(node.parent);\n                this.graph.draw_line(pout, pin, _offset);\n            }\n        },\n    };\n\n    // shortcut provider\n    jm.shortcut_provider = function (jm, options) {\n        this.jm = jm;\n        this.opts = options;\n        this.mapping = options.mapping;\n        this.handles = options.handles;\n        this._mapping = {};\n    };\n\n    jm.shortcut_provider.prototype = {\n        init: function () {\n            jm.util.dom.add_event($d, 'keydown', this.handler.bind(this));\n\n            this.handles['addchild'] = this.handle_addchild;\n            this.handles['addbrother'] = this.handle_addbrother;\n            this.handles['editnode'] = this.handle_editnode;\n            this.handles['delnode'] = this.handle_delnode;\n            this.handles['toggle'] = this.handle_toggle;\n            this.handles['up'] = this.handle_up;\n            this.handles['down'] = this.handle_down;\n            this.handles['left'] = this.handle_left;\n            this.handles['right'] = this.handle_right;\n\n            for (var handle in this.mapping) {\n                if (!!this.mapping[handle] && (handle in this.handles)) {\n                    this._mapping[this.mapping[handle]] = this.handles[handle];\n                }\n            }\n        },\n\n        enable_shortcut: function () {\n            this.opts.enable = true;\n        },\n\n        disable_shortcut: function () {\n            this.opts.enable = false;\n        },\n\n        handler: function (e) {\n            if (this.jm.view.is_editing()) { return; }\n            var evt = e || event;\n            if (!this.opts.enable) { return true; }\n            var kc = evt.keyCode + (evt.metaKey << 13) + (evt.ctrlKey << 12) + (evt.altKey << 11) + (evt.shiftKey << 10);\n            if (kc in this._mapping) {\n                this._mapping[kc].call(this, this.jm, e);\n            }\n        },\n\n        handle_addchild: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.add_node(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_addbrother: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                var nodeid = jm.util.uuid.newid();\n                var node = _jm.insert_node_after(selected_node, nodeid, 'New Node');\n                if (!!node) {\n                    _jm.select_node(nodeid);\n                    _jm.begin_edit(nodeid);\n                }\n            }\n        },\n        handle_editnode: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.begin_edit(selected_node);\n            }\n        },\n        handle_delnode: function (_jm, e) {\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node && !selected_node.isroot) {\n                _jm.select_node(selected_node.parent);\n                _jm.remove_node(selected_node);\n            }\n        },\n        handle_toggle: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                _jm.toggle_node(selected_node.id);\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n        handle_up: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var up_node = _jm.find_node_before(selected_node);\n                if (!up_node) {\n                    var np = _jm.find_node_before(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        up_node = np.children[np.children.length - 1];\n                    }\n                }\n                if (!!up_node) {\n                    _jm.select_node(up_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_down: function (_jm, e) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            if (!!selected_node) {\n                var down_node = _jm.find_node_after(selected_node);\n                if (!down_node) {\n                    var np = _jm.find_node_after(selected_node.parent);\n                    if (!!np && np.children.length > 0) {\n                        down_node = np.children[0];\n                    }\n                }\n                if (!!down_node) {\n                    _jm.select_node(down_node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n\n        handle_left: function (_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.left);\n        },\n        handle_right: function (_jm, e) {\n            this._handle_direction(_jm, e, jm.direction.right);\n        },\n        _handle_direction: function (_jm, e, d) {\n            var evt = e || event;\n            var selected_node = _jm.get_selected_node();\n            var node = null;\n            if (!!selected_node) {\n                if (selected_node.isroot) {\n                    var c = selected_node.children;\n                    var children = [];\n                    for (var i = 0; i < c.length; i++) {\n                        if (c[i].direction === d) {\n                            children.push(i)\n                        }\n                    }\n                    node = c[children[Math.floor((children.length - 1) / 2)]];\n                }\n                else if (selected_node.direction === d) {\n                    var children = selected_node.children;\n                    var childrencount = children.length;\n                    if (childrencount > 0) {\n                        node = children[Math.floor((childrencount - 1) / 2)]\n                    }\n                } else {\n                    node = selected_node.parent;\n                }\n                if (!!node) {\n                    _jm.select_node(node);\n                }\n                evt.stopPropagation();\n                evt.preventDefault();\n            }\n        },\n    };\n\n\n    // plugin\n    jm.plugin = function (name, init) {\n        this.name = name;\n        this.init = init;\n    };\n\n    jm.plugins = [];\n\n    jm.register_plugin = function (plugin) {\n        if (plugin instanceof jm.plugin) {\n            jm.plugins.push(plugin);\n        }\n    };\n\n    jm.init_plugins = function (sender) {\n        $w.setTimeout(function () {\n            jm._init_plugins(sender);\n        }, 0);\n    };\n\n    jm._init_plugins = function (sender) {\n        var l = jm.plugins.length;\n        var fn_init = null;\n        for (var i = 0; i < l; i++) {\n            fn_init = jm.plugins[i].init;\n            if (typeof fn_init === 'function') {\n                fn_init(sender);\n            }\n        }\n    };\n\n    // quick way\n    jm.show = function (options, mind) {\n        var _jm = new jm(options);\n        _jm.show(mind);\n        return _jm;\n    };\n\n    // export jsmind\n    if (typeof module !== 'undefined' && typeof exports === 'object') {\n        module.exports = jm;\n        $w[__name__] = jm;\n    } else if (typeof define === 'function' && (define.amd || define.cmd)) {\n        define(function () { return jm; });\n    } else {\n        $w[__name__] = jm;\n    }\n})(typeof window !== 'undefined' ? window : global);\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/JsMind/jsmind.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 10\n// module chunks = 0","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/index.js!./jsmind.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/JsMind/jsmind.css\n// module id = 11\n// module chunks = 0","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\n// module id = 12\n// module chunks = 0","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".jsmind-inner{position:relative;overflow:auto;width:100%;height:100%;moz-user-select:-moz-none;-moz-user-select:none;-o-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}canvas{z-index:1}canvas,jmnodes{position:absolute}jmnodes{z-index:2;background-color:transparent}jmnode{cursor:default;max-width:400px;white-space:nowrap;text-overflow:ellipsis}jmexpander,jmnode{position:absolute;overflow:hidden}jmexpander{width:11px;height:11px;display:block;line-height:12px;font-size:12px;text-align:center;border-radius:6px;border-width:1px;border-style:solid;cursor:pointer}jmnode{padding:10px;background-color:#fff;color:#333;border-radius:5px;box-shadow:1px 1px 1px #666;font:16px/1.125 Verdana,Arial,Helvetica,sans-serif}jmnode:hover{box-shadow:2px 2px 8px #000;background-color:#ebebeb;color:#333}jmnode.selected{background-color:#11f;color:#fff;box-shadow:2px 2px 8px #000}jmnode.root{font-size:24px}jmexpander{border-color:gray}jmexpander:hover{border-color:#000}@media screen and (max-device-width:1024px){jmnode{padding:5px;border-radius:3px;font-size:14px}jmnode.root{font-size:21px}}jmnodes.theme-primary jmnode{background-color:#428bca;color:#fff;border-color:#357ebd}jmnodes.theme-primary jmnode:hover{background-color:#3276b1;border-color:#285e8e}jmnodes.theme-primary jmnode.selected{background-color:#f1c40f;color:#fff}jmnodes.theme-warning jmnode{background-color:#f0ad4e;border-color:#eea236;color:#fff}jmnodes.theme-warning jmnode:hover{background-color:#ed9c28;border-color:#d58512}jmnodes.theme-warning jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-danger jmnode{background-color:#d9534f;border-color:#d43f3a;color:#fff}jmnodes.theme-danger jmnode:hover{background-color:#d2322d;border-color:#ac2925}jmnodes.theme-danger jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-success jmnode{background-color:#5cb85c;border-color:#4cae4c;color:#fff}jmnodes.theme-success jmnode:hover{background-color:#47a447;border-color:#398439}jmnodes.theme-success jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-info jmnode{background-color:#5dc0de;border-color:#46b8da;color:#fff}jmnodes.theme-info jmnode:hover{background-color:#39b3d7;border-color:#269abc}jmnodes.theme-info jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-greensea jmnode{background-color:#1abc9c;color:#fff}jmnodes.theme-greensea jmnode:hover{background-color:#16a085}jmnodes.theme-greensea jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-nephrite jmnode{background-color:#2ecc71;color:#fff}jmnodes.theme-nephrite jmnode:hover{background-color:#27ae60}jmnodes.theme-nephrite jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-belizehole jmnode{background-color:#3498db;color:#fff}jmnodes.theme-belizehole jmnode:hover{background-color:#2980b9}jmnodes.theme-belizehole jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-wisteria jmnode{background-color:#9b59b6;color:#fff}jmnodes.theme-wisteria jmnode:hover{background-color:#8e44ad}jmnodes.theme-wisteria jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-asphalt jmnode{background-color:#34495e;color:#fff}jmnodes.theme-asphalt jmnode:hover{background-color:#2c3e50}jmnodes.theme-asphalt jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-orange jmnode{background-color:#f1c40f;color:#fff}jmnodes.theme-orange jmnode:hover{background-color:#f39c12}jmnodes.theme-orange jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-pumpkin jmnode{background-color:#e67e22;color:#fff}jmnodes.theme-pumpkin jmnode:hover{background-color:#d35400}jmnodes.theme-pumpkin jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-pomegranate jmnode{background-color:#e74c3c;color:#fff}jmnodes.theme-pomegranate jmnode:hover{background-color:#c0392b}jmnodes.theme-pomegranate jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-clouds jmnode{background-color:#ecf0f1;color:#333}jmnodes.theme-clouds jmnode:hover{background-color:#bdc3c7}jmnodes.theme-clouds jmnode.selected{background-color:#11f;color:#fff}jmnodes.theme-asbestos jmnode{background-color:#95a5a6;color:#fff}jmnodes.theme-asbestos jmnode:hover{background-color:#7f8c8d}jmnodes.theme-asbestos jmnode.selected{background-color:#11f;color:#fff}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./src/components/JsMind/jsmind.css\n// module id = 13\n// module chunks = 0","/*\n * Released under BSD License\n * Copyright (c) 2014-2015 hizzgdev@163.com\n * \n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n(function ($w) {\n    'use strict';\n    var $d = $w.document;\n    var __name__ = 'jsMind';\n    var jsMind = $w[__name__];\n    if (!jsMind) { return; }\n    if (typeof jsMind.draggable != 'undefined') { return; }\n\n    var jdom = jsMind.util.dom;\n    var clear_selection = 'getSelection' in $w ? function () {\n        $w.getSelection().removeAllRanges();\n    } : function () {\n        $d.selection.empty();\n    };\n\n    var options = {\n        line_width: 5,\n        lookup_delay: 500,\n        lookup_interval: 80\n    };\n\n    jsMind.draggable = function (jm) {\n        this.jm = jm;\n        this.e_canvas = null;\n        this.canvas_ctx = null;\n        this.shadow = null;\n        this.shadow_w = 0;\n        this.shadow_h = 0;\n        this.active_node = null;\n        this.target_node = null;\n        this.target_direct = null;\n        this.client_w = 0;\n        this.client_h = 0;\n        this.offset_x = 0;\n        this.offset_y = 0;\n        this.hlookup_delay = 0;\n        this.hlookup_timer = 0;\n        this.capture = false;\n        this.moved = false;\n    };\n\n    jsMind.draggable.prototype = {\n        init: function () {\n            this._create_canvas();\n            this._create_shadow();\n            this._event_bind();\n        },\n\n        resize: function () {\n            this.jm.view.e_nodes.appendChild(this.shadow);\n            this.e_canvas.width = this.jm.view.size.w;\n            this.e_canvas.height = this.jm.view.size.h;\n        },\n\n        _create_canvas: function () {\n            var c = $d.createElement('canvas');\n            this.jm.view.e_panel.appendChild(c);\n            var ctx = c.getContext('2d');\n            this.e_canvas = c;\n            this.canvas_ctx = ctx;\n        },\n\n        _create_shadow: function () {\n            var s = $d.createElement('jmnode');\n            s.style.visibility = 'hidden';\n            s.style.zIndex = '3';\n            s.style.cursor = 'move';\n            s.style.opacity = '0.7';\n            this.shadow = s;\n        },\n\n        reset_shadow: function (el) {\n            var s = this.shadow.style;\n            this.shadow.innerHTML = el.innerHTML;\n            s.left = el.style.left;\n            s.top = el.style.top;\n            s.width = el.style.width;\n            s.height = el.style.height;\n            s.backgroundImage = el.style.backgroundImage;\n            s.backgroundSize = el.style.backgroundSize;\n            s.transform = el.style.transform;\n            this.shadow_w = this.shadow.clientWidth;\n            this.shadow_h = this.shadow.clientHeight;\n\n        },\n\n        show_shadow: function () {\n            if (!this.moved) {\n                this.shadow.style.visibility = 'visible';\n            }\n        },\n\n        hide_shadow: function () {\n            this.shadow.style.visibility = 'hidden';\n        },\n\n        _magnet_shadow: function (node) {\n            if (!!node) {\n                this.canvas_ctx.lineWidth = options.line_width;\n                this.canvas_ctx.strokeStyle = 'rgba(0,0,0,0.3)';\n                this.canvas_ctx.lineCap = 'round';\n                this._clear_lines();\n                this._canvas_lineto(node.sp.x, node.sp.y, node.np.x, node.np.y);\n            }\n        },\n\n        _clear_lines: function () {\n            this.canvas_ctx.clearRect(0, 0, this.jm.view.size.w, this.jm.view.size.h);\n        },\n\n        _canvas_lineto: function (x1, y1, x2, y2) {\n            this.canvas_ctx.beginPath();\n            this.canvas_ctx.moveTo(x1, y1);\n            this.canvas_ctx.lineTo(x2, y2);\n            this.canvas_ctx.stroke();\n        },\n\n        _lookup_close_node: function () {\n            var root = this.jm.get_root();\n            var root_location = root.get_location();\n            var root_size = root.get_size();\n            var root_x = root_location.x + root_size.w / 2;\n\n            var sw = this.shadow_w;\n            var sh = this.shadow_h;\n            var sx = this.shadow.offsetLeft;\n            var sy = this.shadow.offsetTop;\n\n            var ns, nl;\n\n            var direct = (sx + sw / 2) >= root_x ?\n                jsMind.direction.right : jsMind.direction.left;\n            var nodes = this.jm.mind.nodes;\n            var node = null;\n            var min_distance = Number.MAX_VALUE;\n            var distance = 0;\n            var closest_node = null;\n            var closest_p = null;\n            var shadow_p = null;\n            for (var nodeid in nodes) {\n                var np, sp;\n                node = nodes[nodeid];\n                if (node.isroot || node.direction == direct) {\n                    if (node.id == this.active_node.id) {\n                        continue;\n                    }\n                    ns = node.get_size();\n                    nl = node.get_location();\n                    if (direct == jsMind.direction.right) {\n                        if (sx - nl.x - ns.w <= 0) { continue; }\n                        distance = Math.abs(sx - nl.x - ns.w) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + ns.w - options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + options.line_width, y: sy + sh / 2 };\n                    } else {\n                        if (nl.x - sx - sw <= 0) { continue; }\n                        distance = Math.abs(sx + sw - nl.x) + Math.abs(sy + sh / 2 - nl.y - ns.h / 2);\n                        np = { x: nl.x + options.line_width, y: nl.y + ns.h / 2 };\n                        sp = { x: sx + sw - options.line_width, y: sy + sh / 2 };\n                    }\n                    if (distance < min_distance) {\n                        closest_node = node;\n                        closest_p = np;\n                        shadow_p = sp;\n                        min_distance = distance;\n                    }\n                }\n            }\n            var result_node = null;\n            if (!!closest_node) {\n                result_node = {\n                    node: closest_node,\n                    direction: direct,\n                    sp: shadow_p,\n                    np: closest_p\n                };\n            }\n            return result_node;\n        },\n\n        lookup_close_node: function () {\n            var node_data = this._lookup_close_node();\n            if (!!node_data) {\n                this._magnet_shadow(node_data);\n                this.target_node = node_data.node;\n                this.target_direct = node_data.direction;\n            }\n        },\n\n        _event_bind: function () {\n            var jd = this;\n            var container = this.jm.view.container;\n            jdom.add_event(container, 'mousedown', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'mousemove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'mouseup', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchstart', function (e) {\n                var evt = e || event;\n                jd.dragstart.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchmove', function (e) {\n                var evt = e || event;\n                jd.drag.call(jd, evt);\n            });\n            jdom.add_event(container, 'touchend', function (e) {\n                var evt = e || event;\n                jd.dragend.call(jd, evt);\n            });\n        },\n\n        dragstart: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) { return; }\n            this.active_node = null;\n\n            var jview = this.jm.view;\n            var el = e.target || event.srcElement;\n            if (el.tagName.toLowerCase() != 'jmnode') { return; }\n            var nodeid = jview.get_binded_nodeid(el);\n            if (!!nodeid) {\n                var node = this.jm.get_node(nodeid);\n                if (!node.isroot) {\n                    this.reset_shadow(el);\n                    this.active_node = node;\n                    this.offset_x = (e.clientX || e.touches[0].clientX) - el.offsetLeft;\n                    this.offset_y = (e.clientY || e.touches[0].clientY) - el.offsetTop;\n                    this.client_hw = Math.floor(el.clientWidth / 2);\n                    this.client_hh = Math.floor(el.clientHeight / 2);\n                    if (this.hlookup_delay != 0) {\n                        $w.clearTimeout(this.hlookup_delay);\n                    }\n                    if (this.hlookup_timer != 0) {\n                        $w.clearInterval(this.hlookup_timer);\n                    }\n                    var jd = this;\n                    this.hlookup_delay = $w.setTimeout(function () {\n                        jd.hlookup_delay = 0;\n                        jd.hlookup_timer = $w.setInterval(function () {\n                            jd.lookup_close_node.call(jd);\n                        }, options.lookup_interval);\n                    }, options.lookup_delay);\n                    this.capture = true;\n                }\n            }\n        },\n\n        drag: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) {\n                e.preventDefault();\n                this.show_shadow();\n                this.moved = true;\n                clear_selection();\n                var px = (e.clientX || e.touches[0].clientX) - this.offset_x;\n                var py = (e.clientY || e.touches[0].clientY) - this.offset_y;\n                var cx = px + this.client_hw;\n                var cy = py + this.client_hh;\n                this.shadow.style.left = px + 'px';\n                this.shadow.style.top = py + 'px';\n                clear_selection();\n            }\n        },\n\n        dragend: function (e) {\n            if (!this.jm.get_editable()) { return; }\n            if (this.capture) {\n                if (this.hlookup_delay != 0) {\n                    $w.clearTimeout(this.hlookup_delay);\n                    this.hlookup_delay = 0;\n                    this._clear_lines();\n                }\n                if (this.hlookup_timer != 0) {\n                    $w.clearInterval(this.hlookup_timer);\n                    this.hlookup_timer = 0;\n                    this._clear_lines();\n                }\n                if (this.moved) {\n                    var src_node = this.active_node;\n                    var target_node = this.target_node;\n                    var target_direct = this.target_direct;\n                    this.move_node(src_node, target_node, target_direct);\n                }\n                this.hide_shadow();\n            }\n            this.moved = false;\n            this.capture = false;\n        },\n\n        move_node: function (src_node, target_node, target_direct) {\n            var shadow_h = this.shadow.offsetTop;\n            if (!!target_node && !!src_node && !jsMind.node.inherited(src_node, target_node)) {\n                // lookup before_node\n                var sibling_nodes = target_node.children;\n                var sc = sibling_nodes.length;\n                var node = null;\n                var delta_y = Number.MAX_VALUE;\n                var node_before = null;\n                var beforeid = '_last_';\n                while (sc--) {\n                    node = sibling_nodes[sc];\n                    if (node.direction == target_direct && node.id != src_node.id) {\n                        var dy = node.get_location().y - shadow_h;\n                        if (dy > 0 && dy < delta_y) {\n                            delta_y = dy;\n                            node_before = node;\n                            beforeid = '_first_';\n                        }\n                    }\n                }\n                if (!!node_before) { beforeid = node_before.id; }\n                this.jm.move_node(src_node.id, beforeid, target_node.id, target_direct);\n            }\n            this.active_node = null;\n            this.target_node = null;\n            this.target_direct = null;\n        },\n\n        jm_event_handle: function (type, data) {\n            if (type === jsMind.event_type.resize) {\n                this.resize();\n            }\n        }\n    };\n\n    var draggable_plugin = new jsMind.plugin('draggable', function (jm) {\n        var jd = new jsMind.draggable(jm);\n        jd.init();\n        jm.add_event_listener(function (type, data) {\n            jd.jm_event_handle.call(jd, type, data);\n        });\n    });\n\n    jsMind.register_plugin(draggable_plugin);\n\n})(window);\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/JsMind/jsmind.draggable.js","/*\n * Released under BSD License\n * Copyright (c) 2014-2015 hizzgdev@163.com\n * \n * Project Home:\n *   https://github.com/hizzgdev/jsmind/\n */\n\n(function ($w) {\n    'use strict';\n\n    var __name__ = 'jsMind';\n    var jsMind = $w[__name__];\n    if (!jsMind) { return; }\n    if (typeof jsMind.screenshot != 'undefined') { return; }\n    var $d = $w.document;\n    var $c = function (tag) { return $d.createElement(tag); };\n\n    var css = function (cstyle, property_name) {\n        return cstyle.getPropertyValue(property_name);\n    };\n    var is_visible = function (cstyle) {\n        var visibility = css(cstyle, 'visibility');\n        var display = css(cstyle, 'display');\n        return (visibility !== 'hidden' && display !== 'none');\n    };\n    var jcanvas = {};\n    jcanvas.rect = function (ctx, x, y, w, h, r) {\n        if (w < 2 * r) r = w / 2;\n        if (h < 2 * r) r = h / 2;\n        ctx.moveTo(x + r, y);\n        ctx.arcTo(x + w, y, x + w, y + h, r);\n        ctx.arcTo(x + w, y + h, x, y + h, r);\n        ctx.arcTo(x, y + h, x, y, r);\n        ctx.arcTo(x, y, x + w, y, r);\n    };\n\n    jcanvas.text_multiline = function (ctx, text, x, y, w, h, lineheight) {\n        var line = '';\n        var text_len = text.length;\n        var chars = text.split('');\n        var test_line = null;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'top';\n        for (var i = 0; i < text_len; i++) {\n            test_line = line + chars[i];\n            if (ctx.measureText(test_line).width > w && i > 0) {\n                ctx.fillText(line, x, y);\n                line = chars[i];\n                y += lineheight;\n            } else {\n                line = test_line;\n            }\n        }\n        ctx.fillText(line, x, y);\n    };\n\n    jcanvas.text_ellipsis = function (ctx, text, x, y, w, h) {\n        var center_y = y + h / 2;\n        var text = jcanvas.fittingString(ctx, text, w);\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'middle';\n        ctx.fillText(text, x, center_y, w);\n    };\n\n    jcanvas.fittingString = function (ctx, text, max_width) {\n        var width = ctx.measureText(text).width;\n        var ellipsis = '…'\n        var ellipsis_width = ctx.measureText(ellipsis).width;\n        if (width <= max_width || width <= ellipsis_width) {\n            return text;\n        } else {\n            var len = text.length;\n            while (width >= max_width - ellipsis_width && len-- > 0) {\n                text = text.substring(0, len);\n                width = ctx.measureText(text).width;\n            }\n            return text + ellipsis;\n        }\n    };\n\n    jcanvas.image = function (ctx, url, x, y, w, h, r, rotation, callback) {\n        var img = new Image();\n        img.onload = function () {\n            ctx.save();\n            ctx.translate(x, y);\n            ctx.save();\n            ctx.beginPath();\n            jcanvas.rect(ctx, 0, 0, w, h, r);\n            ctx.closePath();\n            ctx.clip();\n            ctx.translate(w / 2, h / 2);\n            ctx.rotate(rotation * Math.PI / 180);\n            ctx.drawImage(img, -w / 2, -h / 2);\n            ctx.restore();\n            ctx.restore();\n            !!callback && callback();\n        }\n        img.src = url;\n    };\n\n    jsMind.screenshot = function (jm) {\n        this.jm = jm;\n        this.canvas_elem = null;\n        this.canvas_ctx = null;\n        this._inited = false;\n    };\n\n    jsMind.screenshot.prototype = {\n        init: function () {\n            if (this._inited) { return; }\n            console.log('init');\n            var c = $c('canvas');\n            var ctx = c.getContext('2d');\n\n            this.canvas_elem = c;\n            this.canvas_ctx = ctx;\n            this.jm.view.e_panel.appendChild(c);\n            this._inited = true;\n            this.resize();\n        },\n\n        shoot: function (callback) {\n            this.init();\n            this._draw(function () {\n                !!callback && callback();\n                this.clean();\n            }.bind(this));\n            this._watermark();\n        },\n\n        shootDownload: function () {\n            this.shoot(function () {\n                this._download();\n            }.bind(this));\n        },\n\n        shootAsDataURL: function (callback) {\n            this.shoot(function () {\n                !!callback && callback(this.canvas_elem.toDataURL());\n            }.bind(this));\n        },\n\n        resize: function () {\n            if (this._inited) {\n                this.canvas_elem.width = this.jm.view.size.w;\n                this.canvas_elem.height = this.jm.view.size.h;\n            }\n        },\n\n        clean: function () {\n            var c = this.canvas_elem;\n            this.canvas_ctx.clearRect(0, 0, c.width, c.height);\n        },\n\n        _draw: function (callback) {\n            var ctx = this.canvas_ctx;\n            ctx.textAlign = 'left';\n            ctx.textBaseline = 'top';\n            this._draw_lines(function () {\n                this._draw_nodes(callback);\n            }.bind(this));\n        },\n\n        _watermark: function () {\n            var c = this.canvas_elem;\n            var ctx = this.canvas_ctx;\n            ctx.textAlign = 'right';\n            ctx.textBaseline = 'bottom';\n            ctx.fillStyle = '#000';\n            ctx.font = '11px Verdana,Arial,Helvetica,sans-serif';\n            ctx.fillText('hizzgdev.github.io/jsmind', c.width - 5.5, c.height - 2.5);\n            ctx.textAlign = 'left';\n            ctx.fillText($w.location, 5.5, c.height - 2.5);\n        },\n\n        _draw_lines: function (callback) {\n            this.jm.view.graph.copy_to(this.canvas_ctx, callback);\n        },\n\n        _draw_nodes: function (callback) {\n            var nodes = this.jm.mind.nodes;\n            var node;\n            for (var nodeid in nodes) {\n                node = nodes[nodeid];\n                this._draw_node(node);\n            }\n\n            function check_nodes_ready() {\n                console.log('check_node_ready' + new Date());\n                var allOk = true;\n                for (var nodeid in nodes) {\n                    node = nodes[nodeid];\n                    allOk = allOk & node.ready;\n                }\n\n                if (!allOk) {\n                    $w.setTimeout(check_nodes_ready, 200);\n                } else {\n                    $w.setTimeout(callback, 200);\n                }\n            }\n            check_nodes_ready();\n        },\n\n        _draw_node: function (node) {\n            var ctx = this.canvas_ctx;\n            var view_data = node._data.view;\n            var node_element = view_data.element;\n            var ncs = getComputedStyle(node_element);\n            if (!is_visible(ncs)) {\n                node.ready = true;\n                return;\n            }\n\n            var bgcolor = css(ncs, 'background-color');\n            var round_radius = parseInt(css(ncs, 'border-top-left-radius'));\n            var color = css(ncs, 'color');\n            var padding_left = parseInt(css(ncs, 'padding-left'));\n            var padding_right = parseInt(css(ncs, 'padding-right'));\n            var padding_top = parseInt(css(ncs, 'padding-top'));\n            var padding_bottom = parseInt(css(ncs, 'padding-bottom'));\n            var text_overflow = css(ncs, 'text-overflow');\n            var font = css(ncs, 'font-style') + ' ' +\n                css(ncs, 'font-variant') + ' ' +\n                css(ncs, 'font-weight') + ' ' +\n                css(ncs, 'font-size') + '/' + css(ncs, 'line-height') + ' ' +\n                css(ncs, 'font-family');\n\n            var rb = {\n                x: view_data.abs_x,\n                y: view_data.abs_y,\n                w: view_data.width + 1,\n                h: view_data.height + 1\n            };\n            var tb = {\n                x: rb.x + padding_left,\n                y: rb.y + padding_top,\n                w: rb.w - padding_left - padding_right,\n                h: rb.h - padding_top - padding_bottom\n            };\n\n            ctx.font = font;\n            ctx.fillStyle = bgcolor;\n            ctx.beginPath();\n            jcanvas.rect(ctx, rb.x, rb.y, rb.w, rb.h, round_radius);\n            ctx.closePath();\n            ctx.fill();\n\n            ctx.fillStyle = color;\n            if ('background-image' in node.data) {\n                var backgroundUrl = css(ncs, 'background-image').slice(5, -2);\n                node.ready = false;\n                var rotation = 0;\n                if ('background-rotation' in node.data) {\n                    rotation = node.data['background-rotation'];\n                }\n                jcanvas.image(ctx, backgroundUrl, rb.x, rb.y, rb.w, rb.h, round_radius, rotation,\n                    function () {\n                        node.ready = true;\n                    });\n            }\n            if (!!node.topic) {\n                if (text_overflow === 'ellipsis') {\n                    jcanvas.text_ellipsis(ctx, node.topic, tb.x, tb.y, tb.w, tb.h);\n                } else {\n                    var line_height = parseInt(css(ncs, 'line-height'));\n                    jcanvas.text_multiline(ctx, node.topic, tb.x, tb.y, tb.w, tb.h, line_height);\n                }\n            }\n            if (!!view_data.expander) {\n                this._draw_expander(view_data.expander);\n            }\n            if (!('background-image' in node.data)) {\n                node.ready = true;\n            }\n        },\n\n        _draw_expander: function (expander) {\n            var ctx = this.canvas_ctx;\n            var ncs = getComputedStyle(expander);\n            if (!is_visible(ncs)) { return; }\n\n            var style_left = css(ncs, 'left');\n            var style_top = css(ncs, 'top');\n            var font = css(ncs, 'font');\n            var left = parseInt(style_left);\n            var top = parseInt(style_top);\n            var is_plus = expander.innerHTML === '+';\n\n            ctx.lineWidth = 1;\n\n            ctx.beginPath();\n            ctx.arc(left + 7, top + 7, 5, 0, Math.PI * 2, true);\n            ctx.moveTo(left + 10, top + 7);\n            ctx.lineTo(left + 4, top + 7);\n            if (is_plus) {\n                ctx.moveTo(left + 7, top + 4);\n                ctx.lineTo(left + 7, top + 10);\n            }\n            ctx.closePath();\n            ctx.stroke();\n        },\n\n        _download: function () {\n            var c = this.canvas_elem;\n            var name = this.jm.mind.name + '.png';\n\n            if (navigator.msSaveBlob && (!!c.msToBlob)) {\n                var blob = c.msToBlob();\n                navigator.msSaveBlob(blob, name);\n            } else {\n                var bloburl = this.canvas_elem.toDataURL();\n                var anchor = $c('a');\n                if ('download' in anchor) {\n                    anchor.style.visibility = 'hidden';\n                    anchor.href = bloburl;\n                    anchor.download = name;\n                    $d.body.appendChild(anchor);\n                    var evt = $d.createEvent('MouseEvents');\n                    evt.initEvent('click', true, true);\n                    anchor.dispatchEvent(evt);\n                    $d.body.removeChild(anchor);\n                } else {\n                    location.href = bloburl;\n                }\n            }\n        },\n\n        jm_event_handle: function (type, data) {\n            if (type === jsMind.event_type.resize) {\n                this.resize();\n            }\n        }\n    };\n\n    var screenshot_plugin = new jsMind.plugin('screenshot', function (jm) {\n        var jss = new jsMind.screenshot(jm);\n        jm.screenshot = jss;\n        jm.shoot = function () {\n            jss.shoot();\n        };\n        jm.add_event_listener(function (type, data) {\n            jss.jm_event_handle.call(jss, type, data);\n        });\n    });\n\n    jsMind.register_plugin(screenshot_plugin);\n\n})(window);\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/JsMind/jsmind.screenshot.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{key:_vm.refresh,style:({height: _vm.height})},[_c('div',{attrs:{\"id\":\"jsmind_container\"}}),_vm._v(\" \"),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"}},[_c('input',{staticClass:\"file\",attrs:{\"type\":\"file\",\"id\":\"image-chooser\",\"accept\":\"image/*\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7e05affa\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/JsMind/JsMind.vue\n// module id = 16\n// module chunks = 0"],"sourceRoot":""}